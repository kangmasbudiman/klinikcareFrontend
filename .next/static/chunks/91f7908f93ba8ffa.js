(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3116,e=>{"use strict";let t=(0,e.i(75254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],3116)},63269,e=>{"use strict";var t=e.i(18e3);e.s(["default",0,{getDepartments:async()=>(await t.default.get("/api/kiosk/departments")).data,getSchedulesByDepartment:async e=>(await t.default.get(`/api/kiosk/departments/${e}/schedules`)).data,takeQueue:async(e,a)=>(await t.default.post("/api/kiosk/take-queue",{department_id:e,doctor_id:a??null})).data,getQueueDisplay:async()=>(await t.default.get("/api/kiosk/queue-display")).data}])},82373,e=>{"use strict";let t=(0,e.i(75254).default)("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);e.s(["Volume2",()=>t],82373)},52170,e=>{"use strict";let t=new class{synth=null;voice=null;isInitialized=!1;volume=1;rate=.9;pitch=1;constructor(){this.synth=window.speechSynthesis,this.initVoice()}initVoice(){if(!this.synth)return;let e=()=>{let e=this.synth.getVoices();this.voice=e.find(e=>e.lang.startsWith("id")||e.lang.includes("ID"))||null,!this.voice&&e.length>0&&(this.voice=e.find(e=>e.name.toLowerCase().includes("female"))||e.find(e=>e.name.toLowerCase().includes("google"))||e[0]),this.isInitialized=!0};this.synth.getVoices().length>0?e():this.synth.onvoiceschanged=e}parseQueueCode(e){let t={0:"nol",1:"satu",2:"dua",3:"tiga",4:"empat",5:"lima",6:"enam",7:"tujuh",8:"delapan",9:"sembilan"},a=e.split(/[-\s]/),s=[];for(let e of a)if(/^[A-Za-z]+$/.test(e))s.push(e.toUpperCase());else if(/^\d+$/.test(e)){let a=e.split("").map(e=>t[e]||e);s.push(a.join(" "))}else s.push(e);return s.join(" ")}parseCounterNumber(e){return({1:"satu",2:"dua",3:"tiga",4:"empat",5:"lima",6:"enam",7:"tujuh",8:"delapan",9:"sembilan",10:"sepuluh",11:"sebelas",12:"dua belas",13:"tiga belas",14:"empat belas",15:"lima belas"})[e]||e.toString()}buildAnnouncementText(e){let t=this.parseQueueCode(e.queueCode),a=`Nomor antrian ${t}`;if(e.counterNumber){let t=this.parseCounterNumber(e.counterNumber);a+=`, silakan menuju loket ${t}`}return e.departmentName&&(a+=`, ${e.departmentName}`),a}speak(e){return new Promise((t,a)=>{if(!this.synth)return void a(Error("Speech synthesis not supported"));this.synth.cancel();let s=new SpeechSynthesisUtterance(this.buildAnnouncementText(e));this.voice&&(s.voice=this.voice),s.volume=this.volume,s.rate=this.rate,s.pitch=this.pitch,s.lang="id-ID",s.onend=()=>t(),s.onerror=e=>{if("interrupted"===e.error||"canceled"===e.error){console.log("Speech was interrupted/canceled, resolving gracefully"),t();return}console.error("Speech synthesis error:",e.error),a(e.error)},this.playChime().then(()=>{setTimeout(()=>{this.synth&&!this.synth.speaking&&this.synth.speak(s)},300)}).catch(()=>{this.synth&&!this.synth.speaking&&this.synth.speak(s)})})}playChime(){return new Promise(e=>{if(!window.AudioContext)return void e();try{let t=new(window.AudioContext||window.webkitAudioContext),a=(e,a,s)=>{let i=t.createOscillator(),n=t.createGain();i.connect(n),n.connect(t.destination),i.frequency.value=e,i.type="sine",n.gain.setValueAtTime(0,a),n.gain.linearRampToValueAtTime(.3,a+.05),n.gain.linearRampToValueAtTime(0,a+s),i.start(a),i.stop(a+s)},s=t.currentTime;a(523.25,s,.2),a(659.25,s+.15,.3),setTimeout(e,500)}catch{e()}})}async announce(e,t=2){for(let a=0;a<t;a++){try{await this.speak(e)}catch(e){console.warn(`Announcement attempt ${a+1} failed:`,e)}a<t-1&&await new Promise(e=>setTimeout(e,1e3))}}setVolume(e){this.volume=Math.max(0,Math.min(1,e))}setRate(e){this.rate=Math.max(.1,Math.min(2,e))}isSupported(){return"speechSynthesis"in window}stop(){this.synth&&this.synth.cancel()}getVoices(){return this.synth?this.synth.getVoices():[]}setVoice(e){this.voice=e}};e.s(["default",0,t])},41303,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(46932),i=e.i(88653),n=e.i(82373),l=e.i(35116);let r=(0,e.i(75254).default)("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);var c=e.i(3116),o=e.i(39616),d=e.i(19455),u=e.i(67692),m=e.i(37822),h=e.i(10204),x=e.i(63269),p=e.i(52170);function g(){let[e,g]=(0,a.useState)(null),[y,f]=(0,a.useState)(null),[j,N]=(0,a.useState)(!1),[v,w]=(0,a.useState)(!1),[b,k]=(0,a.useState)(100),[C,S]=(0,a.useState)(null),[A,T]=(0,a.useState)(!1),V=(0,a.useRef)([]),q=(0,a.useRef)(!1),M=(0,a.useCallback)(async()=>{if(!q.current&&0!==V.current.length&&!v){for(q.current=!0,T(!0);V.current.length>0;){let e=V.current.shift();if(e){try{await p.default.announce(e,2)}catch(e){console.error("Error announcing:",e)}await new Promise(e=>setTimeout(e,500))}}q.current=!1,T(!1)}},[v]),P=(0,a.useCallback)(async()=>{try{let e=(await x.default.getQueueDisplay()).data;if(e.current.length>0){let t=e.current[0];t.queue_code!==C&&"called"===t.status&&(S(t.queue_code),v||(V.current.push({queueCode:t.queue_code,counterNumber:t.counter,departmentName:t.department}),M()))}g(e)}catch(e){console.error("Error fetching display data:",e)}},[C,v,M]);(0,a.useEffect)(()=>{P();let e=setInterval(P,3e3);return()=>clearInterval(e)},[P]),(0,a.useEffect)(()=>{N(!0),f(new Date)},[]),(0,a.useEffect)(()=>{if(!j)return;let e=setInterval(()=>{f(new Date)},1e3);return()=>clearInterval(e)},[j]),(0,a.useEffect)(()=>{p.default.setVolume(b/100)},[b]),(0,a.useEffect)(()=>{v&&(p.default.stop(),V.current=[])},[v]);let _=e=>({blue:"from-blue-500 to-blue-600",green:"from-green-500 to-green-600",red:"from-red-500 to-red-600",yellow:"from-yellow-500 to-yellow-600",purple:"from-purple-500 to-purple-600",pink:"from-pink-500 to-pink-600",indigo:"from-indigo-500 to-indigo-600",cyan:"from-cyan-500 to-cyan-600",orange:"from-orange-500 to-orange-600",teal:"from-teal-500 to-teal-600"})[e]||"from-gray-500 to-gray-600";return j&&y?(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 text-white p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Antrian Pasien"}),(0,t.jsx)("p",{className:"text-slate-400",children:y.toLocaleDateString("id-ID",{weekday:"long",day:"numeric",month:"long",year:"numeric"})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[A&&(0,t.jsxs)(s.motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"flex items-center gap-2 px-3 py-1 rounded-full bg-green-500/20 text-green-400",children:[(0,t.jsx)(s.motion.div,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:1},className:"w-2 h-2 rounded-full bg-green-400"}),(0,t.jsx)("span",{className:"text-sm",children:"Memanggil..."})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-2xl font-mono",children:[(0,t.jsx)(c.Clock,{className:"h-6 w-6 text-slate-400"}),y.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",second:"2-digit"})]}),(0,t.jsxs)(m.Popover,{children:[(0,t.jsx)(m.PopoverTrigger,{asChild:!0,children:(0,t.jsx)(d.Button,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/10",children:(0,t.jsx)(o.Settings,{className:"h-5 w-5"})})}),(0,t.jsx)(m.PopoverContent,{className:"w-72",align:"end",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"font-medium",children:"Pengaturan Audio"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(h.Label,{children:"Volume"}),(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:[b,"%"]})]}),(0,t.jsx)(u.Slider,{value:[b],onValueChange:e=>k(e[0]),max:100,step:10,disabled:v})]}),(0,t.jsxs)(d.Button,{variant:"outline",size:"sm",onClick:()=>{v||p.default.announce({queueCode:"A-001",counterNumber:1,departmentName:"Poli Umum"},1)},disabled:v,className:"w-full",children:[(0,t.jsx)(n.Volume2,{className:"h-4 w-4 mr-2"}),"Test Suara"]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Suara akan memanggil nomor antrian dan loket secara otomatis"})]})})]}),(0,t.jsx)(d.Button,{variant:"ghost",size:"icon",onClick:()=>w(!v),className:"text-white hover:bg-white/10",children:v?(0,t.jsx)(l.VolumeX,{className:"h-5 w-5"}):(0,t.jsx)(n.Volume2,{className:"h-5 w-5"})}),(0,t.jsx)(d.Button,{variant:"ghost",size:"icon",onClick:()=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()},className:"text-white hover:bg-white/10",children:(0,t.jsx)(r,{className:"h-5 w-5"})})]})]}),(0,t.jsxs)("div",{className:"grid gap-8 lg:grid-cols-3",children:[(0,t.jsxs)("div",{className:"lg:col-span-2",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4 text-slate-300",children:"Sedang Dipanggil"}),(0,t.jsx)(i.AnimatePresence,{mode:"wait",children:e?.current&&e.current.length>0?(0,t.jsx)(s.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"space-y-4",children:e.current.map((e,a)=>(0,t.jsx)(s.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*a},className:`p-8 rounded-3xl bg-gradient-to-r ${_(e.department_color)} shadow-2xl`,children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-lg opacity-80",children:e.department}),(0,t.jsx)(s.motion.p,{className:"text-8xl font-bold tracking-wider",animate:"called"===e.status?{scale:[1,1.02,1]}:{},transition:{repeat:1/0,duration:2},children:e.queue_code}),e.patient_name&&(0,t.jsx)("p",{className:"text-2xl mt-2 opacity-90",children:e.patient_name})]}),(0,t.jsxs)("div",{className:"text-right",children:[e.counter&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-lg opacity-80",children:"Loket"}),(0,t.jsx)(s.motion.p,{className:"text-6xl font-bold",animate:"called"===e.status?{scale:[1,1.05,1]}:{},transition:{repeat:1/0,duration:2,delay:.5},children:e.counter})]}),(0,t.jsx)("p",{className:"mt-2 text-lg opacity-80",children:"called"===e.status?"Silakan ke loket":"Sedang dilayani"})]})]})},e.queue_code))},e.current[0].queue_code):(0,t.jsx)(s.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"p-16 rounded-3xl bg-slate-800/50 text-center",children:(0,t.jsx)("p",{className:"text-4xl text-slate-500",children:"Menunggu panggilan..."})})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4 text-slate-300",children:"Antrian Berikutnya"}),(0,t.jsx)("div",{className:"space-y-3",children:(0,t.jsx)(i.AnimatePresence,{children:e?.waiting&&e.waiting.length>0?e.waiting.map((e,a)=>(0,t.jsxs)(s.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{delay:.05*a},className:"p-4 rounded-xl bg-slate-800/80 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:`w-3 h-3 rounded-full bg-gradient-to-r ${_(e.department_color)}`}),(0,t.jsx)("span",{className:"text-2xl font-bold",children:e.queue_code})]}),(0,t.jsx)("span",{className:"text-slate-400",children:e.department})]},e.queue_code)):(0,t.jsx)(s.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"p-8 rounded-xl bg-slate-800/50 text-center",children:(0,t.jsx)("p",{className:"text-slate-500",children:"Tidak ada antrian"})})})})]})]}),(0,t.jsxs)("div",{className:"mt-8 text-center text-slate-500 text-sm",children:[(0,t.jsx)("p",{children:"Harap menunggu sampai nomor antrian Anda dipanggil"}),j&&!p.default.isSupported()&&(0,t.jsx)("p",{className:"mt-2 text-yellow-500",children:"Browser tidak mendukung fitur suara. Gunakan browser modern untuk pengalaman terbaik."})]})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 text-white p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Antrian Pasien"}),(0,t.jsx)("p",{className:"text-slate-400",children:"Memuat..."})]}),(0,t.jsx)("div",{className:"flex items-center gap-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-2xl font-mono",children:[(0,t.jsx)(c.Clock,{className:"h-6 w-6 text-slate-400"}),(0,t.jsx)("span",{children:"--:--:--"})]})})]}),(0,t.jsxs)("div",{className:"grid gap-8 lg:grid-cols-3",children:[(0,t.jsxs)("div",{className:"lg:col-span-2",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4 text-slate-300",children:"Sedang Dipanggil"}),(0,t.jsx)("div",{className:"p-16 rounded-3xl bg-slate-800/50 text-center animate-pulse",children:(0,t.jsx)("p",{className:"text-4xl text-slate-500",children:"Memuat..."})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4 text-slate-300",children:"Antrian Berikutnya"}),(0,t.jsx)("div",{className:"p-8 rounded-xl bg-slate-800/50 text-center animate-pulse",children:(0,t.jsx)("p",{className:"text-slate-500",children:"Memuat..."})})]})]})]})}e.s(["default",()=>g],41303)}]);