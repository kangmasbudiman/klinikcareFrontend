(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,98134,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(46932),i=e.i(46696),l=e.i(61911),r=e.i(82293),n=e.i(75254);let d=(0,n.default)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);var c=e.i(98919),o=e.i(55436),m=e.i(7233),x=e.i(16715),h=e.i(97548),u=e.i(15288),p=e.i(19455),g=e.i(93479),j=e.i(67489),v=e.i(86536),N=e.i(88511),f=e.i(27612),b=e.i(81203),y=e.i(41071),k=e.i(73375),w=e.i(63059),C=e.i(7486),S=e.i(84774),P=e.i(55146),T=e.i(99676),D=e.i(87486),_=e.i(43873),A=e.i(75157);function B(){return(0,a.jsxs)(S.TableRow,{children:[(0,a.jsx)(S.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-muted animate-pulse"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"h-4 w-32 bg-muted animate-pulse rounded"}),(0,a.jsx)("div",{className:"h-3 w-40 bg-muted animate-pulse rounded"})]})]})}),(0,a.jsx)(S.TableCell,{children:(0,a.jsx)("div",{className:"h-6 w-20 bg-muted animate-pulse rounded-full"})}),(0,a.jsx)(S.TableCell,{children:(0,a.jsx)("div",{className:"h-6 w-24 bg-muted animate-pulse rounded-full"})}),(0,a.jsx)(S.TableCell,{children:(0,a.jsx)("div",{className:"h-6 w-16 bg-muted animate-pulse rounded-full"})}),(0,a.jsx)(S.TableCell,{children:(0,a.jsx)("div",{className:"h-4 w-24 bg-muted animate-pulse rounded"})}),(0,a.jsx)(S.TableCell,{children:(0,a.jsx)("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"})})]})}function L(){return(0,a.jsx)(S.TableRow,{children:(0,a.jsx)(S.TableCell,{colSpan:6,className:"h-48",children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center text-center",children:[(0,a.jsx)("div",{className:"p-4 rounded-full bg-muted/50 mb-4",children:(0,a.jsx)(l.Users,{className:"h-8 w-8 text-muted-foreground"})}),(0,a.jsx)("h3",{className:"font-semibold text-lg",children:"Tidak ada pengguna"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Belum ada pengguna yang sesuai dengan filter"})]})})})}let E=e=>"dokter"===e||"perawat"===e;function z({users:e,isLoading:s=!1,currentPage:i,totalPages:l,onPageChange:r,onView:n,onEdit:d,onDelete:c,onToggleStatus:o,onAssignDepartments:m}){return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"rounded-xl border bg-card overflow-hidden",children:(0,a.jsxs)(S.Table,{children:[(0,a.jsx)(S.TableHeader,{children:(0,a.jsxs)(S.TableRow,{className:"bg-muted/50 hover:bg-muted/50",children:[(0,a.jsx)(S.TableHead,{className:"font-semibold",children:"Pengguna"}),(0,a.jsx)(S.TableHead,{className:"font-semibold",children:"Role"}),(0,a.jsx)(S.TableHead,{className:"font-semibold",children:"Poli"}),(0,a.jsx)(S.TableHead,{className:"font-semibold",children:"Status"}),(0,a.jsx)(S.TableHead,{className:"font-semibold",children:"Bergabung"}),(0,a.jsx)(S.TableHead,{className:"font-semibold w-[80px]",children:"Aksi"})]})}),(0,a.jsx)(S.TableBody,{children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(B,{}),(0,a.jsx)(B,{}),(0,a.jsx)(B,{}),(0,a.jsx)(B,{}),(0,a.jsx)(B,{})]}):0===e.length?(0,a.jsx)(L,{}):e.map((e,s)=>(0,a.jsxs)(t.motion.tr,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.05*s},className:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",children:[(0,a.jsx)(S.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(T.Avatar,{className:"h-10 w-10 border",children:[(0,a.jsx)(T.AvatarImage,{src:e.avatar,alt:e.name}),(0,a.jsx)(T.AvatarFallback,{className:"bg-primary/10 text-primary text-sm",children:(0,A.getInitials)(e.name)})]}),(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("p",{className:"font-medium truncate",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground truncate",children:e.email})]})]})}),(0,a.jsx)(S.TableCell,{children:(0,a.jsx)(D.Badge,{variant:e.role,children:_.ROLE_LABELS[e.role]})}),(0,a.jsx)(S.TableCell,{children:E(e.role)?e.departments&&e.departments.length>0?(0,a.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.departments.slice(0,2).map(e=>(0,a.jsxs)(D.Badge,{variant:"outline",className:"text-xs",style:{borderColor:e.color,color:e.color},children:[e.is_primary&&"★ ",e.name]},e.id)),e.departments.length>2&&(0,a.jsxs)(D.Badge,{variant:"outline",className:"text-xs",children:["+",e.departments.length-2]})]}):(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Belum di-assign"}):(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"-"})}),(0,a.jsx)(S.TableCell,{children:(0,a.jsx)(D.Badge,{variant:e.is_active?"success":"error",children:e.is_active?"Aktif":"Nonaktif"})}),(0,a.jsx)(S.TableCell,{className:"text-muted-foreground",children:(0,A.formatDate)(e.created_at)}),(0,a.jsx)(S.TableCell,{children:(0,a.jsxs)(P.DropdownMenu,{children:[(0,a.jsx)(P.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsxs)(p.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:[(0,a.jsx)(y.MoreHorizontal,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Buka menu"})]})}),(0,a.jsxs)(P.DropdownMenuContent,{align:"end",className:"w-48",children:[(0,a.jsxs)(P.DropdownMenuItem,{onClick:()=>n(e),children:[(0,a.jsx)(v.Eye,{className:"mr-2 h-4 w-4"}),"Lihat Detail"]}),(0,a.jsxs)(P.DropdownMenuItem,{onClick:()=>d(e),children:[(0,a.jsx)(N.Edit,{className:"mr-2 h-4 w-4"}),"Edit"]}),E(e.role)&&m&&(0,a.jsxs)(P.DropdownMenuItem,{onClick:()=>m(e),children:[(0,a.jsx)(C.Building2,{className:"mr-2 h-4 w-4"}),"Assign Poli"]}),(0,a.jsxs)(P.DropdownMenuItem,{onClick:()=>o(e),children:[(0,a.jsx)(b.Power,{className:"mr-2 h-4 w-4"}),e.is_active?"Nonaktifkan":"Aktifkan"]}),(0,a.jsx)(P.DropdownMenuSeparator,{}),(0,a.jsxs)(P.DropdownMenuItem,{onClick:()=>c(e),className:"text-destructive focus:text-destructive",children:[(0,a.jsx)(f.Trash2,{className:"mr-2 h-4 w-4"}),"Hapus"]})]})]})})]},e.id))})]})}),l>1&&(0,a.jsxs)("div",{className:"flex items-center justify-between px-2",children:[(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Halaman ",i," dari ",l]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(p.Button,{variant:"outline",size:"sm",onClick:()=>r(i-1),disabled:i<=1,children:[(0,a.jsx)(k.ChevronLeft,{className:"h-4 w-4 mr-1"}),"Sebelumnya"]}),(0,a.jsxs)(p.Button,{variant:"outline",size:"sm",onClick:()=>r(i+1),disabled:i>=l,children:["Selanjutnya",(0,a.jsx)(w.ChevronRight,{className:"h-4 w-4 ml-1"})]})]})]})]})}var I=e.i(53145),R=e.i(94814),F=e.i(88653),H=e.i(84614),M=e.i(63488),O=e.i(43432),U=e.i(70756);let $=(0,n.default)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var V=e.i(31278),q=e.i(63209),G=e.i(76639),K=e.i(10204),X=e.i(99375),J=e.i(50270);let Y=J.z.object({name:J.z.string().min(1,"Nama wajib diisi").min(2,"Nama minimal 2 karakter").max(100,"Nama maksimal 100 karakter"),email:J.z.string().min(1,"Email wajib diisi").email("Format email tidak valid"),password:J.z.string().min(1,"Password wajib diisi").min(6,"Password minimal 6 karakter").max(50,"Password maksimal 50 karakter"),phone:J.z.string().max(20,"Nomor telepon maksimal 20 karakter").optional().or(J.z.literal("")),role:J.z.enum(["super_admin","admin_klinik","dokter","perawat","kasir","apoteker","pasien"],{required_error:"Role wajib dipilih",invalid_type_error:"Role tidak valid"}),is_active:J.z.boolean().default(!0),avatar:J.z.string().optional()}),Q=J.z.object({name:J.z.string().min(1,"Nama wajib diisi").min(2,"Nama minimal 2 karakter").max(100,"Nama maksimal 100 karakter"),email:J.z.string().min(1,"Email wajib diisi").email("Format email tidak valid"),password:J.z.string().min(6,"Password minimal 6 karakter").max(50,"Password maksimal 50 karakter").optional().or(J.z.literal("")),phone:J.z.string().max(20,"Nomor telepon maksimal 20 karakter").optional().or(J.z.literal("")),role:J.z.enum(["super_admin","admin_klinik","dokter","perawat","kasir","apoteker","pasien"],{required_error:"Role wajib dipilih",invalid_type_error:"Role tidak valid"}),is_active:J.z.boolean().default(!0),avatar:J.z.string().optional()});var W=e.i(82526);function Z({open:e,onOpenChange:i,user:l,onSuccess:r}){let n=!!l,[d,o]=(0,s.useState)(!1),[m,x]=(0,s.useState)(""),{register:h,handleSubmit:u,setValue:v,watch:N,reset:f,formState:{errors:b}}=(0,I.useForm)({resolver:(0,R.zodResolver)(n?Q:Y),defaultValues:{name:"",email:"",password:"",phone:"",role:"pasien",is_active:!0,avatar:""}}),y=N("name"),k=N("is_active");(0,s.useEffect)(()=>{e&&(l?(f({name:l.name,email:l.email,password:"",phone:l.phone||"",role:l.role,is_active:l.is_active,avatar:l.avatar||""}),x(l.avatar||"")):(f({name:"",email:"",password:"",phone:"",role:"pasien",is_active:!0,avatar:""}),x("")))},[e,l,f]),(0,s.useEffect)(()=>{!m&&y&&x(`https://api.dicebear.com/7.x/avataaars/svg?seed=${encodeURIComponent(y)}`)},[y,m]);let w=async e=>{o(!0);try{let a={...e,avatar:e.avatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${encodeURIComponent(e.name)}`};n&&l?(a.password||delete a.password,await W.default.updateUser(l.id,a)):await W.default.createUser(a),r(),i(!1)}catch(e){console.error("Error saving user:",e)}finally{o(!1)}},C=W.default.getRoleOptions();return(0,a.jsx)(G.Dialog,{open:e,onOpenChange:i,children:(0,a.jsxs)(G.DialogContent,{className:"sm:max-w-[500px]",children:[(0,a.jsxs)(G.DialogHeader,{children:[(0,a.jsx)(G.DialogTitle,{className:"text-xl",children:n?"Edit Pengguna":"Tambah Pengguna Baru"}),(0,a.jsx)(G.DialogDescription,{children:n?"Perbarui informasi pengguna di bawah ini.":"Isi informasi pengguna baru di bawah ini."})]}),(0,a.jsxs)("form",{onSubmit:u(w),className:"space-y-5 py-4",children:[(0,a.jsxs)(t.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex flex-col items-center gap-3",children:[(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsxs)(T.Avatar,{className:"h-24 w-24 border-4 border-primary/20",children:[(0,a.jsx)(T.AvatarImage,{src:m,alt:y||"Avatar"}),(0,a.jsx)(T.AvatarFallback,{className:"text-2xl bg-primary/10 text-primary",children:y?(0,A.getInitials)(y):"?"})]}),(0,a.jsx)("div",{className:"absolute inset-0 rounded-full bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center cursor-pointer",children:(0,a.jsx)($,{className:"h-6 w-6 text-white"})})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Avatar akan dibuat otomatis berdasarkan nama"})]}),(0,a.jsxs)(t.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"space-y-2",children:[(0,a.jsxs)(K.Label,{htmlFor:"name",className:"text-sm font-medium",children:["Nama Lengkap ",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(H.User,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(g.Input,{id:"name",placeholder:"Masukkan nama lengkap",className:"pl-10",...h("name")})]}),(0,a.jsx)(F.AnimatePresence,{children:b.name&&(0,a.jsxs)(t.motion.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-sm text-destructive flex items-center gap-1",children:[(0,a.jsx)(q.AlertCircle,{className:"h-3 w-3"}),b.name.message]})})]}),(0,a.jsxs)(t.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15},className:"space-y-2",children:[(0,a.jsxs)(K.Label,{htmlFor:"email",className:"text-sm font-medium",children:["Email ",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(M.Mail,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(g.Input,{id:"email",type:"email",placeholder:"nama@email.com",className:"pl-10",...h("email")})]}),(0,a.jsx)(F.AnimatePresence,{children:b.email&&(0,a.jsxs)(t.motion.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-sm text-destructive flex items-center gap-1",children:[(0,a.jsx)(q.AlertCircle,{className:"h-3 w-3"}),b.email.message]})})]}),(0,a.jsxs)(t.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"space-y-2",children:[(0,a.jsxs)(K.Label,{htmlFor:"password",className:"text-sm font-medium",children:["Password ",!n&&(0,a.jsx)("span",{className:"text-destructive",children:"*"}),n&&(0,a.jsx)("span",{className:"text-muted-foreground font-normal",children:"(kosongkan jika tidak ingin mengubah)"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(U.Lock,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(g.Input,{id:"password",type:"password",placeholder:n?"••••••••":"Minimal 6 karakter",className:"pl-10",...h("password")})]}),(0,a.jsx)(F.AnimatePresence,{children:b.password&&(0,a.jsxs)(t.motion.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-sm text-destructive flex items-center gap-1",children:[(0,a.jsx)(q.AlertCircle,{className:"h-3 w-3"}),b.password.message]})})]}),(0,a.jsxs)(t.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.25},className:"space-y-2",children:[(0,a.jsx)(K.Label,{htmlFor:"phone",className:"text-sm font-medium",children:"Nomor Telepon"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(O.Phone,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(g.Input,{id:"phone",type:"tel",placeholder:"081234567890",className:"pl-10",...h("phone")})]}),(0,a.jsx)(F.AnimatePresence,{children:b.phone&&(0,a.jsxs)(t.motion.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-sm text-destructive flex items-center gap-1",children:[(0,a.jsx)(q.AlertCircle,{className:"h-3 w-3"}),b.phone.message]})})]}),(0,a.jsxs)(t.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"space-y-2",children:[(0,a.jsxs)(K.Label,{htmlFor:"role",className:"text-sm font-medium",children:["Role ",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c.Shield,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground z-10"}),(0,a.jsxs)(j.Select,{value:N("role"),onValueChange:e=>v("role",e),children:[(0,a.jsx)(j.SelectTrigger,{className:"pl-10",children:(0,a.jsx)(j.SelectValue,{placeholder:"Pilih role"})}),(0,a.jsx)(j.SelectContent,{children:C.map(e=>(0,a.jsx)(j.SelectItem,{value:e.value,children:e.label},e.value))})]})]}),(0,a.jsx)(F.AnimatePresence,{children:b.role&&(0,a.jsxs)(t.motion.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-sm text-destructive flex items-center gap-1",children:[(0,a.jsx)(q.AlertCircle,{className:"h-3 w-3"}),b.role.message]})})]}),(0,a.jsxs)(t.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.35},className:"flex items-center justify-between rounded-lg border p-4",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(K.Label,{htmlFor:"is_active",className:"text-sm font-medium",children:"Status Aktif"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:k?"Pengguna dapat mengakses sistem":"Pengguna tidak dapat login"})]}),(0,a.jsx)(X.Switch,{id:"is_active",checked:k,onCheckedChange:e=>v("is_active",e)})]})]}),(0,a.jsxs)(G.DialogFooter,{className:"gap-2 sm:gap-0",children:[(0,a.jsx)(p.Button,{type:"button",variant:"outline",onClick:()=>i(!1),disabled:d,children:"Batal"}),(0,a.jsx)(p.Button,{type:"submit",onClick:u(w),disabled:d,className:"min-w-[100px]",children:d?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(V.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Menyimpan..."]}):n?"Simpan Perubahan":"Tambah Pengguna"})]})]})})}var ee=e.i(87316),ea=e.i(69638),es=e.i(73884),et=e.i(72436);function ei({open:e,onOpenChange:s,user:i,onEdit:l,onToggleStatus:r}){return i?(0,a.jsx)(G.Dialog,{open:e,onOpenChange:s,children:(0,a.jsxs)(G.DialogContent,{className:"sm:max-w-[450px]",children:[(0,a.jsx)(G.DialogHeader,{children:(0,a.jsx)(G.DialogTitle,{className:"text-xl",children:"Detail Pengguna"})}),(0,a.jsxs)("div",{className:"py-4 space-y-6",children:[(0,a.jsxs)(t.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex flex-col items-center text-center",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)(T.Avatar,{className:"h-24 w-24 border-4 border-primary/20",children:[(0,a.jsx)(T.AvatarImage,{src:i.avatar,alt:i.name}),(0,a.jsx)(T.AvatarFallback,{className:"text-2xl bg-primary/10 text-primary",children:(0,A.getInitials)(i.name)})]}),(0,a.jsx)("div",{className:`absolute -bottom-1 -right-1 w-6 h-6 rounded-full border-2 border-background flex items-center justify-center ${i.is_active?"bg-emerald-500":"bg-gray-400"}`,children:i.is_active?(0,a.jsx)(ea.CheckCircle,{className:"h-4 w-4 text-white"}):(0,a.jsx)(es.XCircle,{className:"h-4 w-4 text-white"})})]}),(0,a.jsx)("h3",{className:"mt-4 text-lg font-semibold",children:i.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,a.jsx)(D.Badge,{variant:i.role,children:_.ROLE_LABELS[i.role]}),(0,a.jsx)(D.Badge,{variant:i.is_active?"success":"error",children:i.is_active?"Aktif":"Nonaktif"})]})]}),(0,a.jsx)(et.Separator,{}),(0,a.jsxs)(t.motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg bg-blue-100 dark:bg-blue-950",children:(0,a.jsx)(M.Mail,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Email"}),(0,a.jsx)("p",{className:"text-sm font-medium truncate",children:i.email})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg bg-green-100 dark:bg-green-950",children:(0,a.jsx)(O.Phone,{className:"h-4 w-4 text-green-600 dark:text-green-400"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Nomor Telepon"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:i.phone||"-"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-950",children:(0,a.jsx)(c.Shield,{className:"h-4 w-4 text-purple-600 dark:text-purple-400"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Role"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:_.ROLE_LABELS[i.role]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg bg-orange-100 dark:bg-orange-950",children:(0,a.jsx)(ee.Calendar,{className:"h-4 w-4 text-orange-600 dark:text-orange-400"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Bergabung Sejak"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:(0,A.formatDate)(i.created_at)})]})]})]}),(0,a.jsx)(et.Separator,{}),(0,a.jsxs)(t.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex gap-2",children:[(0,a.jsxs)(p.Button,{variant:"outline",className:"flex-1",onClick:()=>{s(!1),l()},children:[(0,a.jsx)(N.Edit,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,a.jsxs)(p.Button,{variant:i.is_active?"destructive":"default",className:"flex-1",onClick:()=>{s(!1),r()},children:[(0,a.jsx)(b.Power,{className:"mr-2 h-4 w-4"}),i.is_active?"Nonaktifkan":"Aktifkan"]})]})]})]})}):null}var el=e.i(78894);function er({open:e,onOpenChange:i,user:l,onConfirm:r}){let[n,d]=(0,s.useState)(!1);if(!l)return null;let c=async()=>{d(!0);try{await r(),i(!1)}catch(e){console.error("Error deleting user:",e)}finally{d(!1)}};return(0,a.jsx)(G.Dialog,{open:e,onOpenChange:i,children:(0,a.jsxs)(G.DialogContent,{className:"sm:max-w-[400px]",children:[(0,a.jsxs)(G.DialogHeader,{children:[(0,a.jsxs)(G.DialogTitle,{className:"text-xl text-destructive flex items-center gap-2",children:[(0,a.jsx)(el.AlertTriangle,{className:"h-5 w-5"}),"Hapus Pengguna"]}),(0,a.jsx)(G.DialogDescription,{children:"Tindakan ini tidak dapat dibatalkan. Data pengguna akan dihapus secara permanen."})]}),(0,a.jsxs)(t.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"py-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 p-4 rounded-xl bg-destructive/10 border border-destructive/20",children:[(0,a.jsxs)(T.Avatar,{className:"h-14 w-14 border-2 border-destructive/30",children:[(0,a.jsx)(T.AvatarImage,{src:l.avatar,alt:l.name}),(0,a.jsx)(T.AvatarFallback,{className:"bg-destructive/10 text-destructive",children:(0,A.getInitials)(l.name)})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"font-semibold truncate",children:l.name}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground truncate",children:l.email}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:_.ROLE_LABELS[l.role]})]})]}),(0,a.jsx)("p",{className:"mt-4 text-sm text-muted-foreground text-center",children:"Apakah Anda yakin ingin menghapus pengguna ini?"})]}),(0,a.jsxs)(G.DialogFooter,{className:"gap-2 sm:gap-0",children:[(0,a.jsx)(p.Button,{type:"button",variant:"outline",onClick:()=>i(!1),disabled:n,children:"Batal"}),(0,a.jsx)(p.Button,{type:"button",variant:"destructive",onClick:c,disabled:n,className:"min-w-[100px]",children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(V.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Menghapus..."]}):"Ya, Hapus"})]})]})})}var en=e.i(57428);let ed=(0,n.default)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);var ec=e.i(90893);function eo({open:e,onOpenChange:t,user:l,onSuccess:r}){let[n,d]=(0,s.useState)([]),[c,o]=(0,s.useState)([]),[m,x]=(0,s.useState)(null),[h,u]=(0,s.useState)(!1),[g,j]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{if(e){u(!0);try{let e=await ec.default.getActiveDepartments();d(e.data)}catch(e){console.error("Error fetching departments:",e)}finally{u(!1)}}})()},[e]),(0,s.useEffect)(()=>{if(l?.departments&&l.departments.length>0){let e=l.departments.map(e=>e.id);o(e);let a=l.departments.find(e=>e.is_primary);x(a?a.id:e[0])}else o([]),x(null)},[l]);let v=async()=>{if(l){if(0===c.length)return void i.toast.error("Pilih minimal 1 poli");j(!0);try{await W.default.assignDepartments(Number(l.id),{department_ids:c,primary_department_id:m||c[0]}),i.toast.success("Poli berhasil ditugaskan",{description:`${l.name} telah ditugaskan ke ${c.length} poli`}),r(),t(!1)}catch(e){console.error("Error assigning departments:",e),i.toast.error("Gagal menugaskan poli",{description:e.response?.data?.message||"Terjadi kesalahan"})}finally{j(!1)}}};return l?["dokter","perawat"].includes(l.role)?(0,a.jsx)(G.Dialog,{open:e,onOpenChange:t,children:(0,a.jsxs)(G.DialogContent,{className:"sm:max-w-[500px]",children:[(0,a.jsxs)(G.DialogHeader,{children:[(0,a.jsxs)(G.DialogTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(C.Building2,{className:"h-5 w-5"}),"Penugasan Poli"]}),(0,a.jsxs)(G.DialogDescription,{children:["Pilih poli untuk ",l.name," (","dokter"===l.role?"Dokter":"Perawat",")"]})]}),h?(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)(V.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(K.Label,{children:"Pilih Poli"}),(0,a.jsx)("div",{className:"border rounded-lg max-h-[300px] overflow-y-auto",children:n.map(e=>{let s=c.includes(e.id),t=m===e.id;return(0,a.jsxs)("div",{className:`flex items-center justify-between p-3 border-b last:border-b-0 hover:bg-muted/50 ${s?"bg-primary/5":""}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(en.Checkbox,{id:`dept-${e.id}`,checked:s,onCheckedChange:a=>((e,a)=>{if(a)o([...c,e]),0===c.length&&x(e);else{let a=c.filter(a=>a!==e);o(a),m===e&&x(a.length>0?a[0]:null)}})(e.id,!0===a)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:`dept-${e.id}`,className:"font-medium cursor-pointer",children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Kode: ",e.code]})]})]}),s&&(0,a.jsxs)(p.Button,{type:"button",size:"sm",variant:t?"default":"outline",onClick:()=>x(e.id),className:"gap-1",children:[(0,a.jsx)(ed,{className:`h-3 w-3 ${t?"fill-current":""}`}),t?"Utama":"Jadikan Utama"]})]},e.id)})})]}),c.length>0&&(0,a.jsxs)("div",{className:"p-3 rounded-lg bg-muted/50",children:[(0,a.jsxs)("p",{className:"text-sm text-muted-foreground mb-2",children:["Poli yang dipilih (",c.length,"):"]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:c.map(e=>{let s=n.find(a=>a.id===e);return s?(0,a.jsxs)(D.Badge,{variant:e===m?"default":"secondary",className:"gap-1",children:[e===m&&(0,a.jsx)(ed,{className:"h-3 w-3 fill-current"}),s.name]},e):null})})]})]}),(0,a.jsxs)(G.DialogFooter,{children:[(0,a.jsx)(p.Button,{variant:"outline",onClick:()=>t(!1),disabled:g,children:"Batal"}),(0,a.jsxs)(p.Button,{onClick:v,disabled:g||0===c.length,children:[g&&(0,a.jsx)(V.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Simpan"]})]})]})}):(0,a.jsx)(G.Dialog,{open:e,onOpenChange:t,children:(0,a.jsxs)(G.DialogContent,{children:[(0,a.jsxs)(G.DialogHeader,{children:[(0,a.jsx)(G.DialogTitle,{children:"Penugasan Poli"}),(0,a.jsx)(G.DialogDescription,{children:"Penugasan poli hanya tersedia untuk role Dokter dan Perawat."})]}),(0,a.jsx)(G.DialogFooter,{children:(0,a.jsx)(p.Button,{onClick:()=>t(!1),children:"Tutup"})})]})}):null}let em=[{key:"total",title:"Total Pengguna",icon:l.Users,gradient:"from-blue-500 to-blue-600",bgLight:"bg-blue-50 dark:bg-blue-950/50",iconColor:"text-blue-600 dark:text-blue-400"},{key:"active",title:"Pengguna Aktif",icon:r.UserCheck,gradient:"from-emerald-500 to-emerald-600",bgLight:"bg-emerald-50 dark:bg-emerald-950/50",iconColor:"text-emerald-600 dark:text-emerald-400"},{key:"inactive",title:"Pengguna Nonaktif",icon:d,gradient:"from-red-500 to-red-600",bgLight:"bg-red-50 dark:bg-red-950/50",iconColor:"text-red-600 dark:text-red-400"},{key:"roles",title:"Total Role",icon:c.Shield,gradient:"from-purple-500 to-purple-600",bgLight:"bg-purple-50 dark:bg-purple-950/50",iconColor:"text-purple-600 dark:text-purple-400"}];function ex(){let[e,l]=(0,s.useState)([]),[r,n]=(0,s.useState)(null),[d,c]=(0,s.useState)(!0),[v,N]=(0,s.useState)(!1),[f,b]=(0,s.useState)(1),[y,k]=(0,s.useState)(1),[w,C]=(0,s.useState)({search:"",role:"all",status:"all",page:1,per_page:10}),[S,P]=(0,s.useState)(!1),[T,D]=(0,s.useState)(!1),[A,B]=(0,s.useState)(!1),[L,E]=(0,s.useState)(!1),[I,R]=(0,s.useState)(null),F=(0,s.useCallback)(async()=>{try{let e=await W.default.getUsers(w);l(e.data),b(e.meta.current_page),k(e.meta.last_page)}catch(e){console.error("Error fetching users:",e),i.toast.error("Gagal memuat data pengguna")}},[w]),H=(0,s.useCallback)(async()=>{try{let e=await W.default.getUserStats();n(e.data)}catch(e){console.error("Error fetching stats:",e)}},[]);(0,s.useEffect)(()=>{(async()=>{c(!0),await Promise.all([F(),H()]),c(!1)})()},[F,H]);let M=async()=>{N(!0),await Promise.all([F(),H()]),N(!1),i.toast.success("Data berhasil diperbarui")};(0,s.useEffect)(()=>{let e=setTimeout(()=>{C(e=>({...e,page:1}))},300);return()=>clearTimeout(e)},[w.search]);let O=(e,a)=>{C(s=>({...s,[e]:a,page:1}))},U=async e=>{try{await W.default.toggleUserStatus(e.id),i.toast.success(e.is_active?"Pengguna berhasil dinonaktifkan":"Pengguna berhasil diaktifkan"),await Promise.all([F(),H()])}catch(e){console.error("Error toggling status:",e),i.toast.error("Gagal mengubah status pengguna")}},$=async()=>{i.toast.success(I?"Pengguna berhasil diperbarui":"Pengguna berhasil dibuat"),await Promise.all([F(),H()])},V=async()=>{if(I)try{await W.default.deleteUser(I.id),i.toast.success("Pengguna berhasil dihapus"),await Promise.all([F(),H()])}catch(e){throw console.error("Error deleting user:",e),i.toast.error("Gagal menghapus pengguna"),e}},q=async()=>{i.toast.success("Poli berhasil di-assign ke pengguna"),await F()},G={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(t.motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl md:text-3xl font-bold",children:"Manajemen Pengguna"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1",children:"Kelola pengguna dan hak akses sistem"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(p.Button,{variant:"outline",size:"sm",onClick:M,disabled:v,children:[(0,a.jsx)(x.RefreshCw,{className:`h-4 w-4 mr-2 ${v?"animate-spin":""}`}),"Refresh"]}),(0,a.jsxs)(p.Button,{size:"sm",onClick:()=>{R(null),P(!0)},children:[(0,a.jsx)(m.Plus,{className:"h-4 w-4 mr-2"}),"Tambah Pengguna"]})]})]}),(0,a.jsx)(t.motion.div,{variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"show",className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:em.map(e=>{var s;return(0,a.jsx)(t.motion.div,{variants:G,children:(0,a.jsxs)(u.Card,{className:"relative overflow-hidden hover:shadow-lg transition-shadow",children:[(0,a.jsxs)(u.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,a.jsx)(u.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:e.title}),(0,a.jsx)("div",{className:`p-2.5 rounded-xl ${e.bgLight}`,children:(0,a.jsx)(e.icon,{className:`h-5 w-5 ${e.iconColor}`})})]}),(0,a.jsx)(u.CardContent,{children:(0,a.jsx)("div",{className:"text-2xl md:text-3xl font-bold",children:d?(0,a.jsx)("div",{className:"h-8 w-16 bg-muted animate-pulse rounded"}):(s=e.key,r?"roles"===s?Object.values(r.by_role).filter(e=>e>0).length:r[s]:0)})}),(0,a.jsx)("div",{className:`absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r ${e.gradient}`})]})},e.key)})}),(0,a.jsx)(t.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,a.jsx)(u.Card,{children:(0,a.jsx)(u.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(o.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(g.Input,{placeholder:"Cari nama atau email...",className:"pl-10",value:w.search,onChange:e=>O("search",e.target.value)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(h.Filter,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsxs)(j.Select,{value:w.role,onValueChange:e=>O("role",e),children:[(0,a.jsx)(j.SelectTrigger,{className:"w-[160px]",children:(0,a.jsx)(j.SelectValue,{placeholder:"Semua Role"})}),(0,a.jsxs)(j.SelectContent,{children:[(0,a.jsx)(j.SelectItem,{value:"all",children:"Semua Role"}),Object.entries(_.ROLE_LABELS).map(([e,s])=>(0,a.jsx)(j.SelectItem,{value:e,children:s},e))]})]})]}),(0,a.jsxs)(j.Select,{value:w.status,onValueChange:e=>O("status",e),children:[(0,a.jsx)(j.SelectTrigger,{className:"w-[140px]",children:(0,a.jsx)(j.SelectValue,{placeholder:"Semua Status"})}),(0,a.jsxs)(j.SelectContent,{children:[(0,a.jsx)(j.SelectItem,{value:"all",children:"Semua Status"}),(0,a.jsx)(j.SelectItem,{value:"active",children:"Aktif"}),(0,a.jsx)(j.SelectItem,{value:"inactive",children:"Nonaktif"})]})]})]})})})}),(0,a.jsx)(t.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:(0,a.jsx)(z,{users:e,isLoading:d,currentPage:f,totalPages:y,onPageChange:e=>{C(a=>({...a,page:e}))},onView:e=>{R(e),D(!0)},onEdit:e=>{R(e),P(!0)},onDelete:e=>{R(e),B(!0)},onToggleStatus:U,onAssignDepartments:e=>{R(e),E(!0)}})}),(0,a.jsx)(Z,{open:S,onOpenChange:P,user:I,onSuccess:$}),(0,a.jsx)(ei,{open:T,onOpenChange:D,user:I,onEdit:()=>{D(!1),P(!0)},onToggleStatus:()=>{I&&U(I)}}),(0,a.jsx)(er,{open:A,onOpenChange:B,user:I,onConfirm:V}),(0,a.jsx)(eo,{open:L,onOpenChange:E,user:I,onSuccess:q})]})}e.s(["default",()=>ex],98134)}]);