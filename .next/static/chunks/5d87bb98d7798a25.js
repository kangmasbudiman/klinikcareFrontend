(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,79529,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(46932),n=e.i(8402),i=e.i(16715),l=e.i(3116),r=e.i(69638),c=e.i(61911),d=e.i(17835),o=e.i(7486),m=e.i(43432),u=e.i(19455),x=e.i(15288),h=e.i(67489),p=e.i(87486),g=e.i(77572),j=e.i(31278),f=e.i(76639),N=e.i(10204),y=e.i(3497),v=e.i(90893),b=e.i(46696);function w({open:e,onOpenChange:i,onSuccess:l}){let[c,d]=(0,s.useState)([]),[m,x]=(0,s.useState)(""),[p,g]=(0,s.useState)(!1),[w,k]=(0,s.useState)(!1),[C,T]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{if(e){k(!0);try{let e=await v.default.getActiveDepartments();d(e.data)}catch(e){console.error("Error fetching departments:",e)}finally{k(!1)}}})()},[e]),(0,s.useEffect)(()=>{e||(x(""),T(null))},[e]);let P=async()=>{if(m){g(!0);try{let e=await y.default.takeQueue({department_id:parseInt(m)});T(e.data)}catch(e){console.error("Error taking queue:",e),b.toast.error("Gagal mengambil nomor antrian",{description:e.response?.data?.message||"Terjadi kesalahan"})}finally{g(!1)}}},S=()=>{C&&l(C),i(!1)};return(0,a.jsx)(f.Dialog,{open:e,onOpenChange:S,children:(0,a.jsxs)(f.DialogContent,{className:"sm:max-w-[450px]",children:[(0,a.jsxs)(f.DialogHeader,{children:[(0,a.jsxs)(f.DialogTitle,{className:"text-xl flex items-center gap-2",children:[(0,a.jsx)(n.Ticket,{className:"h-5 w-5"}),C?"Nomor Antrian":"Ambil Antrian"]}),(0,a.jsx)(f.DialogDescription,{children:C?"Nomor antrian berhasil diambil":"Pilih poli/departemen tujuan untuk mengambil nomor antrian"})]}),C?(0,a.jsxs)(t.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"py-8 text-center",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-green-100 dark:bg-green-950 mb-4",children:(0,a.jsx)(r.CheckCircle,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Nomor Antrian Anda"}),(0,a.jsx)("div",{className:"text-6xl font-bold text-primary",children:C.queue_code})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-muted/50",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Poli Tujuan"}),(0,a.jsx)("p",{className:"font-medium",children:C.department?.name})]}),(0,a.jsx)("p",{className:"mt-4 text-sm text-muted-foreground",children:"Silakan tunggu sampai nomor antrian Anda dipanggil"})]}):(0,a.jsxs)("div",{className:"py-4 space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(N.Label,{children:["Pilih Poli/Departemen"," ",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(o.Building2,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground z-10"}),(0,a.jsxs)(h.Select,{value:m,onValueChange:x,disabled:w,children:[(0,a.jsx)(h.SelectTrigger,{className:"pl-10",children:(0,a.jsx)(h.SelectValue,{placeholder:w?"Memuat...":"Pilih poli tujuan"})}),(0,a.jsx)(h.SelectContent,{children:c.map(e=>(0,a.jsx)(h.SelectItem,{value:e.id.toString(),children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:`w-3 h-3 rounded-full ${v.default.getColorClass(e.color)}`}),(0,a.jsx)("span",{children:e.name}),(0,a.jsxs)("span",{className:"text-muted-foreground text-xs",children:["(",e.code,")"]})]})},e.id))})]})]})]}),(0,a.jsx)(t.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center justify-center py-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-20 h-20 rounded-2xl bg-primary/10 flex items-center justify-center mx-auto mb-3",children:(0,a.jsx)(n.Ticket,{className:"h-10 w-10 text-primary"})}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Klik tombol di bawah untuk mengambil nomor antrian"})]})})]}),(0,a.jsx)(f.DialogFooter,{children:C?(0,a.jsx)(u.Button,{onClick:S,className:"w-full",children:"Selesai"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.Button,{type:"button",variant:"outline",onClick:()=>i(!1),disabled:p,children:"Batal"}),(0,a.jsx)(u.Button,{onClick:P,disabled:!m||p,className:"min-w-[150px]",children:p?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Mengambil..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.Ticket,{className:"mr-2 h-4 w-4"}),"Ambil Antrian"]})})]})})]})})}var k=e.i(88653),C=e.i(55436),T=e.i(79002),P=e.i(43531),S=e.i(82373),_=e.i(93479),B=e.i(57428),D=e.i(29349),A=e.i(52170);function q({open:e,onOpenChange:n,queue:i,onSuccess:l,onRegisterPatient:r}){let[c,d]=(0,s.useState)(!1),[o,x]=(0,s.useState)("search"),[h,v]=(0,s.useState)("1"),[w,q]=(0,s.useState)(!0),[M,L]=(0,s.useState)(""),[E,I]=(0,s.useState)([]),[F,$]=(0,s.useState)(!1),[R,U]=(0,s.useState)(null);(0,s.useEffect)(()=>{e&&(x("search"),L(""),I([]),U(i?.patient||null),v("1"),q(!0))},[e,i]),(0,s.useEffect)(()=>{let e=setTimeout(async()=>{if(M.length<2)return void I([]);$(!0);try{let e=await D.default.searchPatients(M);I(e.data)}catch(e){console.error("Error searching patients:",e)}finally{$(!1)}},300);return()=>clearTimeout(e)},[M]);let z=async()=>{if(i){d(!0);try{await y.default.callQueue(i.id,{counter_number:parseInt(h)}),R&&R.id!==i.patient_id&&await y.default.assignPatient(i.id,R.id),w&&A.default.isSupported()&&A.default.announce({queueCode:i.queue_code,counterNumber:parseInt(h),departmentName:i.department?.name},2),b.toast.success("Antrian berhasil dipanggil",{description:`${i.queue_code} ke loket ${h}`}),l(),n(!1)}catch(e){console.error("Error calling queue:",e),b.toast.error("Gagal memanggil antrian",{description:e.response?.data?.message||"Terjadi kesalahan"})}finally{d(!1)}}};return i?(0,a.jsx)(f.Dialog,{open:e,onOpenChange:n,children:(0,a.jsxs)(f.DialogContent,{className:"sm:max-w-[550px] max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(f.DialogHeader,{children:[(0,a.jsxs)(f.DialogTitle,{className:"text-xl flex items-center gap-2",children:[(0,a.jsx)(m.Phone,{className:"h-5 w-5"}),"Panggil Antrian"]}),(0,a.jsx)(f.DialogDescription,{children:"Panggil antrian dan assign data pasien"})]}),(0,a.jsxs)("div",{className:"py-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg bg-primary/10",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Nomor Antrian"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-primary",children:i.queue_code})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Poli Tujuan"}),(0,a.jsx)("p",{className:"font-medium",children:i.department?.name})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(N.Label,{htmlFor:"counter",children:"Nomor Loket/Ruangan"}),(0,a.jsx)(_.Input,{id:"counter",type:"number",min:"1",value:h,onChange:e=>v(e.target.value),placeholder:"1"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(B.Checkbox,{id:"enableAudio",checked:w,onCheckedChange:e=>q(!0===e)}),(0,a.jsxs)("label",{htmlFor:"enableAudio",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 flex items-center gap-2",children:[(0,a.jsx)(S.Volume2,{className:"h-4 w-4"}),"Panggil dengan suara"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(N.Label,{children:"Data Pasien"}),(0,a.jsx)(k.AnimatePresence,{mode:"wait",children:R?(0,a.jsx)(t.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-4 rounded-lg border bg-green-50 dark:bg-green-950 border-green-200 dark:border-green-800",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-green-500 flex items-center justify-center text-white font-bold",children:(0,a.jsx)(P.Check,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:R.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,a.jsx)("span",{children:R.medical_record_number}),(0,a.jsx)(p.Badge,{className:D.default.getPatientTypeColorClass(R.patient_type),children:R.patient_type_label})]})]})]}),(0,a.jsx)(u.Button,{variant:"ghost",size:"sm",onClick:()=>U(null),children:"Ganti"})]})},"selected"):(0,a.jsx)(t.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:(0,a.jsxs)(g.Tabs,{value:o,onValueChange:x,children:[(0,a.jsxs)(g.TabsList,{className:"grid w-full grid-cols-2",children:[(0,a.jsx)(g.TabsTrigger,{value:"search",children:"Cari Pasien"}),(0,a.jsx)(g.TabsTrigger,{value:"new",children:"Pasien Baru"})]}),(0,a.jsxs)(g.TabsContent,{value:"search",className:"mt-4 space-y-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(C.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(_.Input,{placeholder:"Cari nama, NIK, No. RM, atau No. BPJS...",className:"pl-10",value:M,onChange:e=>L(e.target.value)})]}),(0,a.jsxs)("div",{className:"max-h-[200px] overflow-y-auto space-y-2",children:[F&&(0,a.jsx)("div",{className:"flex items-center justify-center py-4",children:(0,a.jsx)(j.Loader2,{className:"h-5 w-5 animate-spin text-muted-foreground"})}),!F&&0===E.length&&M.length>=2&&(0,a.jsx)("p",{className:"text-center py-4 text-sm text-muted-foreground",children:"Tidak ditemukan pasien dengan kata kunci tersebut"}),E.map(e=>(0,a.jsx)(t.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"p-3 rounded-lg border hover:bg-muted/50 cursor-pointer transition-colors",onClick:()=>{U(e),L(""),I([])},children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold ${"male"===e.gender?"bg-blue-500":"bg-pink-500"}`,children:e.name.charAt(0)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"font-medium truncate",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,a.jsx)("span",{children:e.medical_record_number}),e.nik&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"|"}),(0,a.jsxs)("span",{children:["NIK: ",e.nik]})]})]})]}),(0,a.jsx)(p.Badge,{className:D.default.getPatientTypeColorClass(e.patient_type),children:e.patient_type_label})]})},e.id))]})]}),(0,a.jsx)(g.TabsContent,{value:"new",className:"mt-4",children:(0,a.jsxs)("div",{className:"text-center py-6",children:[(0,a.jsx)(T.UserPlus,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-3"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Pasien belum terdaftar? Daftarkan pasien baru terlebih dahulu."}),(0,a.jsxs)(u.Button,{variant:"outline",onClick:()=>{n(!1),r()},children:[(0,a.jsx)(T.UserPlus,{className:"mr-2 h-4 w-4"}),"Daftarkan Pasien Baru"]})]})})]})},"search")})]}),(0,a.jsx)("div",{className:"p-3 rounded-lg bg-blue-50 dark:bg-blue-950 text-sm text-blue-700 dark:text-blue-300",children:(0,a.jsx)("p",{children:"Anda dapat memanggil antrian tanpa data pasien. Data pasien dapat ditambahkan saat pasien datang ke loket."})})]}),(0,a.jsxs)(f.DialogFooter,{className:"gap-2 sm:gap-0",children:[(0,a.jsx)(u.Button,{type:"button",variant:"outline",onClick:()=>n(!1),disabled:c,children:"Batal"}),(0,a.jsx)(u.Button,{onClick:z,disabled:c,className:"min-w-[150px]",children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Memanggil..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.Phone,{className:"mr-2 h-4 w-4"}),"Panggil Antrian"]})})]})]})}):null}var M=e.i(18566),L=e.i(75254);let E=(0,L.default)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);function I({open:e,onOpenChange:n,queue:i,onSuccess:l,onRegisterPatient:r}){let c=(0,M.useRouter)(),[d,o]=(0,s.useState)(!1),[m,x]=(0,s.useState)("search"),[h,v]=(0,s.useState)(""),[w,S]=(0,s.useState)([]),[B,A]=(0,s.useState)(!1),[q,L]=(0,s.useState)(null);(0,s.useEffect)(()=>{e&&(x("search"),v(""),S([]),L(i?.patient||null))},[e,i]),(0,s.useEffect)(()=>{let e=setTimeout(async()=>{if(h.length<2)return void S([]);A(!0);try{let e=await D.default.searchPatients(h);S(e.data)}catch(e){console.error("Error searching patients:",e)}finally{A(!1)}},300);return()=>clearTimeout(e)},[h]);let I=async()=>{if(i){o(!0);try{q&&q.id!==i.patient_id&&await y.default.assignPatient(i.id,q.id),await y.default.startQueue(i.id),b.toast.success("Layanan dimulai",{description:`Antrian ${i.queue_code} sedang dilayani. Mengarahkan ke halaman pemeriksaan...`}),l(),n(!1),c.push("/examination")}catch(e){console.error("Error starting service:",e),b.toast.error("Gagal memulai layanan",{description:e.response?.data?.message||"Terjadi kesalahan"})}finally{o(!1)}}};return i?(0,a.jsx)(f.Dialog,{open:e,onOpenChange:n,children:(0,a.jsxs)(f.DialogContent,{className:"sm:max-w-[550px] max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(f.DialogHeader,{children:[(0,a.jsxs)(f.DialogTitle,{className:"text-xl flex items-center gap-2",children:[(0,a.jsx)(E,{className:"h-5 w-5"}),"Mulai Melayani"]}),(0,a.jsx)(f.DialogDescription,{children:"Mulai melayani antrian dan assign data pasien"})]}),(0,a.jsxs)("div",{className:"py-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg bg-purple-500/10",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Nomor Antrian"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:i.queue_code})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Poli Tujuan"}),(0,a.jsx)("p",{className:"font-medium",children:i.department?.name}),i.counter_number&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Loket ",i.counter_number]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(N.Label,{children:"Data Pasien"}),(0,a.jsx)(k.AnimatePresence,{mode:"wait",children:q?(0,a.jsx)(t.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-4 rounded-lg border bg-green-50 dark:bg-green-950 border-green-200 dark:border-green-800",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-green-500 flex items-center justify-center text-white font-bold",children:(0,a.jsx)(P.Check,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:q.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,a.jsx)("span",{children:q.medical_record_number}),(0,a.jsx)(p.Badge,{className:D.default.getPatientTypeColorClass(q.patient_type),children:q.patient_type_label})]})]})]}),(0,a.jsx)(u.Button,{variant:"ghost",size:"sm",onClick:()=>L(null),children:"Ganti"})]})},"selected"):(0,a.jsx)(t.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:(0,a.jsxs)(g.Tabs,{value:m,onValueChange:x,children:[(0,a.jsxs)(g.TabsList,{className:"grid w-full grid-cols-2",children:[(0,a.jsx)(g.TabsTrigger,{value:"search",children:"Cari Pasien"}),(0,a.jsx)(g.TabsTrigger,{value:"new",children:"Pasien Baru"})]}),(0,a.jsxs)(g.TabsContent,{value:"search",className:"mt-4 space-y-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(C.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(_.Input,{placeholder:"Cari nama, NIK, No. RM, atau No. BPJS...",className:"pl-10",value:h,onChange:e=>v(e.target.value)})]}),(0,a.jsxs)("div",{className:"max-h-[200px] overflow-y-auto space-y-2",children:[B&&(0,a.jsx)("div",{className:"flex items-center justify-center py-4",children:(0,a.jsx)(j.Loader2,{className:"h-5 w-5 animate-spin text-muted-foreground"})}),!B&&0===w.length&&h.length>=2&&(0,a.jsx)("p",{className:"text-center py-4 text-sm text-muted-foreground",children:"Tidak ditemukan pasien dengan kata kunci tersebut"}),w.map(e=>(0,a.jsx)(t.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"p-3 rounded-lg border hover:bg-muted/50 cursor-pointer transition-colors",onClick:()=>{L(e),v(""),S([])},children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold ${"male"===e.gender?"bg-blue-500":"bg-pink-500"}`,children:e.name.charAt(0)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"font-medium truncate",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,a.jsx)("span",{children:e.medical_record_number}),e.nik&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"|"}),(0,a.jsxs)("span",{children:["NIK: ",e.nik]})]})]})]}),(0,a.jsx)(p.Badge,{className:D.default.getPatientTypeColorClass(e.patient_type),children:e.patient_type_label})]})},e.id))]})]}),(0,a.jsx)(g.TabsContent,{value:"new",className:"mt-4",children:(0,a.jsxs)("div",{className:"text-center py-6",children:[(0,a.jsx)(T.UserPlus,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-3"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Pasien belum terdaftar? Daftarkan pasien baru terlebih dahulu."}),(0,a.jsxs)(u.Button,{variant:"outline",onClick:()=>{n(!1),r()},children:[(0,a.jsx)(T.UserPlus,{className:"mr-2 h-4 w-4"}),"Daftarkan Pasien Baru"]})]})})]})},"search")})]}),(0,a.jsx)("div",{className:"p-3 rounded-lg bg-purple-50 dark:bg-purple-950 text-sm text-purple-700 dark:text-purple-300",children:(0,a.jsx)("p",{children:"Anda dapat memulai layanan tanpa data pasien. Data pasien dapat ditambahkan kemudian jika diperlukan."})})]}),(0,a.jsxs)(f.DialogFooter,{className:"gap-2 sm:gap-0",children:[(0,a.jsx)(u.Button,{type:"button",variant:"outline",onClick:()=>n(!1),disabled:d,children:"Batal"}),(0,a.jsx)(u.Button,{onClick:I,disabled:d,className:"min-w-[150px]",children:d?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Memproses..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(E,{className:"mr-2 h-4 w-4"}),"Mulai Melayani"]})})]})]})}):null}function F({open:e,onOpenChange:n,queue:i,onSuccess:l,onRegisterPatient:r}){let[c,d]=(0,s.useState)(!1),[o,m]=(0,s.useState)("search"),[x,h]=(0,s.useState)(""),[v,w]=(0,s.useState)([]),[S,B]=(0,s.useState)(!1),[A,q]=(0,s.useState)(null);(0,s.useEffect)(()=>{e&&(m("search"),h(""),w([]),q(i?.patient||null))},[e,i]),(0,s.useEffect)(()=>{let e=setTimeout(async()=>{if(x.length<2)return void w([]);B(!0);try{let e=await D.default.searchPatients(x);w(e.data)}catch(e){console.error("Error searching patients:",e)}finally{B(!1)}},300);return()=>clearTimeout(e)},[x]);let M=async()=>{if(!i||!A)return void b.toast.error("Pilih pasien terlebih dahulu");if(A.id===i.patient_id){b.toast.info("Pasien sudah terdaftar pada antrian ini"),n(!1);return}d(!0);try{await y.default.assignPatient(i.id,A.id),b.toast.success("Pasien berhasil di-assign",{description:`${A.name} ditambahkan ke antrian ${i.queue_code}`}),l(),n(!1)}catch(e){console.error("Error assigning patient:",e),b.toast.error("Gagal assign pasien",{description:e.response?.data?.message||"Terjadi kesalahan"})}finally{d(!1)}};return i?(0,a.jsx)(f.Dialog,{open:e,onOpenChange:n,children:(0,a.jsxs)(f.DialogContent,{className:"sm:max-w-[550px] max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(f.DialogHeader,{children:[(0,a.jsxs)(f.DialogTitle,{className:"text-xl flex items-center gap-2",children:[(0,a.jsx)(T.UserPlus,{className:"h-5 w-5"}),"Assign Pasien"]}),(0,a.jsx)(f.DialogDescription,{children:"Cari dan assign data pasien ke antrian"})]}),(0,a.jsxs)("div",{className:"py-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg bg-blue-500/10",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Nomor Antrian"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:i.queue_code})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Poli Tujuan"}),(0,a.jsx)("p",{className:"font-medium",children:i.department?.name}),(0,a.jsx)(p.Badge,{className:y.default.getStatusColorClass(i.status),children:i.status_label})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(N.Label,{children:"Data Pasien"}),(0,a.jsx)(k.AnimatePresence,{mode:"wait",children:A?(0,a.jsx)(t.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-4 rounded-lg border bg-green-50 dark:bg-green-950 border-green-200 dark:border-green-800",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-green-500 flex items-center justify-center text-white font-bold",children:(0,a.jsx)(P.Check,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:A.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,a.jsx)("span",{children:A.medical_record_number}),(0,a.jsx)(p.Badge,{className:D.default.getPatientTypeColorClass(A.patient_type),children:A.patient_type_label})]})]})]}),(0,a.jsx)(u.Button,{variant:"ghost",size:"sm",onClick:()=>q(null),children:"Ganti"})]})},"selected"):(0,a.jsx)(t.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:(0,a.jsxs)(g.Tabs,{value:o,onValueChange:m,children:[(0,a.jsxs)(g.TabsList,{className:"grid w-full grid-cols-2",children:[(0,a.jsx)(g.TabsTrigger,{value:"search",children:"Cari Pasien"}),(0,a.jsx)(g.TabsTrigger,{value:"new",children:"Pasien Baru"})]}),(0,a.jsxs)(g.TabsContent,{value:"search",className:"mt-4 space-y-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(C.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(_.Input,{placeholder:"Cari nama, NIK, No. RM, atau No. BPJS...",className:"pl-10",value:x,onChange:e=>h(e.target.value)})]}),(0,a.jsxs)("div",{className:"max-h-[250px] overflow-y-auto space-y-2",children:[S&&(0,a.jsx)("div",{className:"flex items-center justify-center py-4",children:(0,a.jsx)(j.Loader2,{className:"h-5 w-5 animate-spin text-muted-foreground"})}),!S&&0===v.length&&x.length>=2&&(0,a.jsx)("p",{className:"text-center py-4 text-sm text-muted-foreground",children:"Tidak ditemukan pasien dengan kata kunci tersebut"}),v.map(e=>(0,a.jsx)(t.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"p-3 rounded-lg border hover:bg-muted/50 cursor-pointer transition-colors",onClick:()=>{q(e),h(""),w([])},children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold ${"male"===e.gender?"bg-blue-500":"bg-pink-500"}`,children:e.name.charAt(0)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"font-medium truncate",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,a.jsx)("span",{children:e.medical_record_number}),e.nik&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"|"}),(0,a.jsxs)("span",{children:["NIK: ",e.nik]})]})]})]}),(0,a.jsx)(p.Badge,{className:D.default.getPatientTypeColorClass(e.patient_type),children:e.patient_type_label})]})},e.id))]})]}),(0,a.jsx)(g.TabsContent,{value:"new",className:"mt-4",children:(0,a.jsxs)("div",{className:"text-center py-6",children:[(0,a.jsx)(T.UserPlus,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-3"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Pasien belum terdaftar? Daftarkan pasien baru terlebih dahulu."}),(0,a.jsxs)(u.Button,{variant:"outline",onClick:()=>{n(!1),r()},children:[(0,a.jsx)(T.UserPlus,{className:"mr-2 h-4 w-4"}),"Daftarkan Pasien Baru"]})]})})]})},"search")})]})]}),(0,a.jsxs)(f.DialogFooter,{className:"gap-2 sm:gap-0",children:[(0,a.jsx)(u.Button,{type:"button",variant:"outline",onClick:()=>n(!1),disabled:c,children:"Batal"}),(0,a.jsx)(u.Button,{onClick:M,disabled:c||!A,className:"min-w-[150px]",children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Menyimpan..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.UserPlus,{className:"mr-2 h-4 w-4"}),"Assign Pasien"]})})]})]})}):null}let $=(0,L.default)("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);var R=e.i(73884),U=e.i(84614),z=e.i(55146);function G({queue:e,onCall:s,onRecall:n,onStart:i,onComplete:c,onSkip:d,onCancel:o,onAssignPatient:x,showActions:h=!0}){return(0,a.jsxs)(t.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`p-4 rounded-lg border ${"called"===e.status||"in_service"===e.status?"border-primary bg-primary/5":"bg-card"}`,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center text-white font-bold text-lg ${y.default.getStatusSolidColorClass(e.status)}`,children:e.queue_code.split("-")[1]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-semibold text-lg",children:e.queue_code}),(0,a.jsx)(p.Badge,{className:y.default.getStatusColorClass(e.status),children:e.status_label})]}),e.patient?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mt-1",children:[(0,a.jsx)(U.User,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:e.patient.name}),(0,a.jsx)(p.Badge,{variant:"outline",className:D.default.getPatientTypeColorClass(e.patient.patient_type),children:e.patient.patient_type_label})]}):(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Pasien belum terdaftar"}),null!==e.wait_time&&"waiting"===e.status&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[(0,a.jsx)(l.Clock,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:["Menunggu ",y.default.formatWaitTime(e.wait_time)]})]})]})]}),h&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(()=>{switch(e.status){case"waiting":return(0,a.jsxs)(u.Button,{size:"sm",onClick:s,children:[(0,a.jsx)(m.Phone,{className:"mr-1 h-3 w-3"}),"Panggil"]});case"called":return(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsxs)(u.Button,{size:"sm",onClick:i,children:[(0,a.jsx)(E,{className:"mr-1 h-3 w-3"}),"Mulai Layani"]}),n&&(0,a.jsx)(u.Button,{size:"sm",variant:"outline",onClick:n,title:"Panggil Ulang",children:(0,a.jsx)(S.Volume2,{className:"h-3 w-3"})})]});case"in_service":return(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsxs)(u.Button,{size:"sm",onClick:c,className:"bg-green-600 hover:bg-green-700 text-white",children:[(0,a.jsx)(r.CheckCircle,{className:"mr-1 h-3 w-3"}),"Selesai"]}),n&&(0,a.jsx)(u.Button,{size:"sm",variant:"outline",onClick:n,title:"Panggil Ulang",children:(0,a.jsx)(S.Volume2,{className:"h-3 w-3"})})]});default:return null}})(),("waiting"===e.status||"called"===e.status||"in_service"===e.status)&&(0,a.jsxs)(z.DropdownMenu,{children:[(0,a.jsx)(z.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsx)(u.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"1"}),(0,a.jsx)("circle",{cx:"12",cy:"5",r:"1"}),(0,a.jsx)("circle",{cx:"12",cy:"19",r:"1"})]})})}),(0,a.jsxs)(z.DropdownMenuContent,{align:"end",children:[x&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(z.DropdownMenuItem,{onClick:x,children:[(0,a.jsx)(T.UserPlus,{className:"mr-2 h-4 w-4"}),e.patient?"Ganti Pasien":"Assign Pasien"]}),(0,a.jsx)(z.DropdownMenuSeparator,{})]}),("waiting"===e.status||"called"===e.status)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(z.DropdownMenuItem,{onClick:d,children:[(0,a.jsx)($,{className:"mr-2 h-4 w-4"}),"Lewati"]}),(0,a.jsx)(z.DropdownMenuSeparator,{}),(0,a.jsxs)(z.DropdownMenuItem,{onClick:o,className:"text-destructive focus:text-destructive",children:[(0,a.jsx)(R.XCircle,{className:"mr-2 h-4 w-4"}),"Batalkan"]})]})]})]})]})]}),e.counter_number&&("called"===e.status||"in_service"===e.status)&&(0,a.jsxs)("div",{className:"mt-3 pt-3 border-t text-sm text-muted-foreground",children:["Loket/Ruangan:"," ",(0,a.jsx)("span",{className:"font-medium",children:e.counter_number})]})]})}e.i(66655);var O=e.i(55584);function V(){let[e,j]=(0,s.useState)({waiting:[],called:[],in_service:[],completed:[],skipped:[],cancelled:[]}),[f,N]=(0,s.useState)(null),[k,C]=(0,s.useState)([]),[T,P]=(0,s.useState)("all"),[S,_]=(0,s.useState)(!0),[B,D]=(0,s.useState)(!1),[M,L]=(0,s.useState)(!1),[E,$]=(0,s.useState)(!1),[R,U]=(0,s.useState)(!1),[z,V]=(0,s.useState)(!1),[K,H]=(0,s.useState)(!1),[Q,W]=(0,s.useState)(null),J=(0,s.useCallback)(async()=>{try{let e="all"!==T?parseInt(T):void 0,a=await y.default.getTodayQueues(e);j(a.data)}catch(e){console.error("Error fetching queues:",e)}},[T]),X=(0,s.useCallback)(async()=>{try{let e="all"!==T?parseInt(T):void 0,a=await y.default.getQueueStats(void 0,e);N(a.data)}catch(e){console.error("Error fetching stats:",e)}},[T]),Y=(0,s.useCallback)(async()=>{try{let e=await v.default.getActiveDepartments();C(e.data)}catch(e){console.error("Error fetching departments:",e)}},[]);(0,s.useEffect)(()=>{(async()=>{_(!0),await Promise.all([J(),X(),Y()]),_(!1)})()},[J,X,Y]),(0,s.useEffect)(()=>{let e=setInterval(()=>{J(),X()},1e4);return()=>clearInterval(e)},[J,X]);let Z=async()=>{D(!0),await Promise.all([J(),X()]),D(!1)},ee=e=>{W(e),V(!0)},ea=async e=>{try{await y.default.completeQueue(e.id),b.toast.success("Layanan selesai",{description:`Antrian ${e.queue_code} telah selesai dilayani`}),Z()}catch(e){console.error("Error completing service:",e),b.toast.error("Gagal menyelesaikan layanan",{description:e.response?.data?.message||"Terjadi kesalahan"})}},es=async e=>{try{await y.default.skipQueue(e.id,"Pasien tidak hadir"),b.toast.info("Antrian dilewati",{description:`${e.queue_code} telah dilewati`}),Z()}catch(e){console.error("Error skipping queue:",e),b.toast.error("Gagal melewati antrian",{description:e.response?.data?.message||"Terjadi kesalahan"})}},et=async e=>{if(confirm("Apakah Anda yakin ingin membatalkan antrian ini?"))try{await y.default.cancelQueue(e.id,"Dibatalkan oleh petugas"),b.toast.warning("Antrian dibatalkan",{description:`${e.queue_code} telah dibatalkan`}),Z()}catch(e){console.error("Error cancelling queue:",e),b.toast.error("Gagal membatalkan antrian",{description:e.response?.data?.message||"Terjadi kesalahan"})}},en=[{title:"Total Antrian",value:f?.total||0,icon:n.Ticket,color:"blue"},{title:"Menunggu",value:f?.waiting||0,icon:l.Clock,color:"yellow"},{title:"Sedang Dilayani",value:(f?.called||0)+(f?.in_service||0),icon:c.Users,color:"purple"},{title:"Selesai",value:f?.completed||0,icon:r.CheckCircle,color:"green"}],ei={hidden:{opacity:0,y:20},show:{opacity:1,y:0}},el=[...e.called,...e.in_service];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(t.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Manajemen Antrian"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Kelola antrian pasien hari ini"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(h.Select,{value:T,onValueChange:P,children:[(0,a.jsxs)(h.SelectTrigger,{className:"w-[200px]",children:[(0,a.jsx)(o.Building2,{className:"mr-2 h-4 w-4"}),(0,a.jsx)(h.SelectValue,{placeholder:"Semua Poli"})]}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"all",children:"Semua Poli"}),k.map(e=>(0,a.jsx)(h.SelectItem,{value:e.id.toString(),children:e.name},e.id))]})]}),(0,a.jsx)(u.Button,{variant:"outline",size:"icon",onClick:Z,disabled:B,children:(0,a.jsx)(i.RefreshCw,{className:`h-4 w-4 ${B?"animate-spin":""}`})}),(0,a.jsxs)(u.Button,{onClick:()=>L(!0),children:[(0,a.jsx)(n.Ticket,{className:"mr-2 h-4 w-4"}),"Ambil Antrian"]})]})]}),(0,a.jsx)(t.motion.div,{variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"show",className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:en.map(e=>(0,a.jsx)(t.motion.div,{variants:ei,children:(0,a.jsx)(x.Card,{children:(0,a.jsx)(x.CardContent,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:e.title}),(0,a.jsx)("p",{className:"text-3xl font-bold mt-2",children:S?"-":e.value})]}),(0,a.jsx)("div",{className:`p-3 rounded-xl bg-${e.color}-100 dark:bg-${e.color}-950`,children:(0,a.jsx)(e.icon,{className:`h-6 w-6 text-${e.color}-600 dark:text-${e.color}-400`})})]})})})},e.title))}),f&&(f.avg_wait_time>0||f.avg_service_time>0)&&(0,a.jsxs)(t.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center gap-6 text-sm text-muted-foreground",children:[f.avg_wait_time>0&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.Timer,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["Rata-rata tunggu:"," ",y.default.formatWaitTime(f.avg_wait_time)]})]}),f.avg_service_time>0&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.Clock,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["Rata-rata layanan:"," ",y.default.formatWaitTime(f.avg_service_time)]})]})]}),(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,a.jsx)(t.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},children:(0,a.jsxs)(x.Card,{children:[(0,a.jsx)(x.CardHeader,{className:"pb-3",children:(0,a.jsxs)(x.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-950",children:(0,a.jsx)(m.Phone,{className:"h-4 w-4 text-purple-600 dark:text-purple-400"})}),"Sedang Dilayani",el.length>0&&(0,a.jsx)(p.Badge,{variant:"secondary",children:el.length})]})}),(0,a.jsx)(x.CardContent,{className:"space-y-3",children:0===el.length?(0,a.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,a.jsx)(c.Users,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),(0,a.jsx)("p",{children:"Belum ada antrian yang sedang dilayani"})]}):el.map(e=>(0,a.jsx)(G,{queue:e,onRecall:()=>{A.default.isSupported()&&A.default.announce({queueCode:e.queue_code,counterNumber:e.counter_number,departmentName:e.department?.name},2)},onStart:()=>{W(e),U(!0)},onComplete:()=>ea(e),onSkip:()=>es(e),onCancel:()=>et(e),onAssignPatient:()=>ee(e)},e.id))})]})}),(0,a.jsx)(t.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},children:(0,a.jsxs)(x.Card,{children:[(0,a.jsx)(x.CardHeader,{className:"pb-3",children:(0,a.jsxs)(x.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg bg-yellow-100 dark:bg-yellow-950",children:(0,a.jsx)(l.Clock,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400"})}),"Antrian Menunggu",e.waiting.length>0&&(0,a.jsx)(p.Badge,{variant:"secondary",children:e.waiting.length})]})}),(0,a.jsx)(x.CardContent,{className:"space-y-3 max-h-[500px] overflow-y-auto",children:0===e.waiting.length?(0,a.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,a.jsx)(n.Ticket,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),(0,a.jsx)("p",{children:"Tidak ada antrian menunggu"})]}):e.waiting.map(e=>(0,a.jsx)(G,{queue:e,onCall:()=>{W(e),$(!0)},onSkip:()=>es(e),onCancel:()=>et(e),onAssignPatient:()=>ee(e)},e.id))})]})})]}),(0,a.jsx)(t.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:(0,a.jsxs)(x.Card,{children:[(0,a.jsx)(x.CardHeader,{className:"pb-3",children:(0,a.jsx)(x.CardTitle,{children:"Riwayat Hari Ini"})}),(0,a.jsx)(x.CardContent,{children:(0,a.jsxs)(g.Tabs,{defaultValue:"completed",children:[(0,a.jsxs)(g.TabsList,{children:[(0,a.jsxs)(g.TabsTrigger,{value:"completed",children:["Selesai (",e.completed.length,")"]}),(0,a.jsxs)(g.TabsTrigger,{value:"skipped",children:["Dilewati (",e.skipped.length,")"]}),(0,a.jsxs)(g.TabsTrigger,{value:"cancelled",children:["Dibatalkan (",e.cancelled.length,")"]})]}),(0,a.jsx)(g.TabsContent,{value:"completed",className:"mt-4 space-y-2",children:0===e.completed.length?(0,a.jsx)("p",{className:"text-center py-4 text-muted-foreground",children:"Belum ada antrian selesai"}):(0,a.jsx)("div",{className:"grid gap-2 sm:grid-cols-2 lg:grid-cols-3",children:e.completed.slice(0,12).map(e=>(0,a.jsxs)("div",{className:"p-3 rounded-lg border bg-green-50 dark:bg-green-950/50",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"font-medium",children:e.queue_code}),(0,a.jsx)(p.Badge,{variant:"success",children:"Selesai"})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.patient?.name||"Tidak ada data pasien"})]},e.id))})}),(0,a.jsx)(g.TabsContent,{value:"skipped",className:"mt-4 space-y-2",children:0===e.skipped.length?(0,a.jsx)("p",{className:"text-center py-4 text-muted-foreground",children:"Tidak ada antrian dilewati"}):(0,a.jsx)("div",{className:"grid gap-2 sm:grid-cols-2 lg:grid-cols-3",children:e.skipped.map(e=>(0,a.jsxs)("div",{className:"p-3 rounded-lg border bg-orange-50 dark:bg-orange-950/50",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"font-medium",children:e.queue_code}),(0,a.jsx)(p.Badge,{variant:"warning",children:"Dilewati"})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.notes||"Pasien tidak hadir"})]},e.id))})}),(0,a.jsx)(g.TabsContent,{value:"cancelled",className:"mt-4 space-y-2",children:0===e.cancelled.length?(0,a.jsx)("p",{className:"text-center py-4 text-muted-foreground",children:"Tidak ada antrian dibatalkan"}):(0,a.jsx)("div",{className:"grid gap-2 sm:grid-cols-2 lg:grid-cols-3",children:e.cancelled.map(e=>(0,a.jsxs)("div",{className:"p-3 rounded-lg border bg-red-50 dark:bg-red-950/50",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"font-medium",children:e.queue_code}),(0,a.jsx)(p.Badge,{variant:"error",children:"Dibatalkan"})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.notes||"Dibatalkan"})]},e.id))})})]})})]})}),(0,a.jsx)(w,{open:M,onOpenChange:L,onSuccess:()=>Z()}),(0,a.jsx)(q,{open:E,onOpenChange:$,queue:Q,onSuccess:()=>Z(),onRegisterPatient:()=>H(!0)}),(0,a.jsx)(I,{open:R,onOpenChange:U,queue:Q,onSuccess:()=>Z(),onRegisterPatient:()=>H(!0)}),(0,a.jsx)(F,{open:z,onOpenChange:V,queue:Q,onSuccess:()=>Z(),onRegisterPatient:()=>H(!0)}),(0,a.jsx)(O.PatientModal,{open:K,onOpenChange:H,onSuccess:()=>{H(!1),Q&&(z?V(!0):"called"===Q.status?U(!0):$(!0))}})]})}e.s(["default",()=>V],79529)}]);