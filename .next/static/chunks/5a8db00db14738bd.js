(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,98726,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(46932),l=e.i(87316),i=e.i(7233),r=e.i(16715),n=e.i(3116),d=e.i(61911),c=e.i(20286),o=e.i(19455),m=e.i(15288),h=e.i(67489),u=e.i(87486),x=e.i(77572),p=e.i(88699),g=e.i(27612),j=e.i(41071),y=e.i(81203),v=e.i(84774),b=e.i(55146),f=e.i(68499),N=e.i(58512),w=e.i(46696),S=e.i(63816);let _={async getSchedules(e={}){let a=new URLSearchParams;return e.doctor_id&&a.append("doctor_id",e.doctor_id.toString()),e.department_id&&a.append("department_id",e.department_id.toString()),void 0!==e.day_of_week&&""!==e.day_of_week&&a.append("day_of_week",e.day_of_week.toString()),void 0!==e.is_active&&a.append("is_active",e.is_active?"1":"0"),e.page&&a.append("page",e.page.toString()),e.per_page&&a.append("per_page",e.per_page.toString()),e.all&&a.append("all","1"),(await S.default.get(`/api/schedules?${a.toString()}`)).data},getScheduleById:async e=>(await S.default.get(`/api/schedules/${e}`)).data,createSchedule:async e=>(await S.default.post("/api/schedules",e)).data,updateSchedule:async(e,a)=>(await S.default.put(`/api/schedules/${e}`,a)).data,deleteSchedule:async e=>(await S.default.delete(`/api/schedules/${e}`)).data,toggleScheduleStatus:async e=>(await S.default.patch(`/api/schedules/${e}/toggle-status`)).data,async getAvailableDoctors(e,a){let t=new URLSearchParams;return void 0!==e&&t.append("day",e.toString()),a&&t.append("department_id",a.toString()),(await S.default.get(`/api/schedules/available-doctors?${t.toString()}`)).data},getDoctorSchedule:async e=>(await S.default.get(`/api/doctors/${e}/schedules`)).data,getDayOptions:async()=>(await S.default.get("/api/schedules/day-options")).data,getDayLabel:e=>({0:"Minggu",1:"Senin",2:"Selasa",3:"Rabu",4:"Kamis",5:"Jumat",6:"Sabtu"})[e]||"",getCurrentDay:()=>new Date().getDay(),formatTime(e){if(!e)return"";let a=e.split(":");return`${a[0]}:${a[1]}`},getDayOptionsStatic:()=>[{value:1,label:"Senin"},{value:2,label:"Selasa"},{value:3,label:"Rabu"},{value:4,label:"Kamis"},{value:5,label:"Jumat"},{value:6,label:"Sabtu"},{value:0,label:"Minggu"}],getStatusColorClass:e=>e?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300",getTimeOptions(e=7,a=21,t=30){let s=[];for(let l=e;l<=a;l++)for(let e=0;e<60&&(l!==a||!(e>0));e+=t){let a=l.toString().padStart(2,"0"),t=e.toString().padStart(2,"0"),i=`${a}:${t}`;s.push({value:i,label:i})}return s}};function k({schedules:e,isLoading:i,currentPage:r,totalPages:c,onPageChange:m,onEdit:h,onRefresh:x}){let[S,k]=(0,t.useState)(!1),[C,T]=(0,t.useState)(null),[D,P]=(0,t.useState)(!1),A=async()=>{if(C){P(!0);try{await _.deleteSchedule(C.id),w.toast.success("Jadwal berhasil dihapus"),x()}catch(e){w.toast.error("Gagal menghapus jadwal")}finally{P(!1),k(!1),T(null)}}},H=async e=>{try{await _.toggleScheduleStatus(e.id),w.toast.success(e.is_active?"Jadwal dinonaktifkan":"Jadwal diaktifkan"),x()}catch(e){w.toast.error("Gagal mengubah status jadwal")}};return i?(0,a.jsx)("div",{className:"rounded-lg border bg-card",children:(0,a.jsxs)(v.Table,{children:[(0,a.jsx)(v.TableHeader,{children:(0,a.jsxs)(v.TableRow,{children:[(0,a.jsx)(v.TableHead,{children:"Dokter"}),(0,a.jsx)(v.TableHead,{children:"Poli"}),(0,a.jsx)(v.TableHead,{children:"Hari"}),(0,a.jsx)(v.TableHead,{children:"Jam"}),(0,a.jsx)(v.TableHead,{children:"Kuota"}),(0,a.jsx)(v.TableHead,{children:"Status"}),(0,a.jsx)(v.TableHead,{className:"w-[80px]",children:"Aksi"})]})}),(0,a.jsx)(v.TableBody,{children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsxs)(v.TableRow,{children:[(0,a.jsx)(v.TableCell,{children:(0,a.jsx)("div",{className:"h-4 w-32 bg-muted animate-pulse rounded"})}),(0,a.jsx)(v.TableCell,{children:(0,a.jsx)("div",{className:"h-4 w-24 bg-muted animate-pulse rounded"})}),(0,a.jsx)(v.TableCell,{children:(0,a.jsx)("div",{className:"h-4 w-16 bg-muted animate-pulse rounded"})}),(0,a.jsx)(v.TableCell,{children:(0,a.jsx)("div",{className:"h-4 w-24 bg-muted animate-pulse rounded"})}),(0,a.jsx)(v.TableCell,{children:(0,a.jsx)("div",{className:"h-4 w-12 bg-muted animate-pulse rounded"})}),(0,a.jsx)(v.TableCell,{children:(0,a.jsx)("div",{className:"h-6 w-16 bg-muted animate-pulse rounded"})}),(0,a.jsx)(v.TableCell,{children:(0,a.jsx)("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"})})]},t))})]})}):0===e.length?(0,a.jsxs)("div",{className:"rounded-lg border bg-card p-8 text-center",children:[(0,a.jsx)(l.Calendar,{className:"h-12 w-12 mx-auto text-muted-foreground/50"}),(0,a.jsx)("h3",{className:"mt-4 text-lg font-semibold",children:"Belum ada jadwal"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:'Klik tombol "Tambah Jadwal" untuk membuat jadwal praktek dokter.'})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"rounded-lg border bg-card",children:(0,a.jsxs)(v.Table,{children:[(0,a.jsx)(v.TableHeader,{children:(0,a.jsxs)(v.TableRow,{children:[(0,a.jsx)(v.TableHead,{children:"Dokter"}),(0,a.jsx)(v.TableHead,{children:"Poli"}),(0,a.jsx)(v.TableHead,{children:"Hari"}),(0,a.jsx)(v.TableHead,{children:"Jam"}),(0,a.jsx)(v.TableHead,{children:"Kuota"}),(0,a.jsx)(v.TableHead,{children:"Status"}),(0,a.jsx)(v.TableHead,{className:"w-[80px]",children:"Aksi"})]})}),(0,a.jsx)(v.TableBody,{children:e.map((e,t)=>(0,a.jsxs)(s.motion.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*t},className:"group hover:bg-muted/50",children:[(0,a.jsx)(v.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"h-9 w-9 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:e.doctor?.name?.charAt(0).toUpperCase()||"D"})}),(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"font-medium",children:e.doctor?.name||"-"})})]})}),(0,a.jsx)(v.TableCell,{children:(0,a.jsx)(u.Badge,{variant:"outline",className:`bg-${e.department?.color||"gray"}-100 text-${e.department?.color||"gray"}-800 dark:bg-${e.department?.color||"gray"}-900 dark:text-${e.department?.color||"gray"}-300 border-0`,children:e.department?.name||"-"})}),(0,a.jsx)(v.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.Calendar,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"font-medium",children:e.day_label})]})}),(0,a.jsx)(v.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n.Clock,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{children:e.time_range})]})}),(0,a.jsx)(v.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.Users,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsxs)("span",{children:[e.quota," pasien"]})]})}),(0,a.jsx)(v.TableCell,{children:(0,a.jsx)(u.Badge,{variant:e.is_active?"success":"secondary",children:e.is_active?"Aktif":"Nonaktif"})}),(0,a.jsx)(v.TableCell,{children:(0,a.jsxs)(b.DropdownMenu,{children:[(0,a.jsx)(b.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsx)(o.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,a.jsx)(j.MoreHorizontal,{className:"h-4 w-4"})})}),(0,a.jsxs)(b.DropdownMenuContent,{align:"end",children:[(0,a.jsxs)(b.DropdownMenuItem,{onClick:()=>h(e),children:[(0,a.jsx)(p.Pencil,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,a.jsxs)(b.DropdownMenuItem,{onClick:()=>H(e),children:[(0,a.jsx)(y.Power,{className:"mr-2 h-4 w-4"}),e.is_active?"Nonaktifkan":"Aktifkan"]}),(0,a.jsx)(b.DropdownMenuSeparator,{}),(0,a.jsxs)(b.DropdownMenuItem,{onClick:()=>{T(e),k(!0)},className:"text-destructive focus:text-destructive",children:[(0,a.jsx)(g.Trash2,{className:"mr-2 h-4 w-4"}),"Hapus"]})]})]})})]},e.id))})]})}),c>1&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Halaman ",r," dari ",c]}),(0,a.jsx)(N.Pagination,{currentPage:r,totalPages:c,onPageChange:m})]}),(0,a.jsx)(f.AlertDialog,{open:S,onOpenChange:k,children:(0,a.jsxs)(f.AlertDialogContent,{children:[(0,a.jsxs)(f.AlertDialogHeader,{children:[(0,a.jsx)(f.AlertDialogTitle,{children:"Hapus Jadwal?"}),(0,a.jsxs)(f.AlertDialogDescription,{children:["Anda yakin ingin menghapus jadwal"," ",(0,a.jsx)("strong",{children:C?.doctor?.name})," pada hari"," ",(0,a.jsx)("strong",{children:C?.day_label}),"? Tindakan ini tidak dapat dibatalkan."]})]}),(0,a.jsxs)(f.AlertDialogFooter,{children:[(0,a.jsx)(f.AlertDialogCancel,{disabled:D,children:"Batal"}),(0,a.jsx)(f.AlertDialogAction,{onClick:A,disabled:D,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:D?"Menghapus...":"Hapus"})]})]})})]})}var C=e.i(53145),T=e.i(94814),D=e.i(50270),P=e.i(88653),A=e.i(31278),H=e.i(63209),I=e.i(84614),J=e.i(7486),B=e.i(78583),$=e.i(76639),z=e.i(93479),V=e.i(10204),L=e.i(99375),M=e.i(82526),q=e.i(90893);let O=D.z.object({doctor_id:D.z.string().min(1,"Pilih dokter"),department_id:D.z.string().min(1,"Pilih poli"),day_of_week:D.z.string().min(1,"Pilih hari"),start_time:D.z.string().min(1,"Pilih jam mulai"),end_time:D.z.string().min(1,"Pilih jam selesai"),quota:D.z.coerce.number().min(1,"Minimal 1").max(100,"Maksimal 100"),is_active:D.z.boolean(),notes:D.z.string().optional()});function R({open:e,onOpenChange:i,schedule:r,onSuccess:c}){let[m,u]=(0,t.useState)(!1),[x,p]=(0,t.useState)([]),[g,j]=(0,t.useState)([]),[y,v]=(0,t.useState)(!0),b=!!r,{register:f,handleSubmit:N,setValue:S,watch:k,reset:D,control:R,formState:{errors:E}}=(0,C.useForm)({resolver:(0,T.zodResolver)(O),defaultValues:{doctor_id:"",department_id:"",day_of_week:"",start_time:"",end_time:"",quota:20,is_active:!0,notes:""}}),U=k("is_active");(0,t.useEffect)(()=>{let a=async()=>{v(!0);try{let[e,a]=await Promise.all([M.default.getDoctorsByDepartment(),q.default.getActiveDepartments()]);p(e.data),j(a.data)}catch(e){console.error("Error fetching data:",e),w.toast.error("Gagal memuat data")}finally{v(!1)}};e&&a()},[e]),(0,t.useEffect)(()=>{e&&(r?D({doctor_id:r.doctor_id.toString(),department_id:r.department_id.toString(),day_of_week:r.day_of_week.toString(),start_time:_.formatTime(r.start_time),end_time:_.formatTime(r.end_time),quota:r.quota,is_active:r.is_active,notes:r.notes||""}):D({doctor_id:"",department_id:"",day_of_week:"",start_time:"",end_time:"",quota:20,is_active:!0,notes:""}))},[r,e,D]);let K=async e=>{u(!0);try{let a={doctor_id:parseInt(e.doctor_id),department_id:parseInt(e.department_id),day_of_week:parseInt(e.day_of_week),start_time:e.start_time,end_time:e.end_time,quota:e.quota,is_active:e.is_active,notes:e.notes||null};b&&r?(await _.updateSchedule(r.id,a),w.toast.success("Jadwal berhasil diperbarui")):(await _.createSchedule(a),w.toast.success("Jadwal berhasil dibuat")),c(),i(!1)}catch(a){let e=a.response?.data?.message||"Gagal menyimpan jadwal";w.toast.error(e)}finally{u(!1)}},F=_.getTimeOptions(),G=_.getDayOptionsStatic();return(0,a.jsx)($.Dialog,{open:e,onOpenChange:i,children:(0,a.jsxs)($.DialogContent,{className:"sm:max-w-[500px]",children:[(0,a.jsxs)($.DialogHeader,{children:[(0,a.jsx)($.DialogTitle,{className:"text-xl",children:b?"Edit Jadwal Dokter":"Tambah Jadwal Dokter"}),(0,a.jsx)($.DialogDescription,{children:b?"Perbarui jadwal praktek dokter":"Buat jadwal praktek baru untuk dokter"})]}),y?(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)(A.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):(0,a.jsxs)("form",{onSubmit:N(K),className:"space-y-4 py-4",children:[(0,a.jsxs)(s.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"space-y-2",children:[(0,a.jsxs)(V.Label,{className:"text-sm font-medium",children:["Dokter ",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(I.User,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground z-10"}),(0,a.jsx)(C.Controller,{name:"doctor_id",control:R,render:({field:e})=>(0,a.jsxs)(h.Select,{value:e.value,onValueChange:e.onChange,children:[(0,a.jsx)(h.SelectTrigger,{className:"pl-10",children:(0,a.jsx)(h.SelectValue,{placeholder:"Pilih dokter"})}),(0,a.jsx)(h.SelectContent,{children:x.map(e=>(0,a.jsx)(h.SelectItem,{value:e.id.toString(),children:e.name},e.id))})]})})]}),(0,a.jsx)(P.AnimatePresence,{children:E.doctor_id&&(0,a.jsxs)(s.motion.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-sm text-destructive flex items-center gap-1",children:[(0,a.jsx)(H.AlertCircle,{className:"h-3 w-3"}),E.doctor_id.message]})})]}),(0,a.jsxs)(s.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15},className:"space-y-2",children:[(0,a.jsxs)(V.Label,{className:"text-sm font-medium",children:["Poli ",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(J.Building2,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground z-10"}),(0,a.jsx)(C.Controller,{name:"department_id",control:R,render:({field:e})=>(0,a.jsxs)(h.Select,{value:e.value,onValueChange:e.onChange,children:[(0,a.jsx)(h.SelectTrigger,{className:"pl-10",children:(0,a.jsx)(h.SelectValue,{placeholder:"Pilih poli"})}),(0,a.jsx)(h.SelectContent,{children:g.map(e=>(0,a.jsx)(h.SelectItem,{value:e.id.toString(),children:e.name},e.id))})]})})]}),(0,a.jsx)(P.AnimatePresence,{children:E.department_id&&(0,a.jsxs)(s.motion.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-sm text-destructive flex items-center gap-1",children:[(0,a.jsx)(H.AlertCircle,{className:"h-3 w-3"}),E.department_id.message]})})]}),(0,a.jsxs)(s.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"space-y-2",children:[(0,a.jsxs)(V.Label,{className:"text-sm font-medium",children:["Hari ",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(l.Calendar,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground z-10"}),(0,a.jsx)(C.Controller,{name:"day_of_week",control:R,render:({field:e})=>(0,a.jsxs)(h.Select,{value:e.value,onValueChange:e.onChange,children:[(0,a.jsx)(h.SelectTrigger,{className:"pl-10",children:(0,a.jsx)(h.SelectValue,{placeholder:"Pilih hari"})}),(0,a.jsx)(h.SelectContent,{children:G.map(e=>(0,a.jsx)(h.SelectItem,{value:e.value.toString(),children:e.label},e.value))})]})})]}),(0,a.jsx)(P.AnimatePresence,{children:E.day_of_week&&(0,a.jsxs)(s.motion.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-sm text-destructive flex items-center gap-1",children:[(0,a.jsx)(H.AlertCircle,{className:"h-3 w-3"}),E.day_of_week.message]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)(s.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.25},className:"space-y-2",children:[(0,a.jsxs)(V.Label,{className:"text-sm font-medium",children:["Jam Mulai ",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(n.Clock,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground z-10"}),(0,a.jsx)(C.Controller,{name:"start_time",control:R,render:({field:e})=>(0,a.jsxs)(h.Select,{value:e.value,onValueChange:e.onChange,children:[(0,a.jsx)(h.SelectTrigger,{className:"pl-10",children:(0,a.jsx)(h.SelectValue,{placeholder:"Pilih jam"})}),(0,a.jsx)(h.SelectContent,{children:F.map(e=>(0,a.jsx)(h.SelectItem,{value:e.value,children:e.label},e.value))})]})})]}),(0,a.jsx)(P.AnimatePresence,{children:E.start_time&&(0,a.jsxs)(s.motion.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-sm text-destructive flex items-center gap-1",children:[(0,a.jsx)(H.AlertCircle,{className:"h-3 w-3"}),E.start_time.message]})})]}),(0,a.jsxs)(s.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"space-y-2",children:[(0,a.jsxs)(V.Label,{className:"text-sm font-medium",children:["Jam Selesai ",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(n.Clock,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground z-10"}),(0,a.jsx)(C.Controller,{name:"end_time",control:R,render:({field:e})=>(0,a.jsxs)(h.Select,{value:e.value,onValueChange:e.onChange,children:[(0,a.jsx)(h.SelectTrigger,{className:"pl-10",children:(0,a.jsx)(h.SelectValue,{placeholder:"Pilih jam"})}),(0,a.jsx)(h.SelectContent,{children:F.map(e=>(0,a.jsx)(h.SelectItem,{value:e.value,children:e.label},e.value))})]})})]}),(0,a.jsx)(P.AnimatePresence,{children:E.end_time&&(0,a.jsxs)(s.motion.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-sm text-destructive flex items-center gap-1",children:[(0,a.jsx)(H.AlertCircle,{className:"h-3 w-3"}),E.end_time.message]})})]})]}),(0,a.jsxs)(s.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.35},className:"space-y-2",children:[(0,a.jsxs)(V.Label,{htmlFor:"quota",className:"text-sm font-medium",children:["Kuota Pasien ",(0,a.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(d.Users,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(z.Input,{id:"quota",type:"number",min:1,max:100,className:"pl-10",...f("quota",{valueAsNumber:!0})})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Jumlah maksimal pasien per sesi"}),(0,a.jsx)(P.AnimatePresence,{children:E.quota&&(0,a.jsxs)(s.motion.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-sm text-destructive flex items-center gap-1",children:[(0,a.jsx)(H.AlertCircle,{className:"h-3 w-3"}),E.quota.message]})})]}),(0,a.jsxs)(s.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"space-y-2",children:[(0,a.jsx)(V.Label,{htmlFor:"notes",className:"text-sm font-medium",children:"Catatan (Opsional)"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(B.FileText,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,a.jsx)("textarea",{id:"notes",placeholder:"Catatan tambahan...",className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 pl-10 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 resize-none",...f("notes")})]})]}),(0,a.jsxs)(s.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.45},className:"flex items-center justify-between rounded-lg border p-4",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(V.Label,{htmlFor:"is_active",className:"text-sm font-medium",children:"Status Aktif"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:U?"Jadwal akan ditampilkan":"Jadwal tidak akan ditampilkan"})]}),(0,a.jsx)(L.Switch,{id:"is_active",checked:U,onCheckedChange:e=>S("is_active",e)})]}),(0,a.jsxs)($.DialogFooter,{className:"gap-2 sm:gap-0 pt-4",children:[(0,a.jsx)(o.Button,{type:"button",variant:"outline",onClick:()=>i(!1),disabled:m,children:"Batal"}),(0,a.jsx)(o.Button,{type:"submit",disabled:m,className:"min-w-[100px]",children:m?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Menyimpan..."]}):b?"Simpan Perubahan":"Tambah Jadwal"})]})]})]})})}var E=e.i(482);function U(){let{user:e}=(0,E.useAuth)(),p=e?.role==="super_admin"||e?.role==="admin_klinik",g=e?.role==="dokter",[j,y]=(0,t.useState)([]),[v,b]=(0,t.useState)([]),[f,N]=(0,t.useState)([]),[w,S]=(0,t.useState)([]),[C,T]=(0,t.useState)(!0),[D,P]=(0,t.useState)(!1),[A,H]=(0,t.useState)("all"),[I,J]=(0,t.useState)(1),[B,$]=(0,t.useState)(1),[z,V]=(0,t.useState)({doctor_id:"",department_id:"",day_of_week:"",page:1,per_page:15}),[L,O]=(0,t.useState)(!1),[U,K]=(0,t.useState)(null),F=(0,t.useCallback)(async()=>{try{let a=g&&e?.id?{...z,doctor_id:e.id}:z,t=await _.getSchedules(a);y(t.data),t.meta&&($(t.meta.last_page),J(t.meta.current_page))}catch(e){console.error("Error fetching schedules:",e)}},[z,g,e?.id]),G=(0,t.useCallback)(async()=>{try{let e=await _.getAvailableDoctors();b(e.data)}catch(e){console.error("Error fetching available doctors:",e)}},[]),Q=(0,t.useCallback)(async()=>{try{let[e,a]=await Promise.all([M.default.getDoctorsByDepartment(),q.default.getActiveDepartments()]);N(e.data),S(a.data)}catch(e){console.error("Error fetching filter data:",e)}},[]);(0,t.useEffect)(()=>{(async()=>{T(!0),await Promise.all([F(),G(),Q()]),T(!1)})()},[F,G,Q]);let W=async()=>{P(!0),await Promise.all([F(),G()]),P(!1)},X=(e,a)=>{V(t=>({...t,[e]:a,page:1}))},Y=_.getDayLabel(_.getCurrentDay()),Z=[{title:"Total Jadwal",value:j.length,icon:l.Calendar,color:"blue"},{title:"Dokter Praktek Hari Ini",value:v.length,icon:c.Stethoscope,color:"green"},{title:"Hari Ini",value:Y,icon:n.Clock,color:"purple",isText:!0}],ee={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(s.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:g?"Jadwal Saya":"Jadwal Dokter"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:g?"Lihat jadwal praktek Anda":"Kelola jadwal praktek dokter"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.Button,{variant:"outline",size:"icon",onClick:W,disabled:D,children:(0,a.jsx)(r.RefreshCw,{className:`h-4 w-4 ${D?"animate-spin":""}`})}),p&&(0,a.jsxs)(o.Button,{onClick:()=>{K(null),O(!0)},children:[(0,a.jsx)(i.Plus,{className:"mr-2 h-4 w-4"}),"Tambah Jadwal"]})]})]}),(0,a.jsx)(s.motion.div,{variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"show",className:"grid gap-4 md:grid-cols-3",children:Z.map(e=>(0,a.jsx)(s.motion.div,{variants:ee,children:(0,a.jsx)(m.Card,{children:(0,a.jsx)(m.CardContent,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:e.title}),(0,a.jsx)("p",{className:`${e.isText?"text-2xl":"text-3xl"} font-bold mt-2`,children:C?"-":e.value})]}),(0,a.jsx)("div",{className:`p-3 rounded-xl bg-${e.color}-100 dark:bg-${e.color}-950`,children:(0,a.jsx)(e.icon,{className:`h-6 w-6 text-${e.color}-600 dark:text-${e.color}-400`})})]})})})},e.title))}),(0,a.jsxs)(x.Tabs,{value:A,onValueChange:H,children:[(0,a.jsxs)(x.TabsList,{children:[(0,a.jsxs)(x.TabsTrigger,{value:"all",className:"gap-2",children:[(0,a.jsx)(l.Calendar,{className:"h-4 w-4"}),"Semua Jadwal"]}),(0,a.jsxs)(x.TabsTrigger,{value:"today",className:"gap-2",children:[(0,a.jsx)(n.Clock,{className:"h-4 w-4"}),"Praktek Hari Ini"]})]}),(0,a.jsxs)(x.TabsContent,{value:"all",className:"mt-4 space-y-4",children:[p&&(0,a.jsx)(m.Card,{children:(0,a.jsx)(m.CardContent,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsxs)(h.Select,{value:z.doctor_id?.toString()||"all",onValueChange:e=>X("doctor_id","all"===e?"":parseInt(e)),children:[(0,a.jsx)(h.SelectTrigger,{className:"w-full sm:w-[200px]",children:(0,a.jsx)(h.SelectValue,{placeholder:"Semua Dokter"})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"all",children:"Semua Dokter"}),f.map(e=>(0,a.jsx)(h.SelectItem,{value:e.id.toString(),children:e.name},e.id))]})]}),(0,a.jsxs)(h.Select,{value:z.department_id?.toString()||"all",onValueChange:e=>X("department_id","all"===e?"":parseInt(e)),children:[(0,a.jsx)(h.SelectTrigger,{className:"w-full sm:w-[200px]",children:(0,a.jsx)(h.SelectValue,{placeholder:"Semua Poli"})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"all",children:"Semua Poli"}),w.map(e=>(0,a.jsx)(h.SelectItem,{value:e.id.toString(),children:e.name},e.id))]})]}),(0,a.jsxs)(h.Select,{value:z.day_of_week?.toString()||"all",onValueChange:e=>X("day_of_week","all"===e?"":parseInt(e)),children:[(0,a.jsx)(h.SelectTrigger,{className:"w-full sm:w-[150px]",children:(0,a.jsx)(h.SelectValue,{placeholder:"Semua Hari"})}),(0,a.jsxs)(h.SelectContent,{children:[(0,a.jsx)(h.SelectItem,{value:"all",children:"Semua Hari"}),_.getDayOptionsStatic().map(e=>(0,a.jsx)(h.SelectItem,{value:e.value.toString(),children:e.label},e.value))]})]})]})})}),(0,a.jsx)(k,{schedules:j,isLoading:C,currentPage:I,totalPages:B,onPageChange:e=>{V(a=>({...a,page:e}))},onEdit:e=>{K(e),O(!0)},onRefresh:W})]}),(0,a.jsx)(x.TabsContent,{value:"today",className:"mt-4",children:(0,a.jsxs)(m.Card,{children:[(0,a.jsx)(m.CardHeader,{children:(0,a.jsxs)(m.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(c.Stethoscope,{className:"h-5 w-5"}),"Dokter Praktek Hari Ini (",Y,")"]})}),(0,a.jsx)(m.CardContent,{children:C?(0,a.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,t)=>(0,a.jsx)("div",{className:"h-24 bg-muted animate-pulse rounded-lg"},t))}):0===v.length?(0,a.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,a.jsx)(d.Users,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),(0,a.jsx)("p",{children:"Tidak ada dokter yang praktek hari ini"})]}):(0,a.jsx)("div",{className:"space-y-4",children:v.map(e=>(0,a.jsxs)(s.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[(0,a.jsx)("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"h-12 w-12 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-lg font-medium text-blue-600 dark:text-blue-400",children:e.doctor.name?.charAt(0).toUpperCase()})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold",children:e.doctor.name}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.doctor.email})]})]})}),(0,a.jsx)("div",{className:"mt-3 flex flex-wrap gap-2",children:e.schedules.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-muted rounded-lg",children:[(0,a.jsx)(u.Badge,{variant:"outline",children:e.department.name}),(0,a.jsx)("span",{className:"text-sm font-medium",children:e.time_range}),e.is_currently_available&&(0,a.jsx)(u.Badge,{variant:"success",className:"text-xs",children:"Sedang Praktek"})]},e.id))})]},e.doctor.id))})})]})})]}),(0,a.jsx)(R,{open:L,onOpenChange:O,schedule:U,onSuccess:()=>{W()}})]})}e.s(["default",()=>U],98726)}]);