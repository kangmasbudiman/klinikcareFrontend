module.exports=[98610,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(46271),e=a.i(3858),f=a.i(69520),g=a.i(41710),h=a.i(16201),i=a.i(87532),j=a.i(83497),k=a.i(46842),l=a.i(41675),m=a.i(77156),n=a.i(34012);let o=(0,a.i(70106).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var p=a.i(62722),q=a.i(92e3),r=a.i(99570),s=a.i(91119),t=a.i(66718),u=a.i(86304),v=a.i(75083),w=a.i(6015),x=a.i(14574),y=a.i(5084),z=a.i(41572),A=a.i(23292);function B(){let[a,B]=(0,c.useState)([]),[C,D]=(0,c.useState)(!0),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(""),[I,J]=(0,c.useState)("pending"),[K,L]=(0,c.useState)(null),[M,N]=(0,c.useState)(!1),[O,P]=(0,c.useState)(!1),Q=(0,c.useCallback)(async()=>{try{let a=await z.default.getPrescriptions({date:z.default.getTodayDateString(),status:"all"!==I?I:void 0});B(a.data)}catch(a){console.error("Error fetching prescriptions:",a),A.toast.error("Gagal memuat data resep")}},[I]);(0,c.useEffect)(()=>{(async()=>{D(!0),await Q(),D(!1)})()},[Q]),(0,c.useEffect)(()=>{let a=setInterval(()=>{Q()},15e3);return()=>clearInterval(a)},[Q]);let R=async()=>{F(!0),await Q(),F(!1)},S=async(a,b)=>{P(!0);try{await z.default.updatePrescriptionStatus(a,b),A.toast.success(`Status resep diubah menjadi "${{pending:"Menunggu",processed:"Diproses",completed:"Selesai",cancelled:"Dibatalkan"}[b]}"`),await Q(),N(!1)}catch(a){console.error("Error updating prescription status:",a),A.toast.error("Gagal mengubah status resep",{description:a.response?.data?.message||"Terjadi kesalahan"})}finally{P(!1)}},T=a.filter(a=>a.prescription_number?.toLowerCase().includes(G.toLowerCase())||a.medical_record?.patient?.name?.toLowerCase().includes(G.toLowerCase())||a.medical_record?.patient?.medical_record_number?.toLowerCase().includes(G.toLowerCase())),U=a=>{switch(a){case"pending":return(0,b.jsxs)(u.Badge,{variant:"warning",className:"gap-1",children:[(0,b.jsx)(g.Clock,{className:"h-3 w-3"})," Menunggu"]});case"processed":return(0,b.jsxs)(u.Badge,{variant:"info",className:"gap-1",children:[(0,b.jsx)(n.PlayCircle,{className:"h-3 w-3"})," Diproses"]});case"completed":return(0,b.jsxs)(u.Badge,{variant:"success",className:"gap-1",children:[(0,b.jsx)(h.CheckCircle,{className:"h-3 w-3"})," Selesai"]});case"cancelled":return(0,b.jsxs)(u.Badge,{variant:"error",className:"gap-1",children:[(0,b.jsx)(p.XCircle,{className:"h-3 w-3"})," Dibatalkan"]});default:return(0,b.jsx)(u.Badge,{children:a})}},V=a.filter(a=>"pending"===a.status).length,W=a.filter(a=>"processed"===a.status).length,X=a.filter(a=>"completed"===a.status).length,Y=[{title:"Menunggu",value:V,icon:g.Clock,color:"yellow"},{title:"Sedang Diproses",value:W,icon:n.PlayCircle,color:"blue"},{title:"Selesai Hari Ini",value:X,icon:h.CheckCircle,color:"green"}],Z={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Dispensing Resep"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Kelola dan proses resep obat dari dokter"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(i.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(t.Input,{placeholder:"Cari resep atau pasien...",value:G,onChange:a=>H(a.target.value),className:"pl-9 w-[250px]"})]}),(0,b.jsx)(r.Button,{variant:"outline",size:"icon",onClick:R,disabled:E,children:(0,b.jsx)(f.RefreshCw,{className:`h-4 w-4 ${E?"animate-spin":""}`})})]})]}),(0,b.jsx)(d.motion.div,{variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"show",className:"grid gap-4 md:grid-cols-3",children:Y.map(a=>(0,b.jsx)(d.motion.div,{variants:Z,children:(0,b.jsx)(s.Card,{children:(0,b.jsx)(s.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:a.title}),(0,b.jsx)("p",{className:"text-3xl font-bold mt-2",children:C?"-":a.value})]}),(0,b.jsx)("div",{className:`p-3 rounded-xl bg-${a.color}-100 dark:bg-${a.color}-950`,children:(0,b.jsx)(a.icon,{className:`h-6 w-6 text-${a.color}-600 dark:text-${a.color}-400`})})]})})})},a.title))}),(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:(0,b.jsxs)(s.Card,{children:[(0,b.jsx)(s.CardHeader,{children:(0,b.jsxs)(s.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(e.Pill,{className:"h-5 w-5"}),"Daftar Resep"]})}),(0,b.jsx)(s.CardContent,{children:(0,b.jsxs)(v.Tabs,{value:I,onValueChange:a=>J(a),children:[(0,b.jsxs)(v.TabsList,{children:[(0,b.jsxs)(v.TabsTrigger,{value:"pending",className:"gap-2",children:[(0,b.jsx)(g.Clock,{className:"h-4 w-4"}),"Menunggu (",V,")"]}),(0,b.jsxs)(v.TabsTrigger,{value:"processed",className:"gap-2",children:[(0,b.jsx)(n.PlayCircle,{className:"h-4 w-4"}),"Diproses (",W,")"]}),(0,b.jsxs)(v.TabsTrigger,{value:"completed",className:"gap-2",children:[(0,b.jsx)(h.CheckCircle,{className:"h-4 w-4"}),"Selesai (",X,")"]})]}),(0,b.jsx)(v.TabsContent,{value:I,className:"mt-4",children:C?(0,b.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,b.jsx)(f.RefreshCw,{className:"h-8 w-8 animate-spin mx-auto mb-3"}),(0,b.jsx)("p",{children:"Memuat data..."})]}):0===T.length?(0,b.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,b.jsx)(e.Pill,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),(0,b.jsxs)("p",{children:["Tidak ada resep ","pending"===I?"menunggu":"processed"===I?"diproses":"selesai"]})]}):(0,b.jsxs)(w.Table,{children:[(0,b.jsx)(w.TableHeader,{children:(0,b.jsxs)(w.TableRow,{children:[(0,b.jsx)(w.TableHead,{children:"No. Resep"}),(0,b.jsx)(w.TableHead,{children:"Pasien"}),(0,b.jsx)(w.TableHead,{children:"Dokter"}),(0,b.jsx)(w.TableHead,{children:"Jumlah Item"}),(0,b.jsx)(w.TableHead,{children:"Status"}),(0,b.jsx)(w.TableHead,{children:"Waktu"}),(0,b.jsx)(w.TableHead,{className:"text-right",children:"Aksi"})]})}),(0,b.jsx)(w.TableBody,{children:T.map(a=>(0,b.jsxs)(w.TableRow,{children:[(0,b.jsx)(w.TableCell,{className:"font-medium",children:a.prescription_number||"-"}),(0,b.jsx)(w.TableCell,{children:(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.medical_record?.patient?.name||"-"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.medical_record?.patient?.medical_record_number||"-"})]})}),(0,b.jsx)(w.TableCell,{className:"text-sm",children:a.medical_record?.doctor?.name||"-"}),(0,b.jsx)(w.TableCell,{children:(0,b.jsxs)(u.Badge,{variant:"outline",children:[a.items?.length||0," obat"]})}),(0,b.jsx)(w.TableCell,{children:U(a.status)}),(0,b.jsx)(w.TableCell,{className:"text-sm text-muted-foreground",children:new Date(a.created_at).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})}),(0,b.jsx)(w.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsxs)(r.Button,{size:"sm",variant:"outline",onClick:()=>{L(a),N(!0)},children:[(0,b.jsx)(m.Eye,{className:"h-4 w-4 mr-1"}),"Detail"]}),"pending"===a.status&&(0,b.jsxs)(r.Button,{size:"sm",onClick:()=>S(a.id,"processed"),children:[(0,b.jsx)(n.PlayCircle,{className:"h-4 w-4 mr-1"}),"Proses"]}),"processed"===a.status&&(0,b.jsxs)(r.Button,{size:"sm",variant:"success",onClick:()=>S(a.id,"completed"),children:[(0,b.jsx)(o,{className:"h-4 w-4 mr-1"}),"Selesai"]})]})})]},a.id))})]})})]})})]})}),(0,b.jsx)(x.Dialog,{open:M,onOpenChange:N,children:(0,b.jsxs)(x.DialogContent,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(x.DialogHeader,{children:[(0,b.jsxs)(x.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(e.Pill,{className:"h-5 w-5"}),"Detail Resep"]}),(0,b.jsx)(x.DialogDescription,{children:K?.prescription_number||"Resep Obat"})]}),K&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"p-3 rounded-lg bg-muted",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-1",children:[(0,b.jsx)(k.User,{className:"h-4 w-4"}),"Pasien"]}),(0,b.jsx)("p",{className:"font-semibold",children:K.medical_record?.patient?.name}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:K.medical_record?.patient?.medical_record_number})]}),(0,b.jsxs)("div",{className:"p-3 rounded-lg bg-muted",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-1",children:[(0,b.jsx)(l.Calendar,{className:"h-4 w-4"}),"Tanggal & Dokter"]}),(0,b.jsx)("p",{className:"font-semibold",children:new Date(K.created_at).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:K.medical_record?.doctor?.name})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Status:"}),U(K.status)]}),(0,b.jsx)(y.Separator,{}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[(0,b.jsx)(j.Package,{className:"h-4 w-4"}),"Daftar Obat (",K.items?.length||0," item)"]}),(0,b.jsx)("div",{className:"space-y-3",children:K.items?.map((a,c)=>(0,b.jsx)("div",{className:"p-3 border rounded-lg",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.medicine_name}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2 mt-1",children:[a.dosage&&(0,b.jsxs)(u.Badge,{variant:"outline",className:"text-xs",children:["Dosis: ",a.dosage]}),a.frequency&&(0,b.jsx)(u.Badge,{variant:"outline",className:"text-xs",children:a.frequency}),a.duration&&(0,b.jsx)(u.Badge,{variant:"outline",className:"text-xs",children:a.duration})]}),a.instructions&&(0,b.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:["Aturan: ",a.instructions]})]}),(0,b.jsx)("div",{className:"text-right",children:(0,b.jsxs)(u.Badge,{className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",children:[a.quantity," pcs"]})})]})},a.id))})]}),K.notes&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(y.Separator,{}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[(0,b.jsx)(q.AlertCircle,{className:"h-4 w-4"}),"Catatan Dokter"]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground bg-muted p-3 rounded-lg",children:K.notes})]})]})]}),(0,b.jsxs)(x.DialogFooter,{className:"gap-2 sm:gap-0",children:[(0,b.jsx)(r.Button,{variant:"outline",onClick:()=>N(!1),disabled:O,children:"Tutup"}),K?.status==="pending"&&(0,b.jsxs)(r.Button,{onClick:()=>S(K.id,"processed"),disabled:O,children:[(0,b.jsx)(n.PlayCircle,{className:"h-4 w-4 mr-2"}),"Mulai Proses"]}),K?.status==="processed"&&(0,b.jsxs)(r.Button,{variant:"success",onClick:()=>S(K.id,"completed"),disabled:O,children:[(0,b.jsx)(o,{className:"h-4 w-4 mr-2"}),"Tandai Selesai"]})]})]})})]})}a.s(["default",()=>B],98610)}];

//# sourceMappingURL=src_app_%28dashboard%29_pharmacy_prescriptions_page_tsx_55cf6009._.js.map