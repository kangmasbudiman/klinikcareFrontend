module.exports=[47895,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(46271),e=a.i(15618),f=a.i(87532),g=a.i(3858),h=a.i(17755),i=a.i(99464),j=a.i(81560),k=a.i(30206),l=a.i(96221),m=a.i(83497),n=a.i(73570),o=a.i(41675),p=a.i(77156),q=a.i(99570),r=a.i(66718),s=a.i(86304),t=a.i(91119),u=a.i(6015),v=a.i(35732),w=a.i(80701),x=a.i(14574),y=a.i(70430),z=a.i(29246),A=a.i(63658),B=a.i(75083),C=a.i(23292),D=a.i(85611);function E(){let[a,E]=(0,c.useState)([]),[F,G]=(0,c.useState)([]),[H,I]=(0,c.useState)(null),[J,K]=(0,c.useState)(!0),[L,M]=(0,c.useState)(""),[N,O]=(0,c.useState)("all"),[P,Q]=(0,c.useState)("all"),[R,S]=(0,c.useState)("all"),[T,U]=(0,c.useState)(1),[V,W]=(0,c.useState)(1),[X,Y]=(0,c.useState)(0),[Z,$]=(0,c.useState)(!1),[_,aa]=(0,c.useState)(!1),[ab,ac]=(0,c.useState)(!1),[ad,ae]=(0,c.useState)(null),[af,ag]=(0,c.useState)([]),[ah,ai]=(0,c.useState)(!1),[aj,ak]=(0,c.useState)([]),[al,am]=(0,c.useState)({name:"",generic_name:"",category_id:null,unit:"Tablet",purchase_price:0,margin_percentage:0,ppn_percentage:11,is_ppn_included:!1,selling_price:0,min_stock:10,max_stock:100,manufacturer:"",description:"",requires_prescription:!1,is_active:!0}),[an,ao]=(0,c.useState)({price_before_ppn:0,selling_price:0,margin_amount:0,ppn_amount:0}),ap=(0,c.useCallback)(async()=>{K(!0);try{let a=await D.medicineService.getMedicines({search:L,status:N,category_id:"all"!==P?parseInt(P):void 0,stock_status:"all"!==R?R:void 0,page:T,per_page:10});E(a.data),W(a.meta.last_page),Y(a.meta.total)}catch(a){console.error("Error fetching medicines:",a),C.toast.error("Gagal memuat data obat")}finally{K(!1)}},[L,N,P,R,T]),aq=async()=>{try{let a=await D.medicineCategoryService.getCategories();G(a.data)}catch(a){console.error("Error fetching categories:",a)}},ar=async()=>{try{let a=await D.medicineService.getMedicineStats();I(a.data)}catch(a){console.error("Error fetching stats:",a)}},as=async()=>{try{let a=await D.medicineService.getUnits();ak(a.data)}catch(a){console.error("Error fetching units:",a)}};(0,c.useEffect)(()=>{ap()},[ap]),(0,c.useEffect)(()=>{aq(),ar(),as()},[]);let at=a=>{a?(ae(a),am({name:a.name,generic_name:a.generic_name||"",category_id:a.category_id,unit:a.unit,purchase_price:a.purchase_price,margin_percentage:a.margin_percentage||0,ppn_percentage:a.ppn_percentage||11,is_ppn_included:a.is_ppn_included||!1,selling_price:a.selling_price,min_stock:a.min_stock,max_stock:a.max_stock,manufacturer:a.manufacturer||"",description:a.description||"",requires_prescription:a.requires_prescription,is_active:a.is_active}),ao({price_before_ppn:a.price_before_ppn||0,selling_price:a.selling_price,margin_amount:a.purchase_price*(a.margin_percentage||0)/100,ppn_amount:(a.price_before_ppn||0)*(a.ppn_percentage||11)/100})):(ae(null),am({name:"",generic_name:"",category_id:null,unit:"Tablet",purchase_price:0,margin_percentage:0,ppn_percentage:11,is_ppn_included:!1,selling_price:0,min_stock:10,max_stock:100,manufacturer:"",description:"",requires_prescription:!1,is_active:!0}),ao({price_before_ppn:0,selling_price:0,margin_amount:0,ppn_amount:0})),$(!0)},au=async(a,b,c)=>{if(a>0)try{let d=await D.medicineService.calculatePrice({purchase_price:a,margin_percentage:b,ppn_percentage:c});ao(d.data),am(a=>({...a,selling_price:d.data.selling_price}))}catch(f){let d=a*(1+b/100),e=d*(1+c/100);ao({price_before_ppn:d,selling_price:e,margin_amount:a*b/100,ppn_amount:d*c/100}),am(a=>({...a,selling_price:e}))}},av=async a=>{ae(a);try{let b=await D.medicineService.getMedicineBatches(a.id);ag(b.data),ac(!0)}catch(a){C.toast.error("Gagal memuat data batch")}},aw=async()=>{if(!al.name.trim())return void C.toast.error("Nama obat wajib diisi");if(!al.unit.trim())return void C.toast.error("Satuan wajib diisi");if(0>=(al.selling_price||0))return void C.toast.error("Harga jual harus lebih dari 0");ai(!0);try{ad?(await D.medicineService.updateMedicine(ad.id,al),C.toast.success("Obat berhasil diperbarui")):(await D.medicineService.createMedicine(al),C.toast.success("Obat berhasil ditambahkan")),$(!1),ap(),ar()}catch(a){C.toast.error(a.response?.data?.message||"Gagal menyimpan obat")}finally{ai(!1)}},ax=async()=>{if(ad){ai(!0);try{await D.medicineService.deleteMedicine(ad.id),C.toast.success("Obat berhasil dihapus"),aa(!1),ae(null),ap(),ar()}catch(a){C.toast.error(a.response?.data?.message||"Gagal menghapus obat")}finally{ai(!1)}}},ay=async a=>{try{await D.medicineService.toggleMedicineStatus(a.id),C.toast.success(a.is_active?"Obat berhasil dinonaktifkan":"Obat berhasil diaktifkan"),ap(),ar()}catch(a){C.toast.error("Gagal mengubah status obat")}},az=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Master Obat"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Kelola data obat dan stok"})]}),(0,b.jsxs)(q.Button,{onClick:()=>at(),className:"gap-2",children:[(0,b.jsx)(e.Plus,{className:"h-4 w-4"}),"Tambah Obat"]})]}),H&&(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:(0,b.jsxs)(t.Card,{children:[(0,b.jsxs)(t.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(t.CardTitle,{className:"text-sm font-medium",children:"Total Obat"}),(0,b.jsx)(g.Pill,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(t.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:H.total}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[H.active," aktif"]})]})]})}),(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:(0,b.jsxs)(t.Card,{children:[(0,b.jsxs)(t.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(t.CardTitle,{className:"text-sm font-medium",children:"Stok Menipis"}),(0,b.jsx)(n.AlertTriangle,{className:"h-4 w-4 text-yellow-500"})]}),(0,b.jsxs)(t.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:H.low_stock}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Perlu restock"})]})]})}),(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,b.jsxs)(t.Card,{children:[(0,b.jsxs)(t.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(t.CardTitle,{className:"text-sm font-medium",children:"Stok Habis"}),(0,b.jsx)(m.Package,{className:"h-4 w-4 text-red-500"})]}),(0,b.jsxs)(t.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-red-600",children:H.out_of_stock}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Segera order"})]})]})}),(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:(0,b.jsxs)(t.Card,{children:[(0,b.jsxs)(t.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(t.CardTitle,{className:"text-sm font-medium",children:"Kadaluarsa"}),(0,b.jsx)(o.Calendar,{className:"h-4 w-4 text-orange-500"})]}),(0,b.jsxs)(t.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:H.expiring_soon}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Dalam 3 bulan"})]})]})})]}),(0,b.jsxs)(t.Card,{children:[(0,b.jsxs)(t.CardHeader,{children:[(0,b.jsx)(t.CardTitle,{children:"Daftar Obat"}),(0,b.jsxs)(t.CardDescription,{children:["Total ",X," obat terdaftar"]})]}),(0,b.jsxs)(t.CardContent,{children:[(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 mb-6",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(f.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(r.Input,{placeholder:"Cari nama obat atau kode...",value:L,onChange:a=>{M(a.target.value),U(1)},className:"pl-10"})]}),(0,b.jsxs)(w.Select,{value:P,onValueChange:a=>{Q(a),U(1)},children:[(0,b.jsx)(w.SelectTrigger,{className:"w-full lg:w-[180px]",children:(0,b.jsx)(w.SelectValue,{placeholder:"Kategori"})}),(0,b.jsxs)(w.SelectContent,{children:[(0,b.jsx)(w.SelectItem,{value:"all",children:"Semua Kategori"}),F.map(a=>(0,b.jsx)(w.SelectItem,{value:a.id.toString(),children:a.name},a.id))]})]}),(0,b.jsxs)(w.Select,{value:R,onValueChange:a=>{S(a),U(1)},children:[(0,b.jsx)(w.SelectTrigger,{className:"w-full lg:w-[180px]",children:(0,b.jsx)(w.SelectValue,{placeholder:"Status Stok"})}),(0,b.jsxs)(w.SelectContent,{children:[(0,b.jsx)(w.SelectItem,{value:"all",children:"Semua Stok"}),(0,b.jsx)(w.SelectItem,{value:"low",children:"Stok Menipis"}),(0,b.jsx)(w.SelectItem,{value:"out_of_stock",children:"Stok Habis"})]})]}),(0,b.jsxs)(w.Select,{value:N,onValueChange:a=>{O(a),U(1)},children:[(0,b.jsx)(w.SelectTrigger,{className:"w-full lg:w-[150px]",children:(0,b.jsx)(w.SelectValue,{placeholder:"Status"})}),(0,b.jsxs)(w.SelectContent,{children:[(0,b.jsx)(w.SelectItem,{value:"all",children:"Semua"}),(0,b.jsx)(w.SelectItem,{value:"active",children:"Aktif"}),(0,b.jsx)(w.SelectItem,{value:"inactive",children:"Tidak Aktif"})]})]})]}),(0,b.jsx)("div",{className:"rounded-md border",children:(0,b.jsxs)(u.Table,{children:[(0,b.jsx)(u.TableHeader,{children:(0,b.jsxs)(u.TableRow,{children:[(0,b.jsx)(u.TableHead,{children:"Kode"}),(0,b.jsx)(u.TableHead,{children:"Nama Obat"}),(0,b.jsx)(u.TableHead,{children:"Kategori"}),(0,b.jsx)(u.TableHead,{children:"Satuan"}),(0,b.jsx)(u.TableHead,{className:"text-right",children:"Harga Beli"}),(0,b.jsx)(u.TableHead,{className:"text-right",children:"Harga Jual"}),(0,b.jsx)(u.TableHead,{className:"text-center",children:"Stok"}),(0,b.jsx)(u.TableHead,{children:"Status"}),(0,b.jsx)(u.TableHead,{className:"w-[70px]"})]})}),(0,b.jsx)(u.TableBody,{children:J?(0,b.jsx)(u.TableRow,{children:(0,b.jsx)(u.TableCell,{colSpan:8,className:"text-center py-10",children:(0,b.jsx)(l.Loader2,{className:"h-6 w-6 animate-spin mx-auto"})})}):0===a.length?(0,b.jsx)(u.TableRow,{children:(0,b.jsx)(u.TableCell,{colSpan:8,className:"text-center py-10 text-muted-foreground",children:"Tidak ada data obat"})}):a.map(a=>{var c;return(0,b.jsxs)(u.TableRow,{children:[(0,b.jsx)(u.TableCell,{className:"font-mono text-sm",children:a.code}),(0,b.jsx)(u.TableCell,{children:(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:a.name}),a.generic_name&&(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:a.generic_name})]})}),(0,b.jsx)(u.TableCell,{children:a.category?.name||"-"}),(0,b.jsx)(u.TableCell,{children:a.unit}),(0,b.jsx)(u.TableCell,{className:"text-right",children:az(a.purchase_price)}),(0,b.jsx)(u.TableCell,{className:"text-right",children:az(a.selling_price)}),(0,b.jsx)(u.TableCell,{className:"text-center",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,b.jsx)("span",{className:"font-medium",children:a.current_stock}),(c=a.stock_status,(0,b.jsx)(s.Badge,{variant:{out_of_stock:"destructive",low:"warning",normal:"success",overstock:"secondary"}[c],children:{out_of_stock:"Habis",low:"Menipis",normal:"Normal",overstock:"Berlebih"}[c]}))]})}),(0,b.jsx)(u.TableCell,{children:(0,b.jsx)(s.Badge,{variant:a.is_active?"success":"secondary",children:a.is_active?"Aktif":"Tidak Aktif"})}),(0,b.jsx)(u.TableCell,{children:(0,b.jsxs)(v.DropdownMenu,{children:[(0,b.jsx)(v.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(q.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(h.MoreHorizontal,{className:"h-4 w-4"})})}),(0,b.jsxs)(v.DropdownMenuContent,{align:"end",children:[(0,b.jsxs)(v.DropdownMenuItem,{onClick:()=>av(a),children:[(0,b.jsx)(p.Eye,{className:"h-4 w-4 mr-2"}),"Lihat Batch"]}),(0,b.jsxs)(v.DropdownMenuItem,{onClick:()=>at(a),children:[(0,b.jsx)(i.Pencil,{className:"h-4 w-4 mr-2"}),"Edit"]}),(0,b.jsxs)(v.DropdownMenuItem,{onClick:()=>ay(a),children:[(0,b.jsx)(k.Power,{className:"h-4 w-4 mr-2"}),a.is_active?"Nonaktifkan":"Aktifkan"]}),(0,b.jsx)(v.DropdownMenuSeparator,{}),(0,b.jsxs)(v.DropdownMenuItem,{className:"text-destructive",onClick:()=>{ae(a),aa(!0)},children:[(0,b.jsx)(j.Trash2,{className:"h-4 w-4 mr-2"}),"Hapus"]})]})]})})]},a.id)})})]})}),V>1&&(0,b.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Halaman ",T," dari ",V]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(q.Button,{variant:"outline",size:"sm",onClick:()=>U(a=>Math.max(1,a-1)),disabled:1===T,children:"Sebelumnya"}),(0,b.jsx)(q.Button,{variant:"outline",size:"sm",onClick:()=>U(a=>Math.min(V,a+1)),disabled:T===V,children:"Selanjutnya"})]})]})]})]}),(0,b.jsx)(x.Dialog,{open:Z,onOpenChange:$,children:(0,b.jsxs)(x.DialogContent,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(x.DialogHeader,{children:[(0,b.jsx)(x.DialogTitle,{children:ad?"Edit Obat":"Tambah Obat"}),(0,b.jsx)(x.DialogDescription,{children:ad?"Perbarui informasi obat":"Tambahkan obat baru ke sistem"})]}),(0,b.jsxs)(B.Tabs,{defaultValue:"basic",className:"w-full",children:[(0,b.jsxs)(B.TabsList,{className:"grid w-full grid-cols-2",children:[(0,b.jsx)(B.TabsTrigger,{value:"basic",children:"Informasi Dasar"}),(0,b.jsx)(B.TabsTrigger,{value:"stock",children:"Harga & Stok"})]}),(0,b.jsxs)(B.TabsContent,{value:"basic",className:"space-y-4 mt-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(y.Label,{htmlFor:"name",children:"Nama Obat *"}),(0,b.jsx)(r.Input,{id:"name",value:al.name,onChange:a=>am({...al,name:a.target.value}),placeholder:"Paracetamol 500mg"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(y.Label,{htmlFor:"generic_name",children:"Nama Generik"}),(0,b.jsx)(r.Input,{id:"generic_name",value:al.generic_name,onChange:a=>am({...al,generic_name:a.target.value}),placeholder:"Acetaminophen"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(y.Label,{htmlFor:"category_id",children:"Kategori"}),(0,b.jsxs)(w.Select,{value:al.category_id?.toString()||"",onValueChange:a=>am({...al,category_id:a?parseInt(a):null}),children:[(0,b.jsx)(w.SelectTrigger,{children:(0,b.jsx)(w.SelectValue,{placeholder:"Pilih kategori"})}),(0,b.jsx)(w.SelectContent,{children:F.map(a=>(0,b.jsx)(w.SelectItem,{value:a.id.toString(),children:a.name},a.id))})]})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(y.Label,{htmlFor:"unit",children:"Satuan *"}),(0,b.jsxs)(w.Select,{value:al.unit,onValueChange:a=>am({...al,unit:a}),children:[(0,b.jsx)(w.SelectTrigger,{children:(0,b.jsx)(w.SelectValue,{placeholder:"Pilih satuan"})}),(0,b.jsx)(w.SelectContent,{children:aj.map(a=>(0,b.jsx)(w.SelectItem,{value:a,children:a},a))})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(y.Label,{htmlFor:"manufacturer",children:"Produsen/Pabrik"}),(0,b.jsx)(r.Input,{id:"manufacturer",value:al.manufacturer,onChange:a=>am({...al,manufacturer:a.target.value}),placeholder:"PT. Farmasi Indonesia"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(y.Label,{htmlFor:"description",children:"Deskripsi"}),(0,b.jsx)(z.Textarea,{id:"description",value:al.description,onChange:a=>am({...al,description:a.target.value}),placeholder:"Deskripsi obat (opsional)",rows:2})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(y.Label,{children:"Memerlukan Resep"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Obat ini memerlukan resep dokter"})]}),(0,b.jsx)(A.Switch,{checked:al.requires_prescription,onCheckedChange:a=>am({...al,requires_prescription:a})})]})]}),(0,b.jsxs)(B.TabsContent,{value:"stock",className:"space-y-4 mt-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(y.Label,{htmlFor:"purchase_price",children:"Harga Beli (HPP)"}),(0,b.jsx)(r.Input,{id:"purchase_price",type:"number",value:al.purchase_price,onChange:a=>{let b=parseFloat(a.target.value)||0;am({...al,purchase_price:b}),au(b,al.margin_percentage||0,al.ppn_percentage||11)},placeholder:"0"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(y.Label,{htmlFor:"margin_percentage",children:"Margin (%)"}),(0,b.jsx)(r.Input,{id:"margin_percentage",type:"number",step:"0.1",value:al.margin_percentage,onChange:a=>{let b=parseFloat(a.target.value)||0;am({...al,margin_percentage:b}),au(al.purchase_price||0,b,al.ppn_percentage||11)},placeholder:"0"}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Margin: ",az(an.margin_amount)]})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(y.Label,{htmlFor:"ppn_percentage",children:"PPN (%)"}),(0,b.jsx)(r.Input,{id:"ppn_percentage",type:"number",step:"0.1",value:al.ppn_percentage,onChange:a=>{let b=parseFloat(a.target.value)||0;am({...al,ppn_percentage:b}),au(al.purchase_price||0,al.margin_percentage||0,b)},placeholder:"11"}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["PPN: ",az(an.ppn_amount)]})]})]}),(al.purchase_price||0)>0&&(0,b.jsxs)("div",{className:"rounded-lg border bg-muted/50 p-4 space-y-2",children:[(0,b.jsx)("h4",{className:"font-medium text-sm",children:"Ringkasan Harga"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Harga Beli (HPP):"}),(0,b.jsx)("span",{className:"text-right",children:az(al.purchase_price||0)}),(0,b.jsxs)("span",{className:"text-muted-foreground",children:["+ Margin (",al.margin_percentage,"%):"]}),(0,b.jsx)("span",{className:"text-right",children:az(an.margin_amount)}),(0,b.jsx)("span",{className:"text-muted-foreground",children:"= Harga Sebelum PPN:"}),(0,b.jsx)("span",{className:"text-right",children:az(an.price_before_ppn)}),(0,b.jsxs)("span",{className:"text-muted-foreground",children:["+ PPN (",al.ppn_percentage,"%):"]}),(0,b.jsx)("span",{className:"text-right",children:az(an.ppn_amount)}),(0,b.jsx)("span",{className:"font-medium border-t pt-2",children:"Harga Jual:"}),(0,b.jsx)("span",{className:"text-right font-bold text-primary border-t pt-2",children:az(an.selling_price)})]})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(y.Label,{htmlFor:"selling_price",children:"Harga Jual (Manual Override)"}),(0,b.jsx)(r.Input,{id:"selling_price",type:"number",value:al.selling_price,onChange:a=>am({...al,selling_price:parseFloat(a.target.value)||0}),placeholder:"0"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Ubah untuk override harga kalkulasi otomatis"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(y.Label,{htmlFor:"min_stock",children:"Stok Minimum"}),(0,b.jsx)(r.Input,{id:"min_stock",type:"number",value:al.min_stock,onChange:a=>am({...al,min_stock:parseInt(a.target.value)||0}),placeholder:"10"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Notifikasi saat stok di bawah nilai ini"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(y.Label,{htmlFor:"max_stock",children:"Stok Maksimum"}),(0,b.jsx)(r.Input,{id:"max_stock",type:"number",value:al.max_stock,onChange:a=>am({...al,max_stock:parseInt(a.target.value)||0}),placeholder:"100"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Kapasitas penyimpanan maksimum"})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(y.Label,{children:"Status Aktif"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:al.is_active?"Obat tersedia untuk transaksi":"Obat tidak aktif"})]}),(0,b.jsx)(A.Switch,{checked:al.is_active,onCheckedChange:a=>am({...al,is_active:a})})]})]})]}),(0,b.jsxs)(x.DialogFooter,{children:[(0,b.jsx)(q.Button,{variant:"outline",onClick:()=>$(!1),children:"Batal"}),(0,b.jsxs)(q.Button,{onClick:aw,disabled:ah,children:[ah&&(0,b.jsx)(l.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),ad?"Simpan Perubahan":"Tambah Obat"]})]})]})}),(0,b.jsx)(x.Dialog,{open:ab,onOpenChange:ac,children:(0,b.jsxs)(x.DialogContent,{className:"sm:max-w-[600px]",children:[(0,b.jsxs)(x.DialogHeader,{children:[(0,b.jsxs)(x.DialogTitle,{children:["Batch - ",ad?.name]}),(0,b.jsx)(x.DialogDescription,{children:"Daftar batch obat yang tersedia"})]}),(0,b.jsx)("div",{className:"rounded-md border",children:(0,b.jsxs)(u.Table,{children:[(0,b.jsx)(u.TableHeader,{children:(0,b.jsxs)(u.TableRow,{children:[(0,b.jsx)(u.TableHead,{children:"No. Batch"}),(0,b.jsx)(u.TableHead,{children:"Kadaluarsa"}),(0,b.jsx)(u.TableHead,{className:"text-right",children:"Stok"}),(0,b.jsx)(u.TableHead,{children:"Status"})]})}),(0,b.jsx)(u.TableBody,{children:0===af.length?(0,b.jsx)(u.TableRow,{children:(0,b.jsx)(u.TableCell,{colSpan:4,className:"text-center py-6 text-muted-foreground",children:"Belum ada batch"})}):af.map(a=>(0,b.jsxs)(u.TableRow,{children:[(0,b.jsx)(u.TableCell,{className:"font-mono",children:a.batch_number}),(0,b.jsx)(u.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[new Date(a.expiry_date).toLocaleDateString("id-ID"),a.is_expiring_soon&&!a.is_expired&&(0,b.jsx)(s.Badge,{variant:"warning",children:"Segera Exp"}),a.is_expired&&(0,b.jsx)(s.Badge,{variant:"destructive",children:"Expired"})]})}),(0,b.jsx)(u.TableCell,{className:"text-right",children:a.current_qty}),(0,b.jsx)(u.TableCell,{children:(0,b.jsx)(s.Badge,{variant:"available"===a.status?"success":"low"===a.status?"warning":"expired"===a.status?"destructive":"secondary",children:"available"===a.status?"Tersedia":"low"===a.status?"Menipis":"expired"===a.status?"Kadaluarsa":"Habis"})})]},a.id))})]})}),(0,b.jsx)(x.DialogFooter,{children:(0,b.jsx)(q.Button,{variant:"outline",onClick:()=>ac(!1),children:"Tutup"})})]})}),(0,b.jsx)(x.Dialog,{open:_,onOpenChange:aa,children:(0,b.jsxs)(x.DialogContent,{children:[(0,b.jsxs)(x.DialogHeader,{children:[(0,b.jsx)(x.DialogTitle,{children:"Hapus Obat"}),(0,b.jsxs)(x.DialogDescription,{children:['Apakah Anda yakin ingin menghapus obat "',ad?.name,'"?',(ad?.current_stock||0)>0&&(0,b.jsxs)("span",{className:"block mt-2 text-destructive",children:["Obat ini masih memiliki stok ",ad?.current_stock,"!"]})]})]}),(0,b.jsxs)(x.DialogFooter,{children:[(0,b.jsx)(q.Button,{variant:"outline",onClick:()=>aa(!1),children:"Batal"}),(0,b.jsxs)(q.Button,{variant:"destructive",onClick:ax,disabled:ah,children:[ah&&(0,b.jsx)(l.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Hapus"]})]})]})})]})}a.s(["default",()=>E])}];

//# sourceMappingURL=src_app_%28dashboard%29_pharmacy_medicines_page_tsx_7cb59a94._.js.map