{"version":3,"sources":["../../../../src/app/%28dashboard%29/pharmacy/reports/stock-out/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useCallback } from \"react\";\nimport { format, startOfMonth, endOfMonth, parseISO } from \"date-fns\";\nimport { id as localeId } from \"date-fns/locale\";\nimport * as XLSX from \"xlsx\";\nimport {\n  Search,\n  Filter,\n  FileSpreadsheet,\n  ArrowDownCircle,\n  Loader2,\n  Calendar,\n  Package,\n  TrendingDown,\n  AlertTriangle,\n  Eye,\n  Printer,\n} from \"lucide-react\";\nimport { toast } from \"sonner\";\n\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Pagination } from \"@/components/ui/pagination\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\n\nimport {\n  medicineService,\n  stockMovementService,\n} from \"@/services/pharmacy.service\";\nimport { useClinicSettings } from \"@/providers/clinic-settings-provider\";\nimport type {\n  PharmacyReportFilters,\n  StockMovement,\n  StockMovementStats,\n  StockMovementReason,\n  Medicine,\n  StockReportSummary,\n} from \"@/types/pharmacy\";\nimport { MOVEMENT_REASON_LABELS } from \"@/types/pharmacy\";\n\nexport default function StockOutReportPage() {\n  // Clinic settings for logo and name\n  const { settings: clinicSettings } = useClinicSettings();\n\n  // State\n  const [movements, setMovements] = useState<StockMovement[]>([]);\n  const [summary, setSummary] = useState<StockReportSummary | null>(null);\n  const [stats, setStats] = useState<StockMovementStats | null>(null);\n  const [medicines, setMedicines] = useState<Medicine[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [statsLoading, setStatsLoading] = useState(true);\n  const [exporting, setExporting] = useState(false);\n  const [printing, setPrinting] = useState(false);\n  const [allMovements, setAllMovements] = useState<StockMovement[]>([]);\n\n  // Pagination\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n  const [totalItems, setTotalItems] = useState(0);\n\n  // Filters\n  const [filters, setFilters] = useState<PharmacyReportFilters>({\n    start_date: format(startOfMonth(new Date()), \"yyyy-MM-dd\"),\n    end_date: format(endOfMonth(new Date()), \"yyyy-MM-dd\"),\n    medicine_id: undefined,\n    reason: undefined,\n    group_by: undefined,\n    page: 1,\n    per_page: 20,\n  });\n  const [showFilters, setShowFilters] = useState(true);\n  const [activeTab, setActiveTab] = useState<\"detail\" | \"summary\">(\"detail\");\n  const [summaryGroupBy, setSummaryGroupBy] = useState<\n    \"date\" | \"medicine\" | \"reason\"\n  >(\"reason\");\n\n  // Detail modal\n  const [detailModalOpen, setDetailModalOpen] = useState(false);\n  const [selectedMovement, setSelectedMovement] =\n    useState<StockMovement | null>(null);\n\n  // Get movement reasons that are stock OUT\n  const stockOutReasons: StockMovementReason[] = [\n    \"sales\",\n    \"adjustment_minus\",\n    \"return_supplier\",\n    \"expired\",\n    \"damage\",\n    \"transfer_out\",\n  ];\n\n  // Fetch data\n  const fetchMovements = useCallback(async () => {\n    setLoading(true);\n    try {\n      const response = await stockMovementService.getStockMovements({\n        movement_type: \"out\",\n        start_date: filters.start_date,\n        end_date: filters.end_date,\n        medicine_id: filters.medicine_id,\n        reason: filters.reason,\n        page: currentPage,\n        per_page: filters.per_page,\n      });\n      setMovements(response.data);\n      setTotalPages(response.last_page);\n      setTotalItems(response.total);\n    } catch (error) {\n      console.error(\"Error fetching stock movements:\", error);\n      toast.error(\"Gagal memuat data laporan\");\n    } finally {\n      setLoading(false);\n    }\n  }, [filters, currentPage]);\n\n  // Fetch all movements for export/print\n  const fetchAllMovements = useCallback(async () => {\n    try {\n      const response = await stockMovementService.getStockMovements({\n        movement_type: \"out\",\n        start_date: filters.start_date,\n        end_date: filters.end_date,\n        medicine_id: filters.medicine_id,\n        reason: filters.reason,\n        page: 1,\n        per_page: 10000,\n      });\n      setAllMovements(response.data);\n    } catch (error) {\n      console.error(\"Error fetching all movements:\", error);\n    }\n  }, [\n    filters.start_date,\n    filters.end_date,\n    filters.medicine_id,\n    filters.reason,\n  ]);\n\n  const fetchStats = useCallback(async () => {\n    setStatsLoading(true);\n    try {\n      const data = await stockMovementService.getStockMovementStats(\n        filters.start_date,\n        filters.end_date,\n      );\n      setStats(data);\n    } catch (error) {\n      console.error(\"Error fetching stats:\", error);\n    } finally {\n      setStatsLoading(false);\n    }\n  }, [filters.start_date, filters.end_date]);\n\n  const fetchSummary = useCallback(async () => {\n    try {\n      const response = await stockMovementService.getSummary(\n        filters.start_date,\n        filters.end_date,\n      );\n      // Transform summary data\n      const summaryData: StockReportSummary = {\n        total_items: response.summary.length,\n        total_quantity: response.summary.reduce(\n          (acc, item) => acc + (item.total_quantity || 0),\n          0,\n        ),\n        total_value: response.summary.reduce(\n          (acc, item) => acc + (item.total_value || 0),\n          0,\n        ),\n        by_reason: response.summary.map((item) => ({\n          reason: item.reason,\n          reason_label:\n            MOVEMENT_REASON_LABELS[\n              item.reason as keyof typeof MOVEMENT_REASON_LABELS\n            ] || item.reason,\n          total_quantity: item.total_quantity || 0,\n          total_value: item.total_value || 0,\n          transaction_count: item.count || 0,\n        })),\n      };\n      setSummary(summaryData);\n    } catch (error) {\n      console.error(\"Error fetching summary:\", error);\n    }\n  }, [filters.start_date, filters.end_date]);\n\n  const fetchMedicines = async () => {\n    try {\n      const response = await medicineService.getActiveMedicines({});\n      setMedicines(response.data);\n    } catch (error) {\n      console.error(\"Error fetching medicines:\", error);\n    }\n  };\n\n  useEffect(() => {\n    fetchMedicines();\n  }, []);\n\n  useEffect(() => {\n    fetchMovements();\n    fetchStats();\n    fetchSummary();\n    fetchAllMovements();\n  }, [fetchMovements, fetchStats, fetchSummary, fetchAllMovements]);\n\n  // Handlers\n  const handleFilterChange = (key: keyof PharmacyReportFilters, value: any) => {\n    setFilters((prev) => ({ ...prev, [key]: value }));\n    setCurrentPage(1);\n  };\n\n  const handleApplyFilters = () => {\n    fetchMovements();\n    fetchStats();\n    fetchSummary();\n    fetchAllMovements();\n  };\n\n  const handleResetFilters = () => {\n    setFilters({\n      start_date: format(startOfMonth(new Date()), \"yyyy-MM-dd\"),\n      end_date: format(endOfMonth(new Date()), \"yyyy-MM-dd\"),\n      medicine_id: undefined,\n      reason: undefined,\n      group_by: undefined,\n      page: 1,\n      per_page: 20,\n    });\n    setCurrentPage(1);\n  };\n\n  // Export to Excel\n  const handleExportExcel = () => {\n    if (allMovements.length === 0) {\n      toast.error(\"Tidak ada data untuk di-export\");\n      return;\n    }\n\n    setExporting(true);\n\n    try {\n      const workbook = XLSX.utils.book_new();\n\n      // Sheet 1: Ringkasan\n      const summaryData = [\n        [\"LAPORAN STOK KELUAR\"],\n        [\n          `Periode: ${format(parseISO(filters.start_date), \"dd MMMM yyyy\", { locale: localeId })} - ${format(parseISO(filters.end_date), \"dd MMMM yyyy\", { locale: localeId })}`,\n        ],\n        [],\n        [\"RINGKASAN\"],\n        [\"Total Stok Keluar\", stats?.total_out || 0],\n        [\"Total Transaksi\", totalItems],\n        [],\n        [\"RINGKASAN PER ALASAN\"],\n        [\"Alasan\", \"Jumlah Transaksi\", \"Total Qty\"],\n        ...(summary?.by_reason\n          ?.filter((r) =>\n            stockOutReasons.includes(r.reason as StockMovementReason),\n          )\n          .map((r) => [\n            r.reason_label,\n            r.transaction_count,\n            r.total_quantity,\n          ]) || []),\n      ];\n\n      const summarySheet = XLSX.utils.aoa_to_sheet(summaryData);\n      XLSX.utils.book_append_sheet(workbook, summarySheet, \"Ringkasan\");\n\n      // Sheet 2: Detail Transaksi\n      const detailSheetData = [\n        [\"DETAIL STOK KELUAR\"],\n        [\n          `Periode: ${format(parseISO(filters.start_date), \"dd MMMM yyyy\", { locale: localeId })} - ${format(parseISO(filters.end_date), \"dd MMMM yyyy\", { locale: localeId })}`,\n        ],\n        [],\n        [\n          \"Tanggal\",\n          \"No. Mutasi\",\n          \"Kode Obat\",\n          \"Nama Obat\",\n          \"Batch\",\n          \"Exp Date\",\n          \"Alasan\",\n          \"Qty\",\n          \"Satuan\",\n          \"Stok Sebelum\",\n          \"Stok Sesudah\",\n          \"Catatan\",\n          \"Dibuat Oleh\",\n        ],\n        ...allMovements.map((m) => [\n          format(new Date(m.movement_date), \"dd/MM/yyyy HH:mm\"),\n          m.movement_number,\n          m.medicine?.code || \"-\",\n          m.medicine?.name || \"-\",\n          m.medicine_batch?.batch_number || \"-\",\n          m.medicine_batch?.expiry_date\n            ? format(new Date(m.medicine_batch.expiry_date), \"dd/MM/yyyy\")\n            : \"-\",\n          MOVEMENT_REASON_LABELS[m.reason] || m.reason,\n          -m.quantity,\n          m.unit,\n          m.stock_before,\n          m.stock_after,\n          m.notes || \"-\",\n          m.creator?.name || \"-\",\n        ]),\n      ];\n\n      const detailSheet = XLSX.utils.aoa_to_sheet(detailSheetData);\n      XLSX.utils.book_append_sheet(workbook, detailSheet, \"Detail Transaksi\");\n\n      // Generate filename\n      const fileName = `Laporan_Stok_Keluar_${format(parseISO(filters.start_date), \"yyyyMMdd\")}_${format(parseISO(filters.end_date), \"yyyyMMdd\")}.xlsx`;\n\n      // Download file\n      XLSX.writeFile(workbook, fileName);\n\n      toast.success(\"Export Excel berhasil!\");\n    } catch (error) {\n      console.error(\"Error exporting to Excel:\", error);\n      toast.error(\"Gagal export Excel\");\n    } finally {\n      setExporting(false);\n    }\n  };\n\n  // Print function\n  const handlePrint = () => {\n    if (allMovements.length === 0) {\n      toast.error(\"Tidak ada data untuk dicetak\");\n      return;\n    }\n\n    setPrinting(true);\n\n    try {\n      const clinicName = clinicSettings?.name || \"Klinik App\";\n      const clinicAddress = clinicSettings?.address || \"\";\n      const clinicPhone = clinicSettings?.phone || \"\";\n      const clinicLogo = clinicSettings?.logo_url || \"\";\n\n      const printWindow = window.open(\"\", \"_blank\");\n      if (!printWindow) {\n        toast.error(\"Popup diblokir. Izinkan popup untuk mencetak.\");\n        setPrinting(false);\n        return;\n      }\n\n      const getReasonBadgeStyle = (reason: string) => {\n        switch (reason) {\n          case \"sales\":\n            return \"background-color: #dbeafe; color: #1e40af;\";\n          case \"expired\":\n            return \"background-color: #fee2e2; color: #991b1b;\";\n          case \"damage\":\n            return \"background-color: #ffedd5; color: #9a3412;\";\n          case \"return_supplier\":\n            return \"background-color: #f3e8ff; color: #6b21a8;\";\n          default:\n            return \"background-color: #f3f4f6; color: #374151;\";\n        }\n      };\n\n      const printContent = `\n        <!DOCTYPE html>\n        <html>\n        <head>\n          <title>Laporan Stok Keluar - ${clinicName}</title>\n          <style>\n            * {\n              margin: 0;\n              padding: 0;\n              box-sizing: border-box;\n            }\n            body {\n              font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n              font-size: 11px;\n              line-height: 1.4;\n              color: #333;\n              padding: 15px;\n            }\n            .header {\n              display: flex;\n              align-items: center;\n              gap: 15px;\n              border-bottom: 2px solid #dc2626;\n              padding-bottom: 15px;\n              margin-bottom: 20px;\n            }\n            .logo {\n              width: 70px;\n              height: 70px;\n              object-fit: contain;\n            }\n            .logo-placeholder {\n              width: 70px;\n              height: 70px;\n              background: linear-gradient(135deg, #3B82F6 0%, #1D4ED8 100%);\n              border-radius: 12px;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              color: white;\n              font-size: 24px;\n              font-weight: bold;\n            }\n            .clinic-info {\n              flex: 1;\n            }\n            .clinic-name {\n              font-size: 20px;\n              font-weight: bold;\n              color: #1e40af;\n              margin-bottom: 3px;\n            }\n            .clinic-address {\n              font-size: 11px;\n              color: #666;\n            }\n            .report-title {\n              text-align: center;\n              margin-bottom: 20px;\n            }\n            .report-title h1 {\n              font-size: 16px;\n              font-weight: bold;\n              color: #dc2626;\n              margin-bottom: 5px;\n            }\n            .report-title p {\n              font-size: 11px;\n              color: #666;\n            }\n            .summary-cards {\n              display: grid;\n              grid-template-columns: repeat(4, 1fr);\n              gap: 10px;\n              margin-bottom: 20px;\n            }\n            .summary-card {\n              border: 1px solid #e5e7eb;\n              border-radius: 8px;\n              padding: 12px;\n              text-align: center;\n            }\n            .summary-card .label {\n              font-size: 10px;\n              color: #666;\n              margin-bottom: 5px;\n            }\n            .summary-card .value {\n              font-size: 14px;\n              font-weight: bold;\n            }\n            .summary-card .value.red { color: #dc2626; }\n            .summary-card .value.blue { color: #2563eb; }\n            .summary-card .value.orange { color: #ea580c; }\n            .section {\n              margin-bottom: 20px;\n            }\n            .section-title {\n              font-size: 13px;\n              font-weight: bold;\n              color: #dc2626;\n              margin-bottom: 10px;\n              padding-bottom: 5px;\n              border-bottom: 1px solid #e5e7eb;\n            }\n            table {\n              width: 100%;\n              border-collapse: collapse;\n              font-size: 9px;\n            }\n            th, td {\n              border: 1px solid #e5e7eb;\n              padding: 5px 6px;\n              text-align: left;\n            }\n            th {\n              background-color: #fef2f2;\n              font-weight: 600;\n              color: #991b1b;\n            }\n            tr:nth-child(even) {\n              background-color: #f9fafb;\n            }\n            .text-right {\n              text-align: right;\n            }\n            .text-center {\n              text-align: center;\n            }\n            .text-red { color: #dc2626; }\n            .font-bold { font-weight: bold; }\n            .badge {\n              display: inline-block;\n              padding: 2px 6px;\n              border-radius: 4px;\n              font-size: 8px;\n              font-weight: 500;\n            }\n            .footer {\n              margin-top: 30px;\n              padding-top: 15px;\n              border-top: 1px solid #e5e7eb;\n              display: flex;\n              justify-content: space-between;\n              font-size: 10px;\n              color: #666;\n            }\n            @media print {\n              body { padding: 0; }\n              .no-print { display: none; }\n              @page { margin: 10mm; size: landscape; }\n            }\n          </style>\n        </head>\n        <body>\n          <div class=\"header\">\n            ${\n              clinicLogo\n                ? `<img src=\"${clinicLogo}\" alt=\"${clinicName}\" class=\"logo\" />`\n                : `<div class=\"logo-placeholder\">+</div>`\n            }\n            <div class=\"clinic-info\">\n              <div class=\"clinic-name\">${clinicName}</div>\n              <div class=\"clinic-address\">\n                ${clinicAddress ? clinicAddress + \"<br/>\" : \"\"}\n                ${clinicPhone ? \"Telp: \" + clinicPhone : \"\"}\n              </div>\n            </div>\n          </div>\n\n          <div class=\"report-title\">\n            <h1>LAPORAN STOK KELUAR</h1>\n            <p>Periode: ${format(parseISO(filters.start_date), \"dd MMMM yyyy\", { locale: localeId })} - ${format(parseISO(filters.end_date), \"dd MMMM yyyy\", { locale: localeId })}</p>\n          </div>\n\n          <div class=\"summary-cards\">\n            <div class=\"summary-card\">\n              <div class=\"label\">Total Stok Keluar</div>\n              <div class=\"value red\">-${stats?.total_out || 0}</div>\n            </div>\n            <div class=\"summary-card\">\n              <div class=\"label\">Penjualan/Penyerahan</div>\n              <div class=\"value blue\">${stats?.by_reason?.find((r) => r.reason === \"sales\")?.total_quantity || 0}</div>\n            </div>\n            <div class=\"summary-card\">\n              <div class=\"label\">Kadaluarsa</div>\n              <div class=\"value red\">${stats?.by_reason?.find((r) => r.reason === \"expired\")?.total_quantity || 0}</div>\n            </div>\n            <div class=\"summary-card\">\n              <div class=\"label\">Total Transaksi</div>\n              <div class=\"value orange\">${totalItems}</div>\n            </div>\n          </div>\n\n          <div class=\"section\">\n            <div class=\"section-title\">Ringkasan Per Alasan</div>\n            <table>\n              <thead>\n                <tr>\n                  <th>Alasan</th>\n                  <th class=\"text-center\">Jumlah Transaksi</th>\n                  <th class=\"text-right\">Total Qty</th>\n                </tr>\n              </thead>\n              <tbody>\n                ${\n                  summary?.by_reason\n                    ?.filter((r) =>\n                      stockOutReasons.includes(r.reason as StockMovementReason),\n                    )\n                    .map(\n                      (r) => `\n                        <tr>\n                          <td><span class=\"badge\" style=\"${getReasonBadgeStyle(r.reason)}\">${r.reason_label}</span></td>\n                          <td class=\"text-center\">${r.transaction_count}</td>\n                          <td class=\"text-right text-red font-bold\">-${r.total_quantity}</td>\n                        </tr>\n                      `,\n                    )\n                    .join(\"\") ||\n                  '<tr><td colspan=\"3\" class=\"text-center\">Tidak ada data</td></tr>'\n                }\n              </tbody>\n            </table>\n          </div>\n\n          <div class=\"section\">\n            <div class=\"section-title\">Detail Transaksi Stok Keluar</div>\n            <table>\n              <thead>\n                <tr>\n                  <th>Tanggal</th>\n                  <th>No. Mutasi</th>\n                  <th>Nama Obat</th>\n                  <th>Batch</th>\n                  <th>Alasan</th>\n                  <th class=\"text-right\">Qty</th>\n                  <th class=\"text-right\">Stok Akhir</th>\n                  <th>Catatan</th>\n                </tr>\n              </thead>\n              <tbody>\n                ${\n                  allMovements\n                    .map(\n                      (m) => `\n                        <tr>\n                          <td>${format(new Date(m.movement_date), \"dd/MM/yyyy\")}</td>\n                          <td>${m.movement_number}</td>\n                          <td>${m.medicine?.name || \"-\"}</td>\n                          <td>${m.medicine_batch?.batch_number || \"-\"}</td>\n                          <td><span class=\"badge\" style=\"${getReasonBadgeStyle(m.reason)}\">${MOVEMENT_REASON_LABELS[m.reason] || m.reason}</span></td>\n                          <td class=\"text-right text-red font-bold\">-${m.quantity}</td>\n                          <td class=\"text-right\">${m.stock_after}</td>\n                          <td>${m.notes || \"-\"}</td>\n                        </tr>\n                      `,\n                    )\n                    .join(\"\") ||\n                  '<tr><td colspan=\"8\" class=\"text-center\">Tidak ada data</td></tr>'\n                }\n              </tbody>\n            </table>\n          </div>\n\n          <div class=\"footer\">\n            <div>Dicetak pada: ${format(new Date(), \"dd MMMM yyyy HH:mm\", { locale: localeId })}</div>\n            <div>${clinicName}</div>\n          </div>\n\n          <script>\n            window.onload = function() {\n              window.print();\n              window.onafterprint = function() {\n                window.close();\n              };\n            };\n          </script>\n        </body>\n        </html>\n      `;\n\n      printWindow.document.write(printContent);\n      printWindow.document.close();\n\n      toast.success(\"Menyiapkan halaman cetak...\");\n    } catch (error) {\n      console.error(\"Error printing:\", error);\n      toast.error(\"Gagal mencetak\");\n    } finally {\n      setPrinting(false);\n    }\n  };\n\n  const handleViewDetail = (movement: StockMovement) => {\n    setSelectedMovement(movement);\n    setDetailModalOpen(true);\n  };\n\n  // Get reason badge color\n  const getReasonBadgeClass = (reason: StockMovementReason) => {\n    switch (reason) {\n      case \"sales\":\n        return \"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300\";\n      case \"expired\":\n        return \"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300\";\n      case \"damage\":\n        return \"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300\";\n      case \"return_supplier\":\n        return \"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300\";\n      default:\n        return \"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300\";\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold tracking-tight\">\n            Laporan Stok Keluar\n          </h1>\n          <p className=\"text-muted-foreground\">\n            Laporan obat keluar berdasarkan tanggal, alasan, dan obat\n          </p>\n        </div>\n        <div className=\"flex gap-2\">\n          <Button\n            variant=\"outline\"\n            onClick={handlePrint}\n            disabled={printing || loading}\n          >\n            {printing ? (\n              <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n            ) : (\n              <Printer className=\"mr-2 h-4 w-4\" />\n            )}\n            Print\n          </Button>\n          <Button onClick={handleExportExcel} disabled={exporting || loading}>\n            {exporting ? (\n              <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n            ) : (\n              <FileSpreadsheet className=\"mr-2 h-4 w-4\" />\n            )}\n            Export Excel\n          </Button>\n        </div>\n      </div>\n\n      {/* Stats Cards */}\n      <div className=\"grid gap-4 md:grid-cols-4\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">\n              Total Stok Keluar\n            </CardTitle>\n            <TrendingDown className=\"h-4 w-4 text-red-500\" />\n          </CardHeader>\n          <CardContent>\n            {statsLoading ? (\n              <Skeleton className=\"h-8 w-20\" />\n            ) : (\n              <div className=\"text-2xl font-bold text-red-600\">\n                -{stats?.total_out || 0}\n              </div>\n            )}\n            <p className=\"text-xs text-muted-foreground\">\n              {format(new Date(filters.start_date), \"dd MMM\", {\n                locale: localeId,\n              })}{\" \"}\n              -{\" \"}\n              {format(new Date(filters.end_date), \"dd MMM yyyy\", {\n                locale: localeId,\n              })}\n            </p>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">\n              Penjualan/Penyerahan\n            </CardTitle>\n            <Package className=\"h-4 w-4 text-blue-500\" />\n          </CardHeader>\n          <CardContent>\n            {statsLoading ? (\n              <Skeleton className=\"h-8 w-20\" />\n            ) : (\n              <div className=\"text-2xl font-bold text-blue-600\">\n                {stats?.by_reason?.find((r) => r.reason === \"sales\")\n                  ?.total_quantity || 0}\n              </div>\n            )}\n            <p className=\"text-xs text-muted-foreground\">Unit terjual</p>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Kadaluarsa</CardTitle>\n            <AlertTriangle className=\"h-4 w-4 text-red-500\" />\n          </CardHeader>\n          <CardContent>\n            {statsLoading ? (\n              <Skeleton className=\"h-8 w-20\" />\n            ) : (\n              <div className=\"text-2xl font-bold text-red-600\">\n                {stats?.by_reason?.find((r) => r.reason === \"expired\")\n                  ?.total_quantity || 0}\n              </div>\n            )}\n            <p className=\"text-xs text-muted-foreground\">Unit kadaluarsa</p>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Item</CardTitle>\n            <Calendar className=\"h-4 w-4 text-orange-500\" />\n          </CardHeader>\n          <CardContent>\n            {loading ? (\n              <Skeleton className=\"h-8 w-20\" />\n            ) : (\n              <div className=\"text-2xl font-bold text-orange-600\">\n                {totalItems}\n              </div>\n            )}\n            <p className=\"text-xs text-muted-foreground\">Data ditemukan</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Filters */}\n      <Card>\n        <CardHeader className=\"pb-3\">\n          <div className=\"flex items-center justify-between\">\n            <CardTitle className=\"text-base\">Filter Laporan</CardTitle>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => setShowFilters(!showFilters)}\n            >\n              <Filter className=\"mr-2 h-4 w-4\" />\n              {showFilters ? \"Sembunyikan\" : \"Tampilkan\"}\n            </Button>\n          </div>\n        </CardHeader>\n        {showFilters && (\n          <CardContent className=\"space-y-4\">\n            <div className=\"grid gap-4 md:grid-cols-4\">\n              <div className=\"space-y-2\">\n                <Label>Tanggal Mulai</Label>\n                <Input\n                  type=\"date\"\n                  value={filters.start_date}\n                  onChange={(e) =>\n                    handleFilterChange(\"start_date\", e.target.value)\n                  }\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label>Tanggal Akhir</Label>\n                <Input\n                  type=\"date\"\n                  value={filters.end_date}\n                  onChange={(e) =>\n                    handleFilterChange(\"end_date\", e.target.value)\n                  }\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label>Alasan Keluar</Label>\n                <Select\n                  value={filters.reason || \"all\"}\n                  onValueChange={(value) =>\n                    handleFilterChange(\n                      \"reason\",\n                      value === \"all\"\n                        ? undefined\n                        : (value as StockMovementReason),\n                    )\n                  }\n                >\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Semua Alasan\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">Semua Alasan</SelectItem>\n                    {stockOutReasons.map((reason) => (\n                      <SelectItem key={reason} value={reason}>\n                        {MOVEMENT_REASON_LABELS[reason]}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n              <div className=\"space-y-2\">\n                <Label>Obat</Label>\n                <Select\n                  value={filters.medicine_id?.toString() || \"all\"}\n                  onValueChange={(value) =>\n                    handleFilterChange(\n                      \"medicine_id\",\n                      value === \"all\" ? undefined : parseInt(value),\n                    )\n                  }\n                >\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Semua Obat\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">Semua Obat</SelectItem>\n                    {medicines.map((medicine) => (\n                      <SelectItem\n                        key={medicine.id}\n                        value={medicine.id.toString()}\n                      >\n                        {medicine.name}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n            <div className=\"flex gap-2\">\n              <Button onClick={handleApplyFilters}>\n                <Search className=\"mr-2 h-4 w-4\" />\n                Terapkan Filter\n              </Button>\n              <Button variant=\"outline\" onClick={handleResetFilters}>\n                Reset\n              </Button>\n            </div>\n          </CardContent>\n        )}\n      </Card>\n\n      {/* Tabs: Detail / Summary */}\n      <Tabs\n        value={activeTab}\n        onValueChange={(v) => setActiveTab(v as \"detail\" | \"summary\")}\n      >\n        <TabsList>\n          <TabsTrigger value=\"detail\">Detail Transaksi</TabsTrigger>\n          <TabsTrigger value=\"summary\">Ringkasan</TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"detail\" className=\"mt-4\">\n          {/* Detail Table */}\n          <Card>\n            <CardContent className=\"p-0\">\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>Tanggal</TableHead>\n                    <TableHead>No. Mutasi</TableHead>\n                    <TableHead>Obat</TableHead>\n                    <TableHead>Batch</TableHead>\n                    <TableHead>Alasan</TableHead>\n                    <TableHead className=\"text-right\">Qty</TableHead>\n                    <TableHead className=\"text-right\">Stok Akhir</TableHead>\n                    <TableHead className=\"text-right\">Aksi</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {loading ? (\n                    [...Array(5)].map((_, i) => (\n                      <TableRow key={i}>\n                        <TableCell colSpan={8}>\n                          <Skeleton className=\"h-12 w-full\" />\n                        </TableCell>\n                      </TableRow>\n                    ))\n                  ) : movements.length === 0 ? (\n                    <TableRow>\n                      <TableCell colSpan={8} className=\"text-center py-8\">\n                        <div className=\"flex flex-col items-center gap-2\">\n                          <ArrowDownCircle className=\"h-8 w-8 text-muted-foreground\" />\n                          <p className=\"text-muted-foreground\">\n                            Tidak ada data stok keluar pada periode ini\n                          </p>\n                        </div>\n                      </TableCell>\n                    </TableRow>\n                  ) : (\n                    movements.map((movement) => (\n                      <TableRow key={movement.id}>\n                        <TableCell>\n                          {format(\n                            new Date(movement.movement_date),\n                            \"dd MMM yyyy\",\n                            {\n                              locale: localeId,\n                            },\n                          )}\n                        </TableCell>\n                        <TableCell className=\"font-medium\">\n                          {movement.movement_number}\n                        </TableCell>\n                        <TableCell>{movement.medicine?.name || \"-\"}</TableCell>\n                        <TableCell>\n                          {movement.medicine_batch?.batch_number || \"-\"}\n                        </TableCell>\n                        <TableCell>\n                          <Badge\n                            className={getReasonBadgeClass(movement.reason)}\n                          >\n                            {MOVEMENT_REASON_LABELS[movement.reason] ||\n                              movement.reason}\n                          </Badge>\n                        </TableCell>\n                        <TableCell className=\"text-right text-red-600 font-medium\">\n                          -{movement.quantity} {movement.unit}\n                        </TableCell>\n                        <TableCell className=\"text-right font-medium\">\n                          {movement.stock_after}\n                        </TableCell>\n                        <TableCell className=\"text-right\">\n                          <Button\n                            variant=\"ghost\"\n                            size=\"icon\"\n                            onClick={() => handleViewDetail(movement)}\n                          >\n                            <Eye className=\"h-4 w-4\" />\n                          </Button>\n                        </TableCell>\n                      </TableRow>\n                    ))\n                  )}\n                </TableBody>\n              </Table>\n            </CardContent>\n            {totalPages > 1 && (\n              <div className=\"flex items-center justify-between px-4 py-4 border-t\">\n                <p className=\"text-sm text-muted-foreground\">\n                  Menampilkan {movements.length} dari {totalItems} data\n                </p>\n                <Pagination\n                  currentPage={currentPage}\n                  totalPages={totalPages}\n                  onPageChange={setCurrentPage}\n                />\n              </div>\n            )}\n          </Card>\n        </TabsContent>\n\n        <TabsContent value=\"summary\" className=\"mt-4\">\n          {/* Summary View */}\n          <div className=\"space-y-4\">\n            <Card>\n              <CardHeader className=\"pb-3\">\n                <div className=\"flex items-center justify-between\">\n                  <CardTitle className=\"text-base\">\n                    Kelompokkan Berdasarkan\n                  </CardTitle>\n                  <Select\n                    value={summaryGroupBy}\n                    onValueChange={(v) =>\n                      setSummaryGroupBy(v as \"date\" | \"medicine\" | \"reason\")\n                    }\n                  >\n                    <SelectTrigger className=\"w-48\">\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"date\">Tanggal</SelectItem>\n                      <SelectItem value=\"reason\">Alasan</SelectItem>\n                      <SelectItem value=\"medicine\">Obat</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n              </CardHeader>\n            </Card>\n\n            {/* Summary by Reason */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-base\">\n                  Ringkasan Berdasarkan Alasan\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <Table>\n                  <TableHeader>\n                    <TableRow>\n                      <TableHead>Alasan</TableHead>\n                      <TableHead className=\"text-right\">\n                        Jumlah Transaksi\n                      </TableHead>\n                      <TableHead className=\"text-right\">Total Qty</TableHead>\n                    </TableRow>\n                  </TableHeader>\n                  <TableBody>\n                    {summary?.by_reason\n                      ?.filter((r) =>\n                        stockOutReasons.includes(\n                          r.reason as StockMovementReason,\n                        ),\n                      )\n                      .map((item, index) => (\n                        <TableRow key={index}>\n                          <TableCell>\n                            <Badge\n                              className={getReasonBadgeClass(\n                                item.reason as StockMovementReason,\n                              )}\n                            >\n                              {item.reason_label}\n                            </Badge>\n                          </TableCell>\n                          <TableCell className=\"text-right\">\n                            {item.transaction_count}\n                          </TableCell>\n                          <TableCell className=\"text-right font-medium text-red-600\">\n                            -{item.total_quantity}\n                          </TableCell>\n                        </TableRow>\n                      ))}\n                    {(!summary?.by_reason ||\n                      summary.by_reason.filter((r) =>\n                        stockOutReasons.includes(\n                          r.reason as StockMovementReason,\n                        ),\n                      ).length === 0) && (\n                      <TableRow>\n                        <TableCell\n                          colSpan={3}\n                          className=\"text-center py-4 text-muted-foreground\"\n                        >\n                          Tidak ada data\n                        </TableCell>\n                      </TableRow>\n                    )}\n                  </TableBody>\n                </Table>\n              </CardContent>\n            </Card>\n\n            {/* Total Summary */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-base\">Total Keseluruhan</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"grid gap-4 md:grid-cols-3\">\n                  <div className=\"p-4 bg-red-50 dark:bg-red-950 rounded-lg\">\n                    <p className=\"text-sm text-muted-foreground\">\n                      Total Qty Keluar\n                    </p>\n                    <p className=\"text-2xl font-bold text-red-600\">\n                      -\n                      {summary?.by_reason\n                        ?.filter((r) =>\n                          stockOutReasons.includes(\n                            r.reason as StockMovementReason,\n                          ),\n                        )\n                        .reduce((acc, r) => acc + r.total_quantity, 0) || 0}\n                    </p>\n                  </div>\n                  <div className=\"p-4 bg-blue-50 dark:bg-blue-950 rounded-lg\">\n                    <p className=\"text-sm text-muted-foreground\">\n                      Total Transaksi\n                    </p>\n                    <p className=\"text-2xl font-bold text-blue-600\">\n                      {summary?.by_reason\n                        ?.filter((r) =>\n                          stockOutReasons.includes(\n                            r.reason as StockMovementReason,\n                          ),\n                        )\n                        .reduce((acc, r) => acc + r.transaction_count, 0) || 0}\n                    </p>\n                  </div>\n                  <div className=\"p-4 bg-purple-50 dark:bg-purple-950 rounded-lg\">\n                    <p className=\"text-sm text-muted-foreground\">\n                      Kategori Alasan\n                    </p>\n                    <p className=\"text-2xl font-bold text-purple-600\">\n                      {summary?.by_reason?.filter((r) =>\n                        stockOutReasons.includes(\n                          r.reason as StockMovementReason,\n                        ),\n                      ).length || 0}\n                    </p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </TabsContent>\n      </Tabs>\n\n      {/* Detail Modal */}\n      <Dialog open={detailModalOpen} onOpenChange={setDetailModalOpen}>\n        <DialogContent className=\"max-w-lg\">\n          <DialogHeader>\n            <DialogTitle>Detail Stok Keluar</DialogTitle>\n            <DialogDescription>\n              {selectedMovement?.movement_number}\n            </DialogDescription>\n          </DialogHeader>\n\n          {selectedMovement && (\n            <div className=\"space-y-4\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">Obat</p>\n                  <p className=\"font-medium\">\n                    {selectedMovement.medicine?.name}\n                  </p>\n                </div>\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">Batch</p>\n                  <p className=\"font-medium\">\n                    {selectedMovement.medicine_batch?.batch_number || \"-\"}\n                  </p>\n                </div>\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">Tanggal</p>\n                  <p className=\"font-medium\">\n                    {format(\n                      new Date(selectedMovement.movement_date),\n                      \"dd MMMM yyyy HH:mm\",\n                      {\n                        locale: localeId,\n                      },\n                    )}\n                  </p>\n                </div>\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">Tipe</p>\n                  <Badge className=\"bg-red-100 text-red-800\">\n                    <ArrowDownCircle className=\"mr-1 h-3 w-3\" />\n                    Keluar\n                  </Badge>\n                </div>\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">Alasan</p>\n                  <Badge\n                    className={getReasonBadgeClass(selectedMovement.reason)}\n                  >\n                    {MOVEMENT_REASON_LABELS[selectedMovement.reason] ||\n                      selectedMovement.reason}\n                  </Badge>\n                </div>\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">Jumlah</p>\n                  <p className=\"font-medium text-red-600\">\n                    -{selectedMovement.quantity} {selectedMovement.unit}\n                  </p>\n                </div>\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">Stok Sebelum</p>\n                  <p className=\"font-medium\">{selectedMovement.stock_before}</p>\n                </div>\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">Stok Sesudah</p>\n                  <p className=\"font-medium\">{selectedMovement.stock_after}</p>\n                </div>\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">Dibuat Oleh</p>\n                  <p className=\"font-medium\">\n                    {selectedMovement.creator?.name || \"-\"}\n                  </p>\n                </div>\n                {selectedMovement.reference_type && (\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Referensi</p>\n                    <p className=\"font-medium\">\n                      {selectedMovement.reference_type} #\n                      {selectedMovement.reference_id}\n                    </p>\n                  </div>\n                )}\n              </div>\n              {selectedMovement.notes && (\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">Catatan</p>\n                  <p className=\"font-medium\">{selectedMovement.notes}</p>\n                </div>\n              )}\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}