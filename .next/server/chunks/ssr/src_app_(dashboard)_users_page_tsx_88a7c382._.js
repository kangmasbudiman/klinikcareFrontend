module.exports=[12203,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(46271),e=a.i(23292),f=a.i(60246),g=a.i(46864),h=a.i(70106);let i=(0,h.default)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);var j=a.i(3314),k=a.i(87532),l=a.i(15618),m=a.i(69520),n=a.i(81464),o=a.i(91119),p=a.i(99570),q=a.i(66718),r=a.i(80701),s=a.i(77156),t=a.i(24569),u=a.i(81560),v=a.i(30206),w=a.i(17755),x=a.i(13749),y=a.i(50522),z=a.i(67900),A=a.i(6015),B=a.i(35732),C=a.i(72233),D=a.i(86304),E=a.i(97400),F=a.i(68114);function G(){return(0,b.jsxs)(A.TableRow,{children:[(0,b.jsx)(A.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"h-10 w-10 rounded-full bg-muted animate-pulse"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"h-4 w-32 bg-muted animate-pulse rounded"}),(0,b.jsx)("div",{className:"h-3 w-40 bg-muted animate-pulse rounded"})]})]})}),(0,b.jsx)(A.TableCell,{children:(0,b.jsx)("div",{className:"h-6 w-20 bg-muted animate-pulse rounded-full"})}),(0,b.jsx)(A.TableCell,{children:(0,b.jsx)("div",{className:"h-6 w-24 bg-muted animate-pulse rounded-full"})}),(0,b.jsx)(A.TableCell,{children:(0,b.jsx)("div",{className:"h-6 w-16 bg-muted animate-pulse rounded-full"})}),(0,b.jsx)(A.TableCell,{children:(0,b.jsx)("div",{className:"h-4 w-24 bg-muted animate-pulse rounded"})}),(0,b.jsx)(A.TableCell,{children:(0,b.jsx)("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"})})]})}function H(){return(0,b.jsx)(A.TableRow,{children:(0,b.jsx)(A.TableCell,{colSpan:6,className:"h-48",children:(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center text-center",children:[(0,b.jsx)("div",{className:"p-4 rounded-full bg-muted/50 mb-4",children:(0,b.jsx)(f.Users,{className:"h-8 w-8 text-muted-foreground"})}),(0,b.jsx)("h3",{className:"font-semibold text-lg",children:"Tidak ada pengguna"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Belum ada pengguna yang sesuai dengan filter"})]})})})}let I=a=>"dokter"===a||"perawat"===a;function J({users:a,isLoading:c=!1,currentPage:e,totalPages:f,onPageChange:g,onView:h,onEdit:i,onDelete:j,onToggleStatus:k,onAssignDepartments:l}){return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"rounded-xl border bg-card overflow-hidden",children:(0,b.jsxs)(A.Table,{children:[(0,b.jsx)(A.TableHeader,{children:(0,b.jsxs)(A.TableRow,{className:"bg-muted/50 hover:bg-muted/50",children:[(0,b.jsx)(A.TableHead,{className:"font-semibold",children:"Pengguna"}),(0,b.jsx)(A.TableHead,{className:"font-semibold",children:"Role"}),(0,b.jsx)(A.TableHead,{className:"font-semibold",children:"Poli"}),(0,b.jsx)(A.TableHead,{className:"font-semibold",children:"Status"}),(0,b.jsx)(A.TableHead,{className:"font-semibold",children:"Bergabung"}),(0,b.jsx)(A.TableHead,{className:"font-semibold w-[80px]",children:"Aksi"})]})}),(0,b.jsx)(A.TableBody,{children:c?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(G,{}),(0,b.jsx)(G,{}),(0,b.jsx)(G,{}),(0,b.jsx)(G,{}),(0,b.jsx)(G,{})]}):0===a.length?(0,b.jsx)(H,{}):a.map((a,c)=>(0,b.jsxs)(d.motion.tr,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.05*c},className:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",children:[(0,b.jsx)(A.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(C.Avatar,{className:"h-10 w-10 border",children:[(0,b.jsx)(C.AvatarImage,{src:a.avatar,alt:a.name}),(0,b.jsx)(C.AvatarFallback,{className:"bg-primary/10 text-primary text-sm",children:(0,F.getInitials)(a.name)})]}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("p",{className:"font-medium truncate",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground truncate",children:a.email})]})]})}),(0,b.jsx)(A.TableCell,{children:(0,b.jsx)(D.Badge,{variant:a.role,children:E.ROLE_LABELS[a.role]})}),(0,b.jsx)(A.TableCell,{children:I(a.role)?a.departments&&a.departments.length>0?(0,b.jsxs)("div",{className:"flex flex-wrap gap-1",children:[a.departments.slice(0,2).map(a=>(0,b.jsxs)(D.Badge,{variant:"outline",className:"text-xs",style:{borderColor:a.color,color:a.color},children:[a.is_primary&&"★ ",a.name]},a.id)),a.departments.length>2&&(0,b.jsxs)(D.Badge,{variant:"outline",className:"text-xs",children:["+",a.departments.length-2]})]}):(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"Belum di-assign"}):(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"-"})}),(0,b.jsx)(A.TableCell,{children:(0,b.jsx)(D.Badge,{variant:a.is_active?"success":"error",children:a.is_active?"Aktif":"Nonaktif"})}),(0,b.jsx)(A.TableCell,{className:"text-muted-foreground",children:(0,F.formatDate)(a.created_at)}),(0,b.jsx)(A.TableCell,{children:(0,b.jsxs)(B.DropdownMenu,{children:[(0,b.jsx)(B.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(p.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:[(0,b.jsx)(w.MoreHorizontal,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Buka menu"})]})}),(0,b.jsxs)(B.DropdownMenuContent,{align:"end",className:"w-48",children:[(0,b.jsxs)(B.DropdownMenuItem,{onClick:()=>h(a),children:[(0,b.jsx)(s.Eye,{className:"mr-2 h-4 w-4"}),"Lihat Detail"]}),(0,b.jsxs)(B.DropdownMenuItem,{onClick:()=>i(a),children:[(0,b.jsx)(t.Edit,{className:"mr-2 h-4 w-4"}),"Edit"]}),I(a.role)&&l&&(0,b.jsxs)(B.DropdownMenuItem,{onClick:()=>l(a),children:[(0,b.jsx)(z.Building2,{className:"mr-2 h-4 w-4"}),"Assign Poli"]}),(0,b.jsxs)(B.DropdownMenuItem,{onClick:()=>k(a),children:[(0,b.jsx)(v.Power,{className:"mr-2 h-4 w-4"}),a.is_active?"Nonaktifkan":"Aktifkan"]}),(0,b.jsx)(B.DropdownMenuSeparator,{}),(0,b.jsxs)(B.DropdownMenuItem,{onClick:()=>j(a),className:"text-destructive focus:text-destructive",children:[(0,b.jsx)(u.Trash2,{className:"mr-2 h-4 w-4"}),"Hapus"]})]})]})})]},a.id))})]})}),f>1&&(0,b.jsxs)("div",{className:"flex items-center justify-between px-2",children:[(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Halaman ",e," dari ",f]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(p.Button,{variant:"outline",size:"sm",onClick:()=>g(e-1),disabled:e<=1,children:[(0,b.jsx)(x.ChevronLeft,{className:"h-4 w-4 mr-1"}),"Sebelumnya"]}),(0,b.jsxs)(p.Button,{variant:"outline",size:"sm",onClick:()=>g(e+1),disabled:e>=f,children:["Selanjutnya",(0,b.jsx)(y.ChevronRight,{className:"h-4 w-4 ml-1"})]})]})]})]})}var K=a.i(95245),L=a.i(59501),M=a.i(62036),N=a.i(46842),O=a.i(92258),P=a.i(63519),Q=a.i(43108);let R=(0,h.default)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var S=a.i(96221),T=a.i(92e3),U=a.i(14574),V=a.i(70430),W=a.i(63658),X=a.i(88780);let Y=X.z.object({name:X.z.string().min(1,"Nama wajib diisi").min(2,"Nama minimal 2 karakter").max(100,"Nama maksimal 100 karakter"),email:X.z.string().min(1,"Email wajib diisi").email("Format email tidak valid"),password:X.z.string().min(1,"Password wajib diisi").min(6,"Password minimal 6 karakter").max(50,"Password maksimal 50 karakter"),phone:X.z.string().max(20,"Nomor telepon maksimal 20 karakter").optional().or(X.z.literal("")),role:X.z.enum(["super_admin","admin_klinik","dokter","perawat","kasir","apoteker","pasien"],{required_error:"Role wajib dipilih",invalid_type_error:"Role tidak valid"}),is_active:X.z.boolean().default(!0),avatar:X.z.string().optional()}),Z=X.z.object({name:X.z.string().min(1,"Nama wajib diisi").min(2,"Nama minimal 2 karakter").max(100,"Nama maksimal 100 karakter"),email:X.z.string().min(1,"Email wajib diisi").email("Format email tidak valid"),password:X.z.string().min(6,"Password minimal 6 karakter").max(50,"Password maksimal 50 karakter").optional().or(X.z.literal("")),phone:X.z.string().max(20,"Nomor telepon maksimal 20 karakter").optional().or(X.z.literal("")),role:X.z.enum(["super_admin","admin_klinik","dokter","perawat","kasir","apoteker","pasien"],{required_error:"Role wajib dipilih",invalid_type_error:"Role tidak valid"}),is_active:X.z.boolean().default(!0),avatar:X.z.string().optional()});var $=a.i(30664);function _({open:a,onOpenChange:e,user:f,onSuccess:g}){let h=!!f,[i,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(""),{register:n,handleSubmit:o,setValue:s,watch:t,reset:u,formState:{errors:v}}=(0,K.useForm)({resolver:(0,L.zodResolver)(h?Z:Y),defaultValues:{name:"",email:"",password:"",phone:"",role:"pasien",is_active:!0,avatar:""}}),w=t("name"),x=t("is_active");(0,c.useEffect)(()=>{a&&(f?(u({name:f.name,email:f.email,password:"",phone:f.phone||"",role:f.role,is_active:f.is_active,avatar:f.avatar||""}),m(f.avatar||"")):(u({name:"",email:"",password:"",phone:"",role:"pasien",is_active:!0,avatar:""}),m("")))},[a,f,u]),(0,c.useEffect)(()=>{!l&&w&&m(`https://api.dicebear.com/7.x/avataaars/svg?seed=${encodeURIComponent(w)}`)},[w,l]);let y=async a=>{k(!0);try{let b={...a,avatar:a.avatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${encodeURIComponent(a.name)}`};h&&f?(b.password||delete b.password,await $.default.updateUser(f.id,b)):await $.default.createUser(b),g(),e(!1)}catch(a){console.error("Error saving user:",a)}finally{k(!1)}},z=$.default.getRoleOptions();return(0,b.jsx)(U.Dialog,{open:a,onOpenChange:e,children:(0,b.jsxs)(U.DialogContent,{className:"sm:max-w-[500px]",children:[(0,b.jsxs)(U.DialogHeader,{children:[(0,b.jsx)(U.DialogTitle,{className:"text-xl",children:h?"Edit Pengguna":"Tambah Pengguna Baru"}),(0,b.jsx)(U.DialogDescription,{children:h?"Perbarui informasi pengguna di bawah ini.":"Isi informasi pengguna baru di bawah ini."})]}),(0,b.jsxs)("form",{onSubmit:o(y),className:"space-y-5 py-4",children:[(0,b.jsxs)(d.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex flex-col items-center gap-3",children:[(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsxs)(C.Avatar,{className:"h-24 w-24 border-4 border-primary/20",children:[(0,b.jsx)(C.AvatarImage,{src:l,alt:w||"Avatar"}),(0,b.jsx)(C.AvatarFallback,{className:"text-2xl bg-primary/10 text-primary",children:w?(0,F.getInitials)(w):"?"})]}),(0,b.jsx)("div",{className:"absolute inset-0 rounded-full bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center cursor-pointer",children:(0,b.jsx)(R,{className:"h-6 w-6 text-white"})})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Avatar akan dibuat otomatis berdasarkan nama"})]}),(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"space-y-2",children:[(0,b.jsxs)(V.Label,{htmlFor:"name",className:"text-sm font-medium",children:["Nama Lengkap ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(N.User,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(q.Input,{id:"name",placeholder:"Masukkan nama lengkap",className:"pl-10",...n("name")})]}),(0,b.jsx)(M.AnimatePresence,{children:v.name&&(0,b.jsxs)(d.motion.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-sm text-destructive flex items-center gap-1",children:[(0,b.jsx)(T.AlertCircle,{className:"h-3 w-3"}),v.name.message]})})]}),(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15},className:"space-y-2",children:[(0,b.jsxs)(V.Label,{htmlFor:"email",className:"text-sm font-medium",children:["Email ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(O.Mail,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(q.Input,{id:"email",type:"email",placeholder:"nama@email.com",className:"pl-10",...n("email")})]}),(0,b.jsx)(M.AnimatePresence,{children:v.email&&(0,b.jsxs)(d.motion.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-sm text-destructive flex items-center gap-1",children:[(0,b.jsx)(T.AlertCircle,{className:"h-3 w-3"}),v.email.message]})})]}),(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"space-y-2",children:[(0,b.jsxs)(V.Label,{htmlFor:"password",className:"text-sm font-medium",children:["Password ",!h&&(0,b.jsx)("span",{className:"text-destructive",children:"*"}),h&&(0,b.jsx)("span",{className:"text-muted-foreground font-normal",children:"(kosongkan jika tidak ingin mengubah)"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(Q.Lock,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(q.Input,{id:"password",type:"password",placeholder:h?"••••••••":"Minimal 6 karakter",className:"pl-10",...n("password")})]}),(0,b.jsx)(M.AnimatePresence,{children:v.password&&(0,b.jsxs)(d.motion.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-sm text-destructive flex items-center gap-1",children:[(0,b.jsx)(T.AlertCircle,{className:"h-3 w-3"}),v.password.message]})})]}),(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.25},className:"space-y-2",children:[(0,b.jsx)(V.Label,{htmlFor:"phone",className:"text-sm font-medium",children:"Nomor Telepon"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(P.Phone,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(q.Input,{id:"phone",type:"tel",placeholder:"081234567890",className:"pl-10",...n("phone")})]}),(0,b.jsx)(M.AnimatePresence,{children:v.phone&&(0,b.jsxs)(d.motion.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-sm text-destructive flex items-center gap-1",children:[(0,b.jsx)(T.AlertCircle,{className:"h-3 w-3"}),v.phone.message]})})]}),(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"space-y-2",children:[(0,b.jsxs)(V.Label,{htmlFor:"role",className:"text-sm font-medium",children:["Role ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(j.Shield,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground z-10"}),(0,b.jsxs)(r.Select,{value:t("role"),onValueChange:a=>s("role",a),children:[(0,b.jsx)(r.SelectTrigger,{className:"pl-10",children:(0,b.jsx)(r.SelectValue,{placeholder:"Pilih role"})}),(0,b.jsx)(r.SelectContent,{children:z.map(a=>(0,b.jsx)(r.SelectItem,{value:a.value,children:a.label},a.value))})]})]}),(0,b.jsx)(M.AnimatePresence,{children:v.role&&(0,b.jsxs)(d.motion.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-sm text-destructive flex items-center gap-1",children:[(0,b.jsx)(T.AlertCircle,{className:"h-3 w-3"}),v.role.message]})})]}),(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.35},className:"flex items-center justify-between rounded-lg border p-4",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(V.Label,{htmlFor:"is_active",className:"text-sm font-medium",children:"Status Aktif"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:x?"Pengguna dapat mengakses sistem":"Pengguna tidak dapat login"})]}),(0,b.jsx)(W.Switch,{id:"is_active",checked:x,onCheckedChange:a=>s("is_active",a)})]})]}),(0,b.jsxs)(U.DialogFooter,{className:"gap-2 sm:gap-0",children:[(0,b.jsx)(p.Button,{type:"button",variant:"outline",onClick:()=>e(!1),disabled:i,children:"Batal"}),(0,b.jsx)(p.Button,{type:"submit",onClick:o(y),disabled:i,className:"min-w-[100px]",children:i?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(S.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Menyimpan..."]}):h?"Simpan Perubahan":"Tambah Pengguna"})]})]})})}var aa=a.i(41675),ab=a.i(16201),ac=a.i(62722),ad=a.i(5084);function ae({open:a,onOpenChange:c,user:e,onEdit:f,onToggleStatus:g}){return e?(0,b.jsx)(U.Dialog,{open:a,onOpenChange:c,children:(0,b.jsxs)(U.DialogContent,{className:"sm:max-w-[450px]",children:[(0,b.jsx)(U.DialogHeader,{children:(0,b.jsx)(U.DialogTitle,{className:"text-xl",children:"Detail Pengguna"})}),(0,b.jsxs)("div",{className:"py-4 space-y-6",children:[(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex flex-col items-center text-center",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)(C.Avatar,{className:"h-24 w-24 border-4 border-primary/20",children:[(0,b.jsx)(C.AvatarImage,{src:e.avatar,alt:e.name}),(0,b.jsx)(C.AvatarFallback,{className:"text-2xl bg-primary/10 text-primary",children:(0,F.getInitials)(e.name)})]}),(0,b.jsx)("div",{className:`absolute -bottom-1 -right-1 w-6 h-6 rounded-full border-2 border-background flex items-center justify-center ${e.is_active?"bg-emerald-500":"bg-gray-400"}`,children:e.is_active?(0,b.jsx)(ab.CheckCircle,{className:"h-4 w-4 text-white"}):(0,b.jsx)(ac.XCircle,{className:"h-4 w-4 text-white"})})]}),(0,b.jsx)("h3",{className:"mt-4 text-lg font-semibold",children:e.name}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,b.jsx)(D.Badge,{variant:e.role,children:E.ROLE_LABELS[e.role]}),(0,b.jsx)(D.Badge,{variant:e.is_active?"success":"error",children:e.is_active?"Aktif":"Nonaktif"})]})]}),(0,b.jsx)(ad.Separator,{}),(0,b.jsxs)(d.motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-blue-100 dark:bg-blue-950",children:(0,b.jsx)(O.Mail,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Email"}),(0,b.jsx)("p",{className:"text-sm font-medium truncate",children:e.email})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-green-100 dark:bg-green-950",children:(0,b.jsx)(P.Phone,{className:"h-4 w-4 text-green-600 dark:text-green-400"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Nomor Telepon"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:e.phone||"-"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-950",children:(0,b.jsx)(j.Shield,{className:"h-4 w-4 text-purple-600 dark:text-purple-400"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Role"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:E.ROLE_LABELS[e.role]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-orange-100 dark:bg-orange-950",children:(0,b.jsx)(aa.Calendar,{className:"h-4 w-4 text-orange-600 dark:text-orange-400"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Bergabung Sejak"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:(0,F.formatDate)(e.created_at)})]})]})]}),(0,b.jsx)(ad.Separator,{}),(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex gap-2",children:[(0,b.jsxs)(p.Button,{variant:"outline",className:"flex-1",onClick:()=>{c(!1),f()},children:[(0,b.jsx)(t.Edit,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,b.jsxs)(p.Button,{variant:e.is_active?"destructive":"default",className:"flex-1",onClick:()=>{c(!1),g()},children:[(0,b.jsx)(v.Power,{className:"mr-2 h-4 w-4"}),e.is_active?"Nonaktifkan":"Aktifkan"]})]})]})]})}):null}var af=a.i(73570);function ag({open:a,onOpenChange:e,user:f,onConfirm:g}){let[h,i]=(0,c.useState)(!1);if(!f)return null;let j=async()=>{i(!0);try{await g(),e(!1)}catch(a){console.error("Error deleting user:",a)}finally{i(!1)}};return(0,b.jsx)(U.Dialog,{open:a,onOpenChange:e,children:(0,b.jsxs)(U.DialogContent,{className:"sm:max-w-[400px]",children:[(0,b.jsxs)(U.DialogHeader,{children:[(0,b.jsxs)(U.DialogTitle,{className:"text-xl text-destructive flex items-center gap-2",children:[(0,b.jsx)(af.AlertTriangle,{className:"h-5 w-5"}),"Hapus Pengguna"]}),(0,b.jsx)(U.DialogDescription,{children:"Tindakan ini tidak dapat dibatalkan. Data pengguna akan dihapus secara permanen."})]}),(0,b.jsxs)(d.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"py-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 p-4 rounded-xl bg-destructive/10 border border-destructive/20",children:[(0,b.jsxs)(C.Avatar,{className:"h-14 w-14 border-2 border-destructive/30",children:[(0,b.jsx)(C.AvatarImage,{src:f.avatar,alt:f.name}),(0,b.jsx)(C.AvatarFallback,{className:"bg-destructive/10 text-destructive",children:(0,F.getInitials)(f.name)})]}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h4",{className:"font-semibold truncate",children:f.name}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground truncate",children:f.email}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:E.ROLE_LABELS[f.role]})]})]}),(0,b.jsx)("p",{className:"mt-4 text-sm text-muted-foreground text-center",children:"Apakah Anda yakin ingin menghapus pengguna ini?"})]}),(0,b.jsxs)(U.DialogFooter,{className:"gap-2 sm:gap-0",children:[(0,b.jsx)(p.Button,{type:"button",variant:"outline",onClick:()=>e(!1),disabled:h,children:"Batal"}),(0,b.jsx)(p.Button,{type:"button",variant:"destructive",onClick:j,disabled:h,className:"min-w-[100px]",children:h?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(S.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Menghapus..."]}):"Ya, Hapus"})]})]})})}var ah=a.i(15055);let ai=(0,h.default)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);var aj=a.i(71565);function ak({open:a,onOpenChange:d,user:f,onSuccess:g}){let[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(!1),[q,r]=(0,c.useState)(!1);(0,c.useEffect)(()=>{(async()=>{if(a){o(!0);try{let a=await aj.default.getActiveDepartments();i(a.data)}catch(a){console.error("Error fetching departments:",a)}finally{o(!1)}}})()},[a]),(0,c.useEffect)(()=>{if(f?.departments&&f.departments.length>0){let a=f.departments.map(a=>a.id);k(a);let b=f.departments.find(a=>a.is_primary);m(b?b.id:a[0])}else k([]),m(null)},[f]);let s=async()=>{if(f){if(0===j.length)return void e.toast.error("Pilih minimal 1 poli");r(!0);try{await $.default.assignDepartments(Number(f.id),{department_ids:j,primary_department_id:l||j[0]}),e.toast.success("Poli berhasil ditugaskan",{description:`${f.name} telah ditugaskan ke ${j.length} poli`}),g(),d(!1)}catch(a){console.error("Error assigning departments:",a),e.toast.error("Gagal menugaskan poli",{description:a.response?.data?.message||"Terjadi kesalahan"})}finally{r(!1)}}};return f?["dokter","perawat"].includes(f.role)?(0,b.jsx)(U.Dialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(U.DialogContent,{className:"sm:max-w-[500px]",children:[(0,b.jsxs)(U.DialogHeader,{children:[(0,b.jsxs)(U.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(z.Building2,{className:"h-5 w-5"}),"Penugasan Poli"]}),(0,b.jsxs)(U.DialogDescription,{children:["Pilih poli untuk ",f.name," (","dokter"===f.role?"Dokter":"Perawat",")"]})]}),n?(0,b.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,b.jsx)(S.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(V.Label,{children:"Pilih Poli"}),(0,b.jsx)("div",{className:"border rounded-lg max-h-[300px] overflow-y-auto",children:h.map(a=>{let c=j.includes(a.id),d=l===a.id;return(0,b.jsxs)("div",{className:`flex items-center justify-between p-3 border-b last:border-b-0 hover:bg-muted/50 ${c?"bg-primary/5":""}`,children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(ah.Checkbox,{id:`dept-${a.id}`,checked:c,onCheckedChange:b=>((a,b)=>{if(b)k([...j,a]),0===j.length&&m(a);else{let b=j.filter(b=>b!==a);k(b),l===a&&m(b.length>0?b[0]:null)}})(a.id,!0===b)}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:`dept-${a.id}`,className:"font-medium cursor-pointer",children:a.name}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Kode: ",a.code]})]})]}),c&&(0,b.jsxs)(p.Button,{type:"button",size:"sm",variant:d?"default":"outline",onClick:()=>m(a.id),className:"gap-1",children:[(0,b.jsx)(ai,{className:`h-3 w-3 ${d?"fill-current":""}`}),d?"Utama":"Jadikan Utama"]})]},a.id)})})]}),j.length>0&&(0,b.jsxs)("div",{className:"p-3 rounded-lg bg-muted/50",children:[(0,b.jsxs)("p",{className:"text-sm text-muted-foreground mb-2",children:["Poli yang dipilih (",j.length,"):"]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-1",children:j.map(a=>{let c=h.find(b=>b.id===a);return c?(0,b.jsxs)(D.Badge,{variant:a===l?"default":"secondary",className:"gap-1",children:[a===l&&(0,b.jsx)(ai,{className:"h-3 w-3 fill-current"}),c.name]},a):null})})]})]}),(0,b.jsxs)(U.DialogFooter,{children:[(0,b.jsx)(p.Button,{variant:"outline",onClick:()=>d(!1),disabled:q,children:"Batal"}),(0,b.jsxs)(p.Button,{onClick:s,disabled:q||0===j.length,children:[q&&(0,b.jsx)(S.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Simpan"]})]})]})}):(0,b.jsx)(U.Dialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(U.DialogContent,{children:[(0,b.jsxs)(U.DialogHeader,{children:[(0,b.jsx)(U.DialogTitle,{children:"Penugasan Poli"}),(0,b.jsx)(U.DialogDescription,{children:"Penugasan poli hanya tersedia untuk role Dokter dan Perawat."})]}),(0,b.jsx)(U.DialogFooter,{children:(0,b.jsx)(p.Button,{onClick:()=>d(!1),children:"Tutup"})})]})}):null}let al=[{key:"total",title:"Total Pengguna",icon:f.Users,gradient:"from-blue-500 to-blue-600",bgLight:"bg-blue-50 dark:bg-blue-950/50",iconColor:"text-blue-600 dark:text-blue-400"},{key:"active",title:"Pengguna Aktif",icon:g.UserCheck,gradient:"from-emerald-500 to-emerald-600",bgLight:"bg-emerald-50 dark:bg-emerald-950/50",iconColor:"text-emerald-600 dark:text-emerald-400"},{key:"inactive",title:"Pengguna Nonaktif",icon:i,gradient:"from-red-500 to-red-600",bgLight:"bg-red-50 dark:bg-red-950/50",iconColor:"text-red-600 dark:text-red-400"},{key:"roles",title:"Total Role",icon:j.Shield,gradient:"from-purple-500 to-purple-600",bgLight:"bg-purple-50 dark:bg-purple-950/50",iconColor:"text-purple-600 dark:text-purple-400"}];function am(){let[a,f]=(0,c.useState)([]),[g,h]=(0,c.useState)(null),[i,j]=(0,c.useState)(!0),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(1),[w,x]=(0,c.useState)(1),[y,z]=(0,c.useState)({search:"",role:"all",status:"all",page:1,per_page:10}),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(!1),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)(!1),[K,L]=(0,c.useState)(null),M=(0,c.useCallback)(async()=>{try{let a=await $.default.getUsers(y);f(a.data),v(a.meta.current_page),x(a.meta.last_page)}catch(a){console.error("Error fetching users:",a),e.toast.error("Gagal memuat data pengguna")}},[y]),N=(0,c.useCallback)(async()=>{try{let a=await $.default.getUserStats();h(a.data)}catch(a){console.error("Error fetching stats:",a)}},[]);(0,c.useEffect)(()=>{(async()=>{j(!0),await Promise.all([M(),N()]),j(!1)})()},[M,N]);let O=async()=>{t(!0),await Promise.all([M(),N()]),t(!1),e.toast.success("Data berhasil diperbarui")};(0,c.useEffect)(()=>{let a=setTimeout(()=>{z(a=>({...a,page:1}))},300);return()=>clearTimeout(a)},[y.search]);let P=(a,b)=>{z(c=>({...c,[a]:b,page:1}))},Q=async a=>{try{await $.default.toggleUserStatus(a.id),e.toast.success(a.is_active?"Pengguna berhasil dinonaktifkan":"Pengguna berhasil diaktifkan"),await Promise.all([M(),N()])}catch(a){console.error("Error toggling status:",a),e.toast.error("Gagal mengubah status pengguna")}},R=async()=>{e.toast.success(K?"Pengguna berhasil diperbarui":"Pengguna berhasil dibuat"),await Promise.all([M(),N()])},S=async()=>{if(K)try{await $.default.deleteUser(K.id),e.toast.success("Pengguna berhasil dihapus"),await Promise.all([M(),N()])}catch(a){throw console.error("Error deleting user:",a),e.toast.error("Gagal menghapus pengguna"),a}},T=async()=>{e.toast.success("Poli berhasil di-assign ke pengguna"),await M()},U={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl md:text-3xl font-bold",children:"Manajemen Pengguna"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"Kelola pengguna dan hak akses sistem"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(p.Button,{variant:"outline",size:"sm",onClick:O,disabled:s,children:[(0,b.jsx)(m.RefreshCw,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),"Refresh"]}),(0,b.jsxs)(p.Button,{size:"sm",onClick:()=>{L(null),B(!0)},children:[(0,b.jsx)(l.Plus,{className:"h-4 w-4 mr-2"}),"Tambah Pengguna"]})]})]}),(0,b.jsx)(d.motion.div,{variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"show",className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:al.map(a=>{var c;return(0,b.jsx)(d.motion.div,{variants:U,children:(0,b.jsxs)(o.Card,{className:"relative overflow-hidden hover:shadow-lg transition-shadow",children:[(0,b.jsxs)(o.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,b.jsx)(o.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:a.title}),(0,b.jsx)("div",{className:`p-2.5 rounded-xl ${a.bgLight}`,children:(0,b.jsx)(a.icon,{className:`h-5 w-5 ${a.iconColor}`})})]}),(0,b.jsx)(o.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl md:text-3xl font-bold",children:i?(0,b.jsx)("div",{className:"h-8 w-16 bg-muted animate-pulse rounded"}):(c=a.key,g?"roles"===c?Object.values(g.by_role).filter(a=>a>0).length:g[c]:0)})}),(0,b.jsx)("div",{className:`absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r ${a.gradient}`})]})},a.key)})}),(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,b.jsx)(o.Card,{children:(0,b.jsx)(o.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(k.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(q.Input,{placeholder:"Cari nama atau email...",className:"pl-10",value:y.search,onChange:a=>P("search",a.target.value)})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(n.Filter,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)(r.Select,{value:y.role,onValueChange:a=>P("role",a),children:[(0,b.jsx)(r.SelectTrigger,{className:"w-[160px]",children:(0,b.jsx)(r.SelectValue,{placeholder:"Semua Role"})}),(0,b.jsxs)(r.SelectContent,{children:[(0,b.jsx)(r.SelectItem,{value:"all",children:"Semua Role"}),Object.entries(E.ROLE_LABELS).map(([a,c])=>(0,b.jsx)(r.SelectItem,{value:a,children:c},a))]})]})]}),(0,b.jsxs)(r.Select,{value:y.status,onValueChange:a=>P("status",a),children:[(0,b.jsx)(r.SelectTrigger,{className:"w-[140px]",children:(0,b.jsx)(r.SelectValue,{placeholder:"Semua Status"})}),(0,b.jsxs)(r.SelectContent,{children:[(0,b.jsx)(r.SelectItem,{value:"all",children:"Semua Status"}),(0,b.jsx)(r.SelectItem,{value:"active",children:"Aktif"}),(0,b.jsx)(r.SelectItem,{value:"inactive",children:"Nonaktif"})]})]})]})})})}),(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:(0,b.jsx)(J,{users:a,isLoading:i,currentPage:u,totalPages:w,onPageChange:a=>{z(b=>({...b,page:a}))},onView:a=>{L(a),D(!0)},onEdit:a=>{L(a),B(!0)},onDelete:a=>{L(a),G(!0)},onToggleStatus:Q,onAssignDepartments:a=>{L(a),I(!0)}})}),(0,b.jsx)(_,{open:A,onOpenChange:B,user:K,onSuccess:R}),(0,b.jsx)(ae,{open:C,onOpenChange:D,user:K,onEdit:()=>{D(!1),B(!0)},onToggleStatus:()=>{K&&Q(K)}}),(0,b.jsx)(ag,{open:F,onOpenChange:G,user:K,onConfirm:S}),(0,b.jsx)(ak,{open:H,onOpenChange:I,user:K,onSuccess:T})]})}a.s(["default",()=>am],12203)}];

//# sourceMappingURL=src_app_%28dashboard%29_users_page_tsx_88a7c382._.js.map