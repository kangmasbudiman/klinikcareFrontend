module.exports=[4e4,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(46271),e=a.i(15618),f=a.i(87532),g=a.i(63519),h=a.i(92258),i=a.i(24987),j=a.i(17755),k=a.i(99464),l=a.i(81560),m=a.i(30206),n=a.i(96221),o=a.i(60246),p=a.i(16201),q=a.i(62722),r=a.i(99570),s=a.i(66718),t=a.i(86304),u=a.i(91119),v=a.i(6015),w=a.i(35732),x=a.i(80701),y=a.i(14574),z=a.i(70430),A=a.i(29246),B=a.i(63658),C=a.i(23292),D=a.i(85611);function E(){let[a,E]=(0,c.useState)([]),[F,G]=(0,c.useState)(null),[H,I]=(0,c.useState)(!0),[J,K]=(0,c.useState)(""),[L,M]=(0,c.useState)("all"),[N,O]=(0,c.useState)(1),[P,Q]=(0,c.useState)(1),[R,S]=(0,c.useState)(0),[T,U]=(0,c.useState)(!1),[V,W]=(0,c.useState)(!1),[X,Y]=(0,c.useState)(null),[Z,$]=(0,c.useState)(!1),[_,aa]=(0,c.useState)({name:"",contact_person:"",phone:"",email:"",address:"",city:"",npwp:"",payment_terms:30,is_active:!0,notes:""}),ab=(0,c.useCallback)(async()=>{I(!0);try{let a=await D.supplierService.getSuppliers({search:J,status:L,page:N,per_page:10});E(a.data),Q(a.meta.last_page),S(a.meta.total)}catch(a){console.error("Error fetching suppliers:",a),C.toast.error("Gagal memuat data supplier")}finally{I(!1)}},[J,L,N]),ac=async()=>{try{let a=await D.supplierService.getSupplierStats();G(a.data)}catch(a){console.error("Error fetching stats:",a)}};(0,c.useEffect)(()=>{ab()},[ab]),(0,c.useEffect)(()=>{ac()},[]);let ad=a=>{a?(Y(a),aa({name:a.name,contact_person:a.contact_person||"",phone:a.phone||"",email:a.email||"",address:a.address||"",city:a.city||"",npwp:a.npwp||"",payment_terms:a.payment_terms,is_active:a.is_active,notes:a.notes||""})):(Y(null),aa({name:"",contact_person:"",phone:"",email:"",address:"",city:"",npwp:"",payment_terms:30,is_active:!0,notes:""})),U(!0)},ae=async()=>{if(!_.name.trim())return void C.toast.error("Nama supplier wajib diisi");$(!0);try{X?(await D.supplierService.updateSupplier(X.id,_),C.toast.success("Supplier berhasil diperbarui")):(await D.supplierService.createSupplier(_),C.toast.success("Supplier berhasil ditambahkan")),U(!1),ab(),ac()}catch(a){C.toast.error(a.response?.data?.message||"Gagal menyimpan supplier")}finally{$(!1)}},af=async()=>{if(X){$(!0);try{await D.supplierService.deleteSupplier(X.id),C.toast.success("Supplier berhasil dihapus"),W(!1),Y(null),ab(),ac()}catch(a){C.toast.error(a.response?.data?.message||"Gagal menghapus supplier")}finally{$(!1)}}},ag=async a=>{try{await D.supplierService.toggleSupplierStatus(a.id),C.toast.success(a.is_active?"Supplier berhasil dinonaktifkan":"Supplier berhasil diaktifkan"),ab(),ac()}catch(a){C.toast.error("Gagal mengubah status supplier")}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Supplier"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Kelola data supplier/distributor obat"})]}),(0,b.jsxs)(r.Button,{onClick:()=>ad(),className:"gap-2",children:[(0,b.jsx)(e.Plus,{className:"h-4 w-4"}),"Tambah Supplier"]})]}),F&&(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:(0,b.jsxs)(u.Card,{children:[(0,b.jsxs)(u.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(u.CardTitle,{className:"text-sm font-medium",children:"Total Supplier"}),(0,b.jsx)(o.Users,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsx)(u.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold",children:F.total})})]})}),(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:(0,b.jsxs)(u.Card,{children:[(0,b.jsxs)(u.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(u.CardTitle,{className:"text-sm font-medium",children:"Aktif"}),(0,b.jsx)(p.CheckCircle,{className:"h-4 w-4 text-green-500"})]}),(0,b.jsx)(u.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600",children:F.active})})]})}),(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,b.jsxs)(u.Card,{children:[(0,b.jsxs)(u.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(u.CardTitle,{className:"text-sm font-medium",children:"Tidak Aktif"}),(0,b.jsx)(q.XCircle,{className:"h-4 w-4 text-red-500"})]}),(0,b.jsx)(u.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-red-600",children:F.inactive})})]})})]}),(0,b.jsxs)(u.Card,{children:[(0,b.jsxs)(u.CardHeader,{children:[(0,b.jsx)(u.CardTitle,{children:"Daftar Supplier"}),(0,b.jsxs)(u.CardDescription,{children:["Total ",R," supplier terdaftar"]})]}),(0,b.jsxs)(u.CardContent,{children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(f.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(s.Input,{placeholder:"Cari nama, kode, atau kontak...",value:J,onChange:a=>{K(a.target.value),O(1)},className:"pl-10"})]}),(0,b.jsxs)(x.Select,{value:L,onValueChange:a=>{M(a),O(1)},children:[(0,b.jsx)(x.SelectTrigger,{className:"w-full sm:w-[180px]",children:(0,b.jsx)(x.SelectValue,{placeholder:"Filter Status"})}),(0,b.jsxs)(x.SelectContent,{children:[(0,b.jsx)(x.SelectItem,{value:"all",children:"Semua Status"}),(0,b.jsx)(x.SelectItem,{value:"active",children:"Aktif"}),(0,b.jsx)(x.SelectItem,{value:"inactive",children:"Tidak Aktif"})]})]})]}),(0,b.jsx)("div",{className:"rounded-md border",children:(0,b.jsxs)(v.Table,{children:[(0,b.jsx)(v.TableHeader,{children:(0,b.jsxs)(v.TableRow,{children:[(0,b.jsx)(v.TableHead,{children:"Kode"}),(0,b.jsx)(v.TableHead,{children:"Nama Supplier"}),(0,b.jsx)(v.TableHead,{children:"Kontak"}),(0,b.jsx)(v.TableHead,{children:"Kota"}),(0,b.jsx)(v.TableHead,{children:"Termin"}),(0,b.jsx)(v.TableHead,{children:"Status"}),(0,b.jsx)(v.TableHead,{className:"w-[70px]"})]})}),(0,b.jsx)(v.TableBody,{children:H?(0,b.jsx)(v.TableRow,{children:(0,b.jsx)(v.TableCell,{colSpan:7,className:"text-center py-10",children:(0,b.jsx)(n.Loader2,{className:"h-6 w-6 animate-spin mx-auto"})})}):0===a.length?(0,b.jsx)(v.TableRow,{children:(0,b.jsx)(v.TableCell,{colSpan:7,className:"text-center py-10 text-muted-foreground",children:"Tidak ada data supplier"})}):a.map(a=>(0,b.jsxs)(v.TableRow,{children:[(0,b.jsx)(v.TableCell,{className:"font-mono text-sm",children:a.code}),(0,b.jsx)(v.TableCell,{children:(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:a.name}),a.contact_person&&(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:a.contact_person})]})}),(0,b.jsx)(v.TableCell,{children:(0,b.jsxs)("div",{className:"space-y-1 text-sm",children:[a.phone&&(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(g.Phone,{className:"h-3 w-3"}),a.phone]}),a.email&&(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(h.Mail,{className:"h-3 w-3"}),a.email]})]})}),(0,b.jsx)(v.TableCell,{children:a.city&&(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(i.MapPin,{className:"h-3 w-3"}),a.city]})}),(0,b.jsxs)(v.TableCell,{children:[a.payment_terms," hari"]}),(0,b.jsx)(v.TableCell,{children:(0,b.jsx)(t.Badge,{variant:a.is_active?"success":"secondary",children:a.is_active?"Aktif":"Tidak Aktif"})}),(0,b.jsx)(v.TableCell,{children:(0,b.jsxs)(w.DropdownMenu,{children:[(0,b.jsx)(w.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(r.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(j.MoreHorizontal,{className:"h-4 w-4"})})}),(0,b.jsxs)(w.DropdownMenuContent,{align:"end",children:[(0,b.jsxs)(w.DropdownMenuItem,{onClick:()=>ad(a),children:[(0,b.jsx)(k.Pencil,{className:"h-4 w-4 mr-2"}),"Edit"]}),(0,b.jsxs)(w.DropdownMenuItem,{onClick:()=>ag(a),children:[(0,b.jsx)(m.Power,{className:"h-4 w-4 mr-2"}),a.is_active?"Nonaktifkan":"Aktifkan"]}),(0,b.jsx)(w.DropdownMenuSeparator,{}),(0,b.jsxs)(w.DropdownMenuItem,{className:"text-destructive",onClick:()=>{Y(a),W(!0)},children:[(0,b.jsx)(l.Trash2,{className:"h-4 w-4 mr-2"}),"Hapus"]})]})]})})]},a.id))})]})}),P>1&&(0,b.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Halaman ",N," dari ",P]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(r.Button,{variant:"outline",size:"sm",onClick:()=>O(a=>Math.max(1,a-1)),disabled:1===N,children:"Sebelumnya"}),(0,b.jsx)(r.Button,{variant:"outline",size:"sm",onClick:()=>O(a=>Math.min(P,a+1)),disabled:N===P,children:"Selanjutnya"})]})]})]})]}),(0,b.jsx)(y.Dialog,{open:T,onOpenChange:U,children:(0,b.jsxs)(y.DialogContent,{className:"sm:max-w-[600px]",children:[(0,b.jsxs)(y.DialogHeader,{children:[(0,b.jsx)(y.DialogTitle,{children:X?"Edit Supplier":"Tambah Supplier"}),(0,b.jsx)(y.DialogDescription,{children:X?"Perbarui informasi supplier":"Tambahkan supplier baru ke sistem"})]}),(0,b.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(z.Label,{htmlFor:"name",children:"Nama Supplier *"}),(0,b.jsx)(s.Input,{id:"name",value:_.name,onChange:a=>aa({..._,name:a.target.value}),placeholder:"PT. Distributor Obat"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(z.Label,{htmlFor:"contact_person",children:"Contact Person"}),(0,b.jsx)(s.Input,{id:"contact_person",value:_.contact_person,onChange:a=>aa({..._,contact_person:a.target.value}),placeholder:"Nama kontak"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(z.Label,{htmlFor:"phone",children:"Telepon"}),(0,b.jsx)(s.Input,{id:"phone",value:_.phone,onChange:a=>aa({..._,phone:a.target.value}),placeholder:"08123456789"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(z.Label,{htmlFor:"email",children:"Email"}),(0,b.jsx)(s.Input,{id:"email",type:"email",value:_.email,onChange:a=>aa({..._,email:a.target.value}),placeholder:"email@supplier.com"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(z.Label,{htmlFor:"city",children:"Kota"}),(0,b.jsx)(s.Input,{id:"city",value:_.city,onChange:a=>aa({..._,city:a.target.value}),placeholder:"Jakarta"})]})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(z.Label,{htmlFor:"address",children:"Alamat"}),(0,b.jsx)(A.Textarea,{id:"address",value:_.address,onChange:a=>aa({..._,address:a.target.value}),placeholder:"Alamat lengkap supplier",rows:2})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(z.Label,{htmlFor:"npwp",children:"NPWP"}),(0,b.jsx)(s.Input,{id:"npwp",value:_.npwp,onChange:a=>aa({..._,npwp:a.target.value}),placeholder:"XX.XXX.XXX.X-XXX.XXX"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(z.Label,{htmlFor:"payment_terms",children:"Termin Pembayaran (hari)"}),(0,b.jsx)(s.Input,{id:"payment_terms",type:"number",value:_.payment_terms,onChange:a=>aa({..._,payment_terms:parseInt(a.target.value)||0}),placeholder:"30"})]})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(z.Label,{htmlFor:"notes",children:"Catatan"}),(0,b.jsx)(A.Textarea,{id:"notes",value:_.notes,onChange:a=>aa({..._,notes:a.target.value}),placeholder:"Catatan tambahan...",rows:2})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(z.Label,{children:"Status Aktif"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:_.is_active?"Supplier aktif":"Supplier tidak aktif"})]}),(0,b.jsx)(B.Switch,{checked:_.is_active,onCheckedChange:a=>aa({..._,is_active:a})})]})]}),(0,b.jsxs)(y.DialogFooter,{children:[(0,b.jsx)(r.Button,{variant:"outline",onClick:()=>U(!1),children:"Batal"}),(0,b.jsxs)(r.Button,{onClick:ae,disabled:Z,children:[Z&&(0,b.jsx)(n.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),X?"Simpan Perubahan":"Tambah Supplier"]})]})]})}),(0,b.jsx)(y.Dialog,{open:V,onOpenChange:W,children:(0,b.jsxs)(y.DialogContent,{children:[(0,b.jsxs)(y.DialogHeader,{children:[(0,b.jsx)(y.DialogTitle,{children:"Hapus Supplier"}),(0,b.jsxs)(y.DialogDescription,{children:['Apakah Anda yakin ingin menghapus supplier "',X?.name,'"? Tindakan ini tidak dapat dibatalkan.']})]}),(0,b.jsxs)(y.DialogFooter,{children:[(0,b.jsx)(r.Button,{variant:"outline",onClick:()=>W(!1),children:"Batal"}),(0,b.jsxs)(r.Button,{variant:"destructive",onClick:af,disabled:Z,children:[Z&&(0,b.jsx)(n.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Hapus"]})]})]})})]})}a.s(["default",()=>E])}];

//# sourceMappingURL=src_app_%28dashboard%29_pharmacy_suppliers_page_tsx_ca98d658._.js.map