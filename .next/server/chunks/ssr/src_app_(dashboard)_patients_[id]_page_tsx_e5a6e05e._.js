module.exports=[6170,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(46271),f=a.i(56711),g=a.i(93901),h=a.i(210),i=a.i(41675),j=a.i(16201),k=a.i(62722),l=a.i(24569),m=a.i(46842),n=a.i(63519),o=a.i(92258),p=a.i(24987),q=a.i(11156),r=a.i(3314),s=a.i(76472),t=a.i(4720),u=a.i(60246),v=a.i(35126),w=a.i(41710),x=a.i(67900),y=a.i(3858),z=a.i(1199),A=a.i(90669),B=a.i(69520),C=a.i(92e3),D=a.i(23292),E=a.i(99570),F=a.i(86304),G=a.i(91119),H=a.i(5084),I=a.i(33140),J=a.i(82524),K=a.i(76841),L=a.i(84771),M=a.i(41572),N=a.i(68114);function O(){let a=(0,d.useParams)(),O=(0,d.useRouter)(),P=Number(a.id),[Q,R]=(0,c.useState)(null),[S,T]=(0,c.useState)([]),[U,V]=(0,c.useState)(!0),[W,X]=(0,c.useState)(!0),[Y,Z]=(0,c.useState)(1),[$,_]=(0,c.useState)(1),[aa,ab]=(0,c.useState)(0),ac=(0,c.useCallback)(async()=>{try{let a=await L.default.getPatientById(P);R(a.data)}catch(a){console.error("Error fetching patient:",a),D.toast.error("Gagal memuat data pasien")}},[P]),ad=(0,c.useCallback)(async()=>{X(!0);try{let a=await M.default.getPatientMedicalHistory(P,Y,10);T(a.data),a.meta&&(_(a.meta.last_page),ab(a.meta.total))}catch(a){console.error("Error fetching medical history:",a)}finally{X(!1)}},[P,Y]);return((0,c.useEffect)(()=>{(async()=>{V(!0),await ac(),V(!1)})()},[ac]),(0,c.useEffect)(()=>{P&&ad()},[ad,P]),U)?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(I.Skeleton,{className:"h-10 w-48"}),(0,b.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[(0,b.jsx)(I.Skeleton,{className:"h-[400px] lg:col-span-1"}),(0,b.jsx)(I.Skeleton,{className:"h-[400px] lg:col-span-2"})]})]}):Q?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(e.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(E.Button,{variant:"outline",size:"icon",onClick:()=>O.push("/patients"),children:(0,b.jsx)(h.ArrowLeft,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Detail Pasien"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:Q.medical_record_number})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(E.Button,{variant:"outline",onClick:()=>{ac(),ad()},children:[(0,b.jsx)(B.RefreshCw,{className:"mr-2 h-4 w-4"}),"Refresh"]}),(0,b.jsxs)(E.Button,{onClick:()=>O.push(`/patients?edit=${Q.id}`),children:[(0,b.jsx)(l.Edit,{className:"mr-2 h-4 w-4"}),"Edit Pasien"]})]})]}),(0,b.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[(0,b.jsx)(e.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"lg:col-span-1",children:(0,b.jsx)(G.Card,{children:(0,b.jsxs)(G.CardContent,{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center text-center mb-6",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:`h-20 w-20 rounded-full flex items-center justify-center text-white text-3xl font-bold ${"male"===Q.gender?"bg-blue-500":"bg-pink-500"}`,children:Q.name.charAt(0).toUpperCase()}),(0,b.jsx)("div",{className:`absolute -bottom-1 -right-1 w-6 h-6 rounded-full border-2 border-background flex items-center justify-center ${Q.is_active?"bg-emerald-500":"bg-gray-400"}`,children:Q.is_active?(0,b.jsx)(j.CheckCircle,{className:"h-4 w-4 text-white"}):(0,b.jsx)(k.XCircle,{className:"h-4 w-4 text-white"})})]}),(0,b.jsx)("h3",{className:"mt-4 text-lg font-semibold",children:Q.name}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:Q.medical_record_number}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,b.jsx)(F.Badge,{className:L.default.getPatientTypeColorClass(Q.patient_type),children:Q.patient_type_label}),(0,b.jsx)(F.Badge,{variant:Q.is_active?"success":"error",children:Q.is_active?"Aktif":"Nonaktif"})]})]}),(0,b.jsx)(H.Separator,{className:"mb-4"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[(0,b.jsx)(i.Calendar,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Tanggal Lahir"}),(0,b.jsxs)("p",{className:"text-sm font-medium",children:[(0,N.formatDate)(Q.birth_date)," (",L.default.formatAge(Q.birth_date),")"]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[(0,b.jsx)(m.User,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Jenis Kelamin"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:Q.gender_label})]})]}),Q.nik&&(0,b.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[(0,b.jsx)(q.CreditCard,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"NIK"}),(0,b.jsx)("p",{className:"text-sm font-mono",children:Q.nik})]})]}),Q.bpjs_number&&(0,b.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-green-50 dark:bg-green-950",children:[(0,b.jsx)(r.Shield,{className:"h-4 w-4 text-green-600"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"No. BPJS"}),(0,b.jsx)("p",{className:"text-sm font-mono",children:Q.bpjs_number})]})]}),Q.phone&&(0,b.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[(0,b.jsx)(n.Phone,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Telepon"}),(0,b.jsx)("p",{className:"text-sm",children:L.default.formatPhone(Q.phone)})]})]}),Q.email&&(0,b.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[(0,b.jsx)(o.Mail,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Email"}),(0,b.jsx)("p",{className:"text-sm",children:Q.email})]})]}),Q.full_address&&(0,b.jsxs)("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-muted/50",children:[(0,b.jsx)(p.MapPin,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Alamat"}),(0,b.jsx)("p",{className:"text-sm",children:Q.full_address})]})]}),Q.allergies&&(0,b.jsxs)("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-red-50 dark:bg-red-950",children:[(0,b.jsx)(s.Heart,{className:"h-4 w-4 text-red-600 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Alergi"}),(0,b.jsx)("p",{className:"text-sm text-red-700 dark:text-red-300",children:Q.allergies})]})]}),Q.emergency_contact_name&&(0,b.jsxs)("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-orange-50 dark:bg-orange-950",children:[(0,b.jsx)(u.Users,{className:"h-4 w-4 text-orange-600 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Kontak Darurat"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:Q.emergency_contact_name}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[Q.emergency_contact_relation,Q.emergency_contact_phone&&` - ${L.default.formatPhone(Q.emergency_contact_phone)}`]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[Q.blood_type&&(0,b.jsxs)("div",{className:"p-2 rounded bg-muted/50 text-center",children:[(0,b.jsx)("span",{className:"text-muted-foreground text-xs block",children:"Gol. Darah"}),(0,b.jsx)("span",{className:"font-bold text-lg",children:Q.blood_type})]}),Q.religion_label&&(0,b.jsxs)("div",{className:"p-2 rounded bg-muted/50",children:[(0,b.jsx)("span",{className:"text-muted-foreground text-xs block",children:"Agama"}),(0,b.jsx)("span",{className:"font-medium",children:Q.religion_label})]})]})]})]})})}),(0,b.jsx)(e.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"lg:col-span-2",children:(0,b.jsxs)(G.Card,{children:[(0,b.jsx)(G.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(G.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(A.Activity,{className:"h-5 w-5"}),"Riwayat Pengobatan"]}),(0,b.jsxs)(F.Badge,{variant:"secondary",children:[aa," kunjungan"]})]})}),(0,b.jsx)(G.CardContent,{children:W?(0,b.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(I.Skeleton,{className:"h-32 w-full"},c))}):0===S.length?(0,b.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,b.jsx)(t.FileText,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),(0,b.jsx)("p",{children:"Belum ada riwayat pengobatan"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(K.Accordion,{type:"single",collapsible:!0,className:"space-y-3",children:S.map((a,c)=>{let d;return(0,b.jsxs)(K.AccordionItem,{value:`record-${a.id}`,className:"border rounded-lg px-4",children:[(0,b.jsx)(K.AccordionTrigger,{className:"hover:no-underline py-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between w-full pr-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center w-14 h-14 rounded-lg bg-primary/10",children:[(0,b.jsx)("span",{className:"text-lg font-bold text-primary",children:(0,f.format)(new Date(a.visit_date),"dd")}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:(0,f.format)(new Date(a.visit_date),"MMM yy",{locale:g.id})})]}),(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(x.Building2,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("span",{className:"font-medium",children:a.department?.name||"Poli Umum"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(v.Stethoscope,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:a.doctor?.name||"Dokter"})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(a=>{switch(a){case"completed":return(0,b.jsx)(F.Badge,{variant:"success",children:"Selesai"});case"in_progress":return(0,b.jsx)(F.Badge,{variant:"warning",children:"Dalam Pemeriksaan"});case"cancelled":return(0,b.jsx)(F.Badge,{variant:"error",children:"Dibatalkan"});default:return(0,b.jsx)(F.Badge,{children:a})}})(a.status),a.invoice&&(a=>{switch(a){case"paid":return(0,b.jsx)(F.Badge,{variant:"success",children:"Lunas"});case"partial":return(0,b.jsx)(F.Badge,{variant:"warning",children:"Sebagian"});case"unpaid":return(0,b.jsx)(F.Badge,{variant:"error",children:"Belum Bayar"});default:return null}})(a.invoice.payment_status)]})]})}),(0,b.jsx)(K.AccordionContent,{className:"pb-4",children:(0,b.jsxs)("div",{className:"space-y-4 pt-2",children:[a.chief_complaint&&(0,b.jsxs)("div",{className:"p-3 rounded-lg bg-muted/50",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Keluhan Utama"}),(0,b.jsx)("p",{className:"text-sm",children:a.chief_complaint})]}),(a.blood_pressure||a.temperature||a.heart_rate)&&(0,b.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[a.blood_pressure&&(0,b.jsxs)("div",{className:"p-2 rounded bg-blue-50 dark:bg-blue-950 text-center",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Tekanan Darah"}),(0,b.jsx)("p",{className:"font-medium text-blue-700 dark:text-blue-300",children:a.blood_pressure})]}),a.heart_rate&&(0,b.jsxs)("div",{className:"p-2 rounded bg-red-50 dark:bg-red-950 text-center",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Nadi"}),(0,b.jsxs)("p",{className:"font-medium text-red-700 dark:text-red-300",children:[a.heart_rate," bpm"]})]}),a.temperature&&(0,b.jsxs)("div",{className:"p-2 rounded bg-orange-50 dark:bg-orange-950 text-center",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Suhu"}),(0,b.jsxs)("p",{className:"font-medium text-orange-700 dark:text-orange-300",children:[a.temperature,"Â°C"]})]}),a.weight&&(0,b.jsxs)("div",{className:"p-2 rounded bg-green-50 dark:bg-green-950 text-center",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Berat Badan"}),(0,b.jsxs)("p",{className:"font-medium text-green-700 dark:text-green-300",children:[a.weight," kg"]})]})]}),a.diagnosis&&(0,b.jsxs)("div",{className:"p-3 rounded-lg bg-purple-50 dark:bg-purple-950",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Diagnosis"}),(0,b.jsx)("p",{className:"text-sm font-medium text-purple-700 dark:text-purple-300",children:a.diagnosis}),a.diagnosis_notes&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:a.diagnosis_notes})]}),a.treatment&&(0,b.jsxs)("div",{className:"p-3 rounded-lg bg-muted/50",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Tindakan"}),(0,b.jsx)("p",{className:"text-sm",children:a.treatment})]}),a.prescriptions&&a.prescriptions.length>0&&(0,b.jsxs)("div",{className:"p-3 rounded-lg bg-green-50 dark:bg-green-950",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(y.Pill,{className:"h-4 w-4 text-green-600"}),(0,b.jsx)("p",{className:"text-xs font-medium text-green-700 dark:text-green-300",children:"Resep Obat"})]}),(0,b.jsx)("div",{className:"space-y-1",children:a.prescriptions.map(a=>a.items?.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsx)("span",{children:a.medicine_name}),(0,b.jsxs)("span",{className:"text-muted-foreground",children:[a.quantity,"x - ",a.dosage," ",a.frequency]})]},a.id)))})]}),a.invoice&&(0,b.jsx)("div",{className:"p-3 rounded-lg bg-blue-50 dark:bg-blue-950",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(z.Receipt,{className:"h-4 w-4 text-blue-600"}),(0,b.jsx)("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:a.invoice.invoice_number})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"font-semibold text-blue-700 dark:text-blue-300",children:(d=a.invoice.total_amount,new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(d))}),a.invoice.payment_method&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.invoice.payment_method_label})]})]})}),a.follow_up_date&&(0,b.jsxs)("div",{className:"flex items-center gap-2 p-2 rounded bg-yellow-50 dark:bg-yellow-950 text-sm",children:[(0,b.jsx)(w.Clock,{className:"h-4 w-4 text-yellow-600"}),(0,b.jsxs)("span",{className:"text-yellow-700 dark:text-yellow-300",children:["Kontrol:"," ",(0,f.format)(new Date(a.follow_up_date),"dd MMMM yyyy",{locale:g.id})]})]})]})})]},a.id)})}),$>1&&(0,b.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Halaman ",Y," dari ",$]}),(0,b.jsx)(J.Pagination,{currentPage:Y,totalPages:$,onPageChange:a=>{Z(a)}})]})]})})]})})]})]}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,b.jsx)(C.AlertCircle,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Pasien tidak ditemukan"}),(0,b.jsxs)("p",{className:"text-muted-foreground mb-4",children:["Data pasien dengan ID ",P," tidak ada"]}),(0,b.jsxs)(E.Button,{onClick:()=>O.push("/patients"),children:[(0,b.jsx)(h.ArrowLeft,{className:"mr-2 h-4 w-4"}),"Kembali ke Daftar Pasien"]})]})}a.s(["default",()=>O])}];

//# sourceMappingURL=src_app_%28dashboard%29_patients_%5Bid%5D_page_tsx_e5a6e05e._.js.map