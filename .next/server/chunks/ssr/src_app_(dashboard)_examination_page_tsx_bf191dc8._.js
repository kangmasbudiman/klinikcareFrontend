module.exports=[7084,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(46271),e=a.i(35126),f=a.i(69520),g=a.i(41710),h=a.i(16201),i=a.i(60246),j=a.i(14753),k=a.i(67900),l=a.i(11300),m=a.i(34012),n=a.i(46864),o=a.i(99570),p=a.i(91119),q=a.i(80701),r=a.i(86304),s=a.i(75083),t=a.i(210),u=a.i(14548),v=a.i(46842),w=a.i(41675),x=a.i(4720),y=a.i(3858),z=a.i(70106);let A=(0,z.default)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);var B=a.i(96221);let C=(0,z.default)("NotebookPen",[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]]);var D=a.i(29246),E=a.i(70430),F=a.i(66718),G=a.i(5084),H=a.i(76472),I=a.i(6021);let J=(0,z.default)("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]),K=(0,z.default)("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]),L=(0,z.default)("Wind",[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]]),M=(0,z.default)("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);function N({values:a,onChange:c,disabled:d}){let e=(a,b)=>{c(a,""===b?null:parseFloat(b))},f=a.weight&&a.height?(a.weight/Math.pow(a.height/100,2)).toFixed(1):null,g=a=>a<18.5?{label:"Kurus",color:"text-yellow-600"}:a<25?{label:"Normal",color:"text-green-600"}:a<30?{label:"Gemuk",color:"text-orange-600"}:{label:"Obesitas",color:"text-red-600"};return(0,b.jsxs)(p.Card,{children:[(0,b.jsx)(p.CardHeader,{className:"pb-4",children:(0,b.jsxs)(p.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,b.jsx)(H.Heart,{className:"h-5 w-5 text-red-500"}),"Tanda Vital (Vital Signs)"]})}),(0,b.jsx)(p.CardContent,{children:(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(E.Label,{className:"flex items-center gap-1",children:[(0,b.jsx)(M,{className:"h-4 w-4 text-red-500"}),"Tekanan Darah"]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(F.Input,{type:"number",placeholder:"Sistolik",value:a.blood_pressure_systolic??"",onChange:a=>e("blood_pressure_systolic",a.target.value),disabled:d,className:"w-20"}),(0,b.jsx)("span",{children:"/"}),(0,b.jsx)(F.Input,{type:"number",placeholder:"Diastolik",value:a.blood_pressure_diastolic??"",onChange:a=>e("blood_pressure_diastolic",a.target.value),disabled:d,className:"w-20"}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"mmHg"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(E.Label,{className:"flex items-center gap-1",children:[(0,b.jsx)(H.Heart,{className:"h-4 w-4 text-red-500"}),"Denyut Nadi"]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(F.Input,{type:"number",placeholder:"60-100",value:a.heart_rate??"",onChange:a=>e("heart_rate",a.target.value),disabled:d}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"bpm"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(E.Label,{className:"flex items-center gap-1",children:[(0,b.jsx)(L,{className:"h-4 w-4 text-blue-500"}),"Frekuensi Napas"]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(F.Input,{type:"number",placeholder:"12-20",value:a.respiratory_rate??"",onChange:a=>e("respiratory_rate",a.target.value),disabled:d}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"x/mnt"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(E.Label,{className:"flex items-center gap-1",children:[(0,b.jsx)(I.Thermometer,{className:"h-4 w-4 text-orange-500"}),"Suhu Tubuh"]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(F.Input,{type:"number",step:"0.1",placeholder:"36.5",value:a.temperature??"",onChange:a=>e("temperature",a.target.value),disabled:d}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Â°C"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(E.Label,{className:"flex items-center gap-1",children:[(0,b.jsx)(M,{className:"h-4 w-4 text-blue-500"}),"Saturasi O2"]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(F.Input,{type:"number",placeholder:"95-100",value:a.oxygen_saturation??"",onChange:a=>e("oxygen_saturation",a.target.value),disabled:d}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"%"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(E.Label,{className:"flex items-center gap-1",children:[(0,b.jsx)(J,{className:"h-4 w-4 text-green-500"}),"Berat Badan"]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(F.Input,{type:"number",step:"0.1",placeholder:"60",value:a.weight??"",onChange:a=>e("weight",a.target.value),disabled:d}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"kg"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(E.Label,{className:"flex items-center gap-1",children:[(0,b.jsx)(K,{className:"h-4 w-4 text-purple-500"}),"Tinggi Badan"]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(F.Input,{type:"number",step:"0.1",placeholder:"170",value:a.height??"",onChange:a=>e("height",a.target.value),disabled:d}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"cm"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(E.Label,{children:"BMI (Indeks Massa Tubuh)"}),(0,b.jsx)("div",{className:"flex items-center gap-2 h-10 px-3 border rounded-md bg-muted",children:f?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"font-semibold",children:f}),(0,b.jsxs)("span",{className:`text-sm ${g(parseFloat(f)).color}`,children:["(",g(parseFloat(f)).label,")"]})]}):(0,b.jsx)("span",{className:"text-muted-foreground",children:"-"})})]})]})})]})}var O=a.i(15618),P=a.i(81560),Q=a.i(87532),R=a.i(83497),S=a.i(85611);let T={medicine_id:void 0,medicine_name:"",dosage:"",frequency:"",duration:"",quantity:1,instructions:""},U=["1x1","2x1","3x1","4x1","1x2","2x2","3x2","Jika perlu"],V=["3 hari","5 hari","7 hari","10 hari","14 hari","1 bulan"];function W({items:a,onChange:c,disabled:d}){let e=()=>{c([...a,{...T}])},f=b=>{c(a.filter((a,c)=>c!==b))},g=(b,d)=>{let e=[...a];e[b]={...e[b],...d},c(e)};return(0,b.jsxs)(p.Card,{children:[(0,b.jsx)(p.CardHeader,{className:"pb-4",children:(0,b.jsxs)(p.CardTitle,{className:"text-lg flex items-center justify-between",children:[(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)(y.Pill,{className:"h-5 w-5 text-green-500"}),"Resep Obat"]}),(0,b.jsxs)(o.Button,{type:"button",size:"sm",variant:"outline",onClick:e,disabled:d,children:[(0,b.jsx)(O.Plus,{className:"h-4 w-4 mr-1"}),"Tambah Obat"]})]})}),(0,b.jsx)(p.CardContent,{className:"space-y-4",children:0===a.length?(0,b.jsxs)("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[(0,b.jsx)(y.Pill,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),(0,b.jsx)("p",{children:"Belum ada obat ditambahkan"}),(0,b.jsx)(o.Button,{type:"button",variant:"link",onClick:e,disabled:d,children:"+ Tambah Obat"})]}):a.map((a,c)=>(0,b.jsx)(X,{item:a,index:c,disabled:d,onUpdate:g,onRemove:f},c))})]})}function X({item:a,index:d,disabled:e,onUpdate:f,onRemove:g}){let[h,i]=(0,c.useState)(a.medicine_name),[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(!1),[n,p]=(0,c.useState)(!1),q=(0,c.useRef)(null);(0,c.useEffect)(()=>{i(a.medicine_name)},[a.medicine_name]),(0,c.useEffect)(()=>{if(h.length<2)return void k([]);let a=setTimeout(async()=>{m(!0);try{let a=await S.medicineService.getActiveMedicines({search:h});k(a.data||[])}catch(a){console.error("Error searching medicines:",a),k([])}finally{m(!1)}},300);return()=>clearTimeout(a)},[h]),(0,c.useEffect)(()=>{let a=a=>{q.current&&!q.current.contains(a.target)&&p(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);let s=(a,b)=>{f(d,{[a]:b})};return(0,b.jsxs)("div",{className:"p-4 border rounded-lg space-y-3 relative",children:[(0,b.jsx)(o.Button,{type:"button",size:"icon",variant:"ghost",className:"absolute top-2 right-2 h-8 w-8 text-red-500 hover:text-red-700",onClick:()=>g(d),disabled:e,children:(0,b.jsx)(P.Trash2,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{className:"pr-10",children:[(0,b.jsx)(E.Label,{children:"Nama Obat *"}),(0,b.jsxs)("div",{className:"relative",ref:q,children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(Q.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground z-10"}),(0,b.jsx)(F.Input,{type:"text",placeholder:"Ketik untuk mencari obat...",className:"pl-10",value:h,onChange:a=>{let b=a.target.value;i(b),p(!0),f(d,{medicine_name:b,medicine_id:void 0,stock:void 0,unit:void 0})},onFocus:()=>p(!0),disabled:e,autoComplete:"off"}),l&&(0,b.jsx)(B.Loader2,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 animate-spin text-muted-foreground"})]}),n&&h.length>=2&&(0,b.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-popover border rounded-md shadow-lg max-h-60 overflow-y-auto",children:l?(0,b.jsxs)("div",{className:"px-3 py-4 text-center text-sm text-muted-foreground",children:[(0,b.jsx)(B.Loader2,{className:"h-4 w-4 animate-spin mx-auto mb-2"}),"Mencari obat..."]}):j.length>0?j.map(a=>(0,b.jsx)("div",{className:"px-3 py-2 hover:bg-muted cursor-pointer border-b last:border-b-0",onClick:()=>{i(a.name),p(!1),k([]),f(d,{medicine_id:a.id,medicine_name:a.name,dosage:a.unit||"",stock:a.current_stock,unit:a.unit})},children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(R.Package,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-sm",children:a.name}),a.generic_name&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.generic_name})]})]}),(0,b.jsx)("div",{className:"text-right flex-shrink-0",children:(0,b.jsxs)(r.Badge,{variant:"outline",className:a.current_stock>a.min_stock?"text-green-600 border-green-600":a.current_stock>0?"text-yellow-600 border-yellow-600":"text-red-600 border-red-600",children:["Stok: ",a.current_stock," ",a.unit]})})]})},a.id)):(0,b.jsxs)("div",{className:"px-3 py-4 text-center text-sm text-muted-foreground",children:['Tidak ditemukan obat dengan kata kunci "',h,'"']})})]}),a.medicine_id&&void 0!==a.stock&&(0,b.jsx)("div",{className:"mt-2 flex items-center gap-2",children:(0,b.jsxs)(r.Badge,{variant:"secondary",className:"text-xs",children:[(0,b.jsx)(R.Package,{className:"h-3 w-3 mr-1"}),"Stok tersedia: ",a.stock," ",a.unit]})})]}),(0,b.jsxs)("div",{className:"grid gap-3 sm:grid-cols-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(E.Label,{children:"Dosis"}),(0,b.jsx)(F.Input,{type:"text",placeholder:"500mg",value:a.dosage,onChange:a=>s("dosage",a.target.value),disabled:e})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(E.Label,{children:"Frekuensi"}),(0,b.jsx)(F.Input,{type:"text",placeholder:"3x1",value:a.frequency,onChange:a=>s("frequency",a.target.value),disabled:e,list:`freq-${d}`}),(0,b.jsx)("datalist",{id:`freq-${d}`,children:U.map(a=>(0,b.jsx)("option",{value:a},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(E.Label,{children:"Durasi"}),(0,b.jsx)(F.Input,{type:"text",placeholder:"5 hari",value:a.duration,onChange:a=>s("duration",a.target.value),disabled:e,list:`dur-${d}`}),(0,b.jsx)("datalist",{id:`dur-${d}`,children:V.map(a=>(0,b.jsx)("option",{value:a},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(E.Label,{children:"Jumlah"}),(0,b.jsx)(F.Input,{type:"number",min:"1",placeholder:"10",value:a.quantity,onChange:a=>s("quantity",parseInt(a.target.value)||1),disabled:e})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(E.Label,{children:"Aturan Pakai / Instruksi"}),(0,b.jsx)(F.Input,{type:"text",placeholder:"Contoh: Setelah makan",value:a.instructions,onChange:a=>s("instructions",a.target.value),disabled:e})]})]})}var Y=a.i(57484);function Z({items:a,onChange:d,departmentId:e}){let[f,g]=(0,c.useState)([]),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(""),n=(0,c.useRef)(null);(0,c.useEffect)(()=>{(async()=>{i(!0);try{let a=await Y.default.getActiveServices({department_id:e});g(a.data)}catch(a){console.error("Error fetching services:",a)}finally{i(!1)}})()},[e]),(0,c.useEffect)(()=>{let a=a=>{n.current&&!n.current.contains(a.target)&&(k(null),m(""))};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);let q=(b,c,e)=>{let f=[...a];f[b]={...f[b],[c]:e},d(f)},s=f.filter(a=>a.name.toLowerCase().includes(l.toLowerCase())||a.code.toLowerCase().includes(l.toLowerCase())),t=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a),u=a.reduce((a,b)=>a+b.quantity*b.unit_price,0);return(0,b.jsxs)(p.Card,{children:[(0,b.jsx)(p.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(p.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,b.jsx)(R.Package,{className:"h-5 w-5"}),"Layanan / Tindakan"]}),(0,b.jsxs)(o.Button,{type:"button",size:"sm",onClick:()=>{d([...a,{service_name:"",quantity:1,unit_price:0}])},children:[(0,b.jsx)(O.Plus,{className:"h-4 w-4 mr-1"}),"Tambah Layanan"]})]})}),(0,b.jsx)(p.CardContent,{className:"space-y-4",children:0===a.length?(0,b.jsxs)("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[(0,b.jsx)(R.Package,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),(0,b.jsx)("p",{children:"Belum ada layanan ditambahkan"}),(0,b.jsx)("p",{className:"text-sm",children:'Klik tombol "Tambah Layanan" untuk menambahkan'})]}):(0,b.jsxs)("div",{className:"space-y-3",children:[a.map((c,e)=>(0,b.jsxs)("div",{className:"p-4 rounded-lg border bg-muted/30 space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsxs)("div",{className:"flex-1 relative",ref:j===e?n:null,children:[(0,b.jsx)(E.Label,{className:"text-xs text-muted-foreground mb-1 block",children:"Nama Layanan"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(F.Input,{placeholder:"Cari atau ketik nama layanan...",value:j===e?l:c.service_name,onChange:a=>{j===e?m(a.target.value):(q(e,"service_name",a.target.value),q(e,"service_id",void 0))},onFocus:()=>{k(e),m(c.service_name)},className:"h-10 pr-10"}),(0,b.jsx)(Q.Search,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"})]}),j===e&&(0,b.jsxs)("div",{className:"absolute z-50 w-full mt-1 bg-popover border rounded-lg shadow-lg max-h-[300px] overflow-y-auto",children:[h?(0,b.jsx)("div",{className:"flex items-center justify-center py-6",children:(0,b.jsx)(B.Loader2,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):0===s.length?(0,b.jsxs)("div",{className:"py-4 px-3 text-center text-sm text-muted-foreground",children:[(0,b.jsx)("p",{children:"Layanan tidak ditemukan"}),(0,b.jsx)("p",{className:"text-xs mt-1",children:"Tekan Enter untuk gunakan input manual"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"px-3 py-2 text-xs font-medium text-muted-foreground border-b bg-muted/50",children:"Pilih dari daftar layanan"}),s.map(c=>(0,b.jsxs)("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-muted/50 flex items-center justify-between border-b last:border-b-0 transition-colors",onClick:()=>{let b;(b=[...a])[e]={service_id:c.id,service_name:c.name,quantity:1,unit_price:c.total_price},d(b),k(null),m("")},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-sm",children:c.name}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[c.code," - ",c.category_label]})]}),(0,b.jsx)(r.Badge,{variant:"secondary",className:"ml-2",children:t(c.total_price)})]},c.id))]}),l&&(0,b.jsxs)("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-primary/10 flex items-center gap-2 border-t bg-muted/30",onClick:()=>{q(e,"service_name",l),q(e,"service_id",void 0),k(null),m("")},children:[(0,b.jsx)(O.Plus,{className:"h-4 w-4 text-primary"}),(0,b.jsxs)("span",{className:"text-sm",children:["Gunakan: ",(0,b.jsxs)("strong",{children:['"',l,'"']})]})]})]})]}),(0,b.jsxs)("div",{className:"w-24",children:[(0,b.jsx)(E.Label,{className:"text-xs text-muted-foreground mb-1 block",children:"Jumlah"}),(0,b.jsx)(F.Input,{type:"number",min:1,value:c.quantity,onChange:a=>q(e,"quantity",parseInt(a.target.value)||1),className:"h-10"})]}),(0,b.jsxs)("div",{className:"w-36",children:[(0,b.jsx)(E.Label,{className:"text-xs text-muted-foreground mb-1 block",children:"Harga Satuan"}),(0,b.jsx)(F.Input,{type:"number",min:0,value:c.unit_price,onChange:a=>q(e,"unit_price",parseFloat(a.target.value)||0),className:"h-10"})]}),(0,b.jsx)("div",{className:"pt-6",children:(0,b.jsx)(o.Button,{type:"button",size:"icon",variant:"ghost",className:"h-10 w-10 text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>{d(a.filter((a,b)=>b!==e))},children:(0,b.jsx)(P.Trash2,{className:"h-4 w-4"})})})]}),(0,b.jsx)("div",{className:"flex justify-end pt-2 border-t",children:(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground mr-2",children:"Subtotal:"}),(0,b.jsx)("span",{className:"font-semibold",children:t(c.quantity*c.unit_price)})]})})]},e)),a.length>0&&(0,b.jsx)("div",{className:"flex justify-end p-4 rounded-lg bg-primary/5 border border-primary/20",children:(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("span",{className:"text-muted-foreground mr-3",children:"Total Layanan:"}),(0,b.jsx)("span",{className:"text-xl font-bold text-primary",children:t(u)})]})})]})})]})}var $=a.i(97063);let _=(0,z.default)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),aa=(0,z.default)("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);var ab=a.i(85259),ac=a.i(23292);function ad({label:a,placeholder:d,value:e,onChange:f,rows:g=4,badgeLetter:h,badgeColor:i,description:j,isRecordingActive:k=!1,onRecordingStart:l,onRecordingStop:m}){let{isListening:n,isSupported:p,transcript:q,startListening:r,stopListening:s}=function(a={}){let{lang:b="id-ID",continuous:d=!0,interimResults:e=!0,onResult:f,onError:g}=a,[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(!1),p=(0,c.useRef)(null),q=(0,c.useRef)(f),r=(0,c.useRef)(g);(0,c.useEffect)(()=>{q.current=f,r.current=g},[f,g]),(0,c.useEffect)(()=>{},[]);let s=(0,c.useCallback)(()=>{},[b,d,e]),t=(0,c.useCallback)(()=>{p.current&&(p.current.stop(),p.current=null),i(!1)},[]);return(0,c.useEffect)(()=>()=>{p.current&&(p.current.stop(),p.current=null)},[]),{isListening:h,isSupported:n,transcript:j,startListening:s,stopListening:t,error:l}}({lang:"id-ID",onResult:(0,c.useCallback)((a,b)=>{b&&f(e+(e?" ":"")+a)},[e,f]),onError:(0,c.useCallback)(a=>{ac.toast.error("Voice Input Error",{description:a})},[])});return(0,c.useEffect)(()=>{!1===k&&n&&s()},[k,n,s]),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:`inline-flex h-7 w-7 items-center justify-center rounded-md text-sm font-bold text-white ${i}`,children:h}),(0,b.jsx)(E.Label,{className:"text-sm font-semibold",children:a})]}),j&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:j}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(D.Textarea,{placeholder:d,value:e,onChange:a=>f(a.target.value),rows:g,className:"pr-12"}),(0,b.jsx)("div",{className:"absolute bottom-2 right-2",children:(0,b.jsx)(ab.TooltipProvider,{children:(0,b.jsxs)(ab.Tooltip,{children:[(0,b.jsx)(ab.TooltipTrigger,{asChild:!0,children:(0,b.jsx)(o.Button,{type:"button",variant:n?"destructive":"outline",size:"icon",className:`h-8 w-8 ${n?"animate-pulse-ring bg-red-500 hover:bg-red-600 text-white":""}`,onClick:()=>{n?(s(),m?.()):(r(),l?.())},disabled:!p,children:n?(0,b.jsx)(aa,{className:"h-4 w-4"}):(0,b.jsx)(_,{className:"h-4 w-4"})})}),(0,b.jsx)(ab.TooltipContent,{children:p?n?"Klik untuk berhenti rekam":"Klik untuk mulai rekam suara":"Browser tidak mendukung voice input. Gunakan Google Chrome."})]})})})]}),n&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs text-red-500",children:[(0,b.jsxs)("span",{className:"relative flex h-2 w-2",children:[(0,b.jsx)("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full bg-red-400 opacity-75"}),(0,b.jsx)("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-red-500"})]}),(0,b.jsxs)("span",{children:["Sedang mendengarkan..."," ",q&&(0,b.jsx)("span",{className:"italic text-muted-foreground",children:q})]})]})]})}function ae({values:a,onChange:d}){let[e,f]=(0,c.useState)(null),g=(0,c.useCallback)(a=>{f(a)},[]),h=(0,c.useCallback)(()=>{f(null)},[]);return(0,b.jsxs)(p.Card,{children:[(0,b.jsxs)(p.CardHeader,{children:[(0,b.jsx)(p.CardTitle,{className:"text-lg",children:"CPPT - Catatan Perkembangan Pasien Terintegrasi"}),(0,b.jsxs)("div",{className:"flex items-start gap-2 rounded-md bg-blue-50 p-3 text-sm text-blue-700 dark:bg-blue-950/30 dark:text-blue-300",children:[(0,b.jsx)($.Info,{className:"mt-0.5 h-4 w-4 shrink-0"}),(0,b.jsx)("p",{children:"CPPT merupakan catatan perkembangan terintegrasi dalam format SOAP yang digunakan untuk mendokumentasikan perkembangan kondisi pasien. Anda dapat mengetik langsung atau menggunakan tombol mikrofon untuk input suara."})]})]}),(0,b.jsxs)(p.CardContent,{className:"space-y-6",children:[(0,b.jsx)(ad,{badgeLetter:"S",badgeColor:"bg-blue-500",label:"Subjective",description:"Keluhan dan gejala yang disampaikan pasien, riwayat perjalanan penyakit",placeholder:"Keluhan pasien, gejala yang dirasakan, riwayat yang disampaikan pasien...",value:a.soap_subjective,onChange:a=>d("soap_subjective",a),rows:4,isRecordingActive:"soap_subjective"===e,onRecordingStart:()=>g("soap_subjective"),onRecordingStop:h}),(0,b.jsx)(ad,{badgeLetter:"O",badgeColor:"bg-green-500",label:"Objective",description:"Hasil pemeriksaan fisik, tanda vital, hasil laboratorium dan penunjang",placeholder:"Hasil pemeriksaan fisik, tanda vital, hasil laboratorium, hasil penunjang...",value:a.soap_objective,onChange:a=>d("soap_objective",a),rows:4,isRecordingActive:"soap_objective"===e,onRecordingStart:()=>g("soap_objective"),onRecordingStop:h}),(0,b.jsx)(ad,{badgeLetter:"A",badgeColor:"bg-orange-500",label:"Assessment",description:"Diagnosis, diagnosis banding, dan penilaian klinis",placeholder:"Diagnosis, diagnosis banding, penilaian klinis...",value:a.soap_assessment,onChange:a=>d("soap_assessment",a),rows:3,isRecordingActive:"soap_assessment"===e,onRecordingStart:()=>g("soap_assessment"),onRecordingStop:h}),(0,b.jsx)(ad,{badgeLetter:"P",badgeColor:"bg-purple-500",label:"Plan",description:"Rencana terapi, tindakan medis, edukasi pasien, dan rencana kontrol",placeholder:"Rencana terapi, tindakan, edukasi, rencana kontrol...",value:a.soap_plan,onChange:a=>d("soap_plan",a),rows:3,isRecordingActive:"soap_plan"===e,onRecordingStart:()=>g("soap_plan"),onRecordingStop:h})]})]})}var af=a.i(41572);function ag({medicalRecord:a,queue:f,onClose:g,onUpdate:i}){let[j,m]=(0,c.useState)(!1),[n,q]=(0,c.useState)(!1),[z,H]=(0,c.useState)("anamnesis"),[I,J]=(0,c.useState)({chief_complaint:a.chief_complaint||"",present_illness:a.present_illness||"",past_medical_history:a.past_medical_history||"",family_history:a.family_history||"",allergy_notes:a.allergy_notes||"",blood_pressure_systolic:a.blood_pressure_systolic,blood_pressure_diastolic:a.blood_pressure_diastolic,heart_rate:a.heart_rate,respiratory_rate:a.respiratory_rate,temperature:a.temperature,weight:a.weight,height:a.height,oxygen_saturation:a.oxygen_saturation,physical_examination:a.physical_examination||"",diagnosis:a.diagnosis||"",diagnosis_notes:a.diagnosis_notes||"",treatment:a.treatment||"",treatment_notes:a.treatment_notes||"",recommendations:a.recommendations||"",follow_up_date:a.follow_up_date||"",soap_subjective:a.soap_subjective||"",soap_objective:a.soap_objective||"",soap_assessment:a.soap_assessment||"",soap_plan:a.soap_plan||""}),[K,L]=(0,c.useState)([]),[M,O]=(0,c.useState)([]);(0,c.useEffect)(()=>{a.prescriptions&&a.prescriptions.length>0&&L(a.prescriptions.flatMap(a=>(a.items||[]).map(a=>({medicine_name:a.medicine_name,dosage:a.dosage||"",frequency:a.frequency||"",duration:a.duration||"",quantity:a.quantity,instructions:a.instructions||""}))))},[a.prescriptions]),(0,c.useEffect)(()=>{a.services&&a.services.length>0&&O(a.services.map(a=>({service_id:a.service_id??void 0,service_name:a.service_name,quantity:a.quantity,unit_price:a.unit_price})))},[a.services]);let P=(a,b)=>{J(c=>({...c,[a]:b}))},Q=async()=>{q(!0);try{let b={...I,services:M.map(a=>({service_name:a.service_name,quantity:a.quantity,unit_price:a.unit_price}))},c=await af.default.updateMedicalRecord(a.id,b);i(c.data),K.length>0&&K.some(a=>a.medicine_name)&&await af.default.addPrescription(a.id,{items:K.filter(a=>a.medicine_name)}),ac.toast.success("Data berhasil disimpan",{description:"Data pemeriksaan telah tersimpan"})}catch(a){console.error("Error saving:",a),ac.toast.error("Gagal menyimpan data",{description:a.response?.data?.message||"Terjadi kesalahan"})}finally{q(!1)}},R=async()=>{if(confirm("Apakah Anda yakin ingin menyelesaikan pemeriksaan ini?")){m(!0);try{await Q(),await af.default.completeExamination(a.id,!0),ac.toast.success("Pemeriksaan selesai",{description:"Invoice telah dibuat dan pasien dapat melanjutkan ke kasir"}),g()}catch(a){console.error("Error completing:",a),ac.toast.error("Gagal menyelesaikan pemeriksaan",{description:a.response?.data?.message||"Terjadi kesalahan"})}finally{m(!1)}}},S=a.patient;return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(o.Button,{variant:"ghost",size:"icon",onClick:g,children:(0,b.jsx)(t.ArrowLeft,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Form Pemeriksaan"}),(0,b.jsxs)("p",{className:"text-muted-foreground",children:[a.record_number," - ",f?.queue_code]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(o.Button,{variant:"outline",onClick:Q,disabled:n,children:[n?(0,b.jsx)(B.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}):(0,b.jsx)(u.Save,{className:"h-4 w-4 mr-2"}),"Simpan"]}),(0,b.jsxs)(o.Button,{onClick:R,disabled:j,children:[j?(0,b.jsx)(B.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}):(0,b.jsx)(h.CheckCircle,{className:"h-4 w-4 mr-2"}),"Selesai Periksa"]})]})]}),(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:(0,b.jsx)(p.Card,{children:(0,b.jsxs)(p.CardContent,{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[(0,b.jsx)("div",{className:"p-3 rounded-full bg-primary/10",children:(0,b.jsx)(v.User,{className:"h-8 w-8 text-primary"})}),(0,b.jsxs)("div",{className:"flex-1 grid gap-2 sm:grid-cols-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Nama Pasien"}),(0,b.jsx)("p",{className:"font-semibold",children:S?.name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No. RM"}),(0,b.jsx)("p",{className:"font-medium",children:S?.medical_record_number})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Umur / Jenis Kelamin"}),(0,b.jsxs)("p",{className:"font-medium",children:[S?.age," tahun / ",S?.gender_label]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Tipe Pasien"}),(0,b.jsx)(r.Badge,{variant:S?.patient_type==="bpjs"?"success":"secondary",children:S?.patient_type_label})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(r.Badge,{variant:"outline",children:[(0,b.jsx)(k.Building2,{className:"h-3 w-3 mr-1"}),a.department?.name]}),(0,b.jsxs)(r.Badge,{variant:"outline",children:[(0,b.jsx)(w.Calendar,{className:"h-3 w-3 mr-1"}),new Date(a.visit_date).toLocaleDateString("id-ID")]})]})]}),S?.allergies&&(0,b.jsxs)("div",{className:"mt-3 p-2 rounded bg-red-50 dark:bg-red-950/30 text-red-700 dark:text-red-300 text-sm",children:[(0,b.jsx)("strong",{children:"Alergi:"})," ",S.allergies]})]})})}),(0,b.jsx)(d.motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:(0,b.jsxs)(s.Tabs,{value:z,onValueChange:H,children:[(0,b.jsxs)(s.TabsList,{className:"grid w-full grid-cols-6",children:[(0,b.jsxs)(s.TabsTrigger,{value:"anamnesis",className:"gap-1",children:[(0,b.jsx)(l.ClipboardList,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Anamnesis"})]}),(0,b.jsxs)(s.TabsTrigger,{value:"vitals",className:"gap-1",children:[(0,b.jsx)(e.Stethoscope,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Vital Signs"})]}),(0,b.jsxs)(s.TabsTrigger,{value:"diagnosis",className:"gap-1",children:[(0,b.jsx)(x.FileText,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Diagnosis"})]}),(0,b.jsxs)(s.TabsTrigger,{value:"prescription",className:"gap-1",children:[(0,b.jsx)(y.Pill,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Resep"})]}),(0,b.jsxs)(s.TabsTrigger,{value:"recommendation",className:"gap-1",children:[(0,b.jsx)(A,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Anjuran"})]}),(0,b.jsxs)(s.TabsTrigger,{value:"cppt",className:"gap-1",children:[(0,b.jsx)(C,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"CPPT"})]})]}),(0,b.jsx)(s.TabsContent,{value:"anamnesis",className:"space-y-4 mt-4",children:(0,b.jsxs)(p.Card,{children:[(0,b.jsx)(p.CardHeader,{children:(0,b.jsx)(p.CardTitle,{className:"text-lg",children:"Anamnesis (Keluhan)"})}),(0,b.jsxs)(p.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(E.Label,{children:"Keluhan Utama *"}),(0,b.jsx)(D.Textarea,{placeholder:"Masukkan keluhan utama pasien...",value:I.chief_complaint||"",onChange:a=>P("chief_complaint",a.target.value),rows:3})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(E.Label,{children:"Riwayat Penyakit Sekarang"}),(0,b.jsx)(D.Textarea,{placeholder:"Ceritakan perjalanan penyakit...",value:I.present_illness||"",onChange:a=>P("present_illness",a.target.value),rows:3})]}),(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(E.Label,{children:"Riwayat Penyakit Dahulu"}),(0,b.jsx)(D.Textarea,{placeholder:"Penyakit yang pernah diderita...",value:I.past_medical_history||"",onChange:a=>P("past_medical_history",a.target.value),rows:2})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(E.Label,{children:"Riwayat Penyakit Keluarga"}),(0,b.jsx)(D.Textarea,{placeholder:"Riwayat penyakit dalam keluarga...",value:I.family_history||"",onChange:a=>P("family_history",a.target.value),rows:2})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(E.Label,{children:"Catatan Alergi"}),(0,b.jsx)(D.Textarea,{placeholder:"Alergi obat, makanan, dll...",value:I.allergy_notes||"",onChange:a=>P("allergy_notes",a.target.value),rows:2})]})]})]})}),(0,b.jsxs)(s.TabsContent,{value:"vitals",className:"space-y-4 mt-4",children:[(0,b.jsx)(N,{values:{blood_pressure_systolic:I.blood_pressure_systolic,blood_pressure_diastolic:I.blood_pressure_diastolic,heart_rate:I.heart_rate,respiratory_rate:I.respiratory_rate,temperature:I.temperature,weight:I.weight,height:I.height,oxygen_saturation:I.oxygen_saturation},onChange:(a,b)=>{J(c=>({...c,[a]:b}))}}),(0,b.jsxs)(p.Card,{children:[(0,b.jsx)(p.CardHeader,{children:(0,b.jsx)(p.CardTitle,{className:"text-lg",children:"Pemeriksaan Fisik"})}),(0,b.jsx)(p.CardContent,{children:(0,b.jsx)(D.Textarea,{placeholder:"Hasil pemeriksaan fisik...",value:I.physical_examination||"",onChange:a=>P("physical_examination",a.target.value),rows:4})})]})]}),(0,b.jsxs)(s.TabsContent,{value:"diagnosis",className:"space-y-4 mt-4",children:[(0,b.jsxs)(p.Card,{children:[(0,b.jsx)(p.CardHeader,{children:(0,b.jsx)(p.CardTitle,{className:"text-lg",children:"Diagnosis & Tindakan"})}),(0,b.jsxs)(p.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(E.Label,{children:"Diagnosis *"}),(0,b.jsx)(D.Textarea,{placeholder:"Masukkan diagnosis...",value:I.diagnosis||"",onChange:a=>P("diagnosis",a.target.value),rows:3})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(E.Label,{children:"Catatan Diagnosis"}),(0,b.jsx)(D.Textarea,{placeholder:"Catatan tambahan untuk diagnosis...",value:I.diagnosis_notes||"",onChange:a=>P("diagnosis_notes",a.target.value),rows:2})]}),(0,b.jsx)(G.Separator,{}),(0,b.jsxs)("div",{children:[(0,b.jsx)(E.Label,{children:"Tindakan / Treatment"}),(0,b.jsx)(D.Textarea,{placeholder:"Tindakan yang dilakukan...",value:I.treatment||"",onChange:a=>P("treatment",a.target.value),rows:3})]})]})]}),(0,b.jsx)(Z,{items:M,onChange:O,departmentId:a.department_id})]}),(0,b.jsx)(s.TabsContent,{value:"prescription",className:"mt-4",children:(0,b.jsx)(W,{items:K,onChange:L})}),(0,b.jsx)(s.TabsContent,{value:"recommendation",className:"space-y-4 mt-4",children:(0,b.jsxs)(p.Card,{children:[(0,b.jsx)(p.CardHeader,{children:(0,b.jsx)(p.CardTitle,{className:"text-lg",children:"Anjuran & Kontrol"})}),(0,b.jsxs)(p.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(E.Label,{children:"Anjuran untuk Pasien"}),(0,b.jsx)(D.Textarea,{placeholder:"Anjuran, saran, dan edukasi untuk pasien...",value:I.recommendations||"",onChange:a=>P("recommendations",a.target.value),rows:4})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(E.Label,{children:"Tanggal Kontrol"}),(0,b.jsx)(F.Input,{type:"date",value:I.follow_up_date||"",onChange:a=>P("follow_up_date",a.target.value),className:"w-48"})]})]})]})}),(0,b.jsx)(s.TabsContent,{value:"cppt",className:"space-y-4 mt-4",children:(0,b.jsx)(ae,{values:{soap_subjective:I.soap_subjective||"",soap_objective:I.soap_objective||"",soap_assessment:I.soap_assessment||"",soap_plan:I.soap_plan||""},onChange:(a,b)=>P(a,b)})})]})})]})}a.i(34848),a.i(14574),a.i(69876);var ah=a.i(71565),ai=a.i(11710);function aj(){let{user:a}=(0,ai.useAuth)(),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)([]),[x,y]=(0,c.useState)([]),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)([]),[D,E]=(0,c.useState)("all"),[F,G]=(0,c.useState)(!0),[H,I]=(0,c.useState)(!1),[J,K]=(0,c.useState)("active"),[L,M]=(0,c.useState)(null),[N,O]=(0,c.useState)(null),P=a?.role==="dokter",Q=a?.departments||[],R=Q.length>0,S=(0,c.useCallback)(async()=>{try{let a="all"!==D?parseInt(D):void 0,b=await af.default.getPendingExaminations(a);u(b.data.waiting),w(b.data.in_progress)}catch(a){console.error("Error fetching pending examinations:",a)}},[D]),T=(0,c.useCallback)(async()=>{try{let a="all"!==D?parseInt(D):void 0,b=await af.default.getExaminationStats(void 0,a);A(b.data)}catch(a){console.error("Error fetching stats:",a)}},[D]),U=(0,c.useCallback)(async()=>{try{let a="all"!==D?parseInt(D):void 0,b=await af.default.getCompletedExaminations(a);y(b.data)}catch(a){console.error("Error fetching completed examinations:",a)}},[D]),V=(0,c.useCallback)(async()=>{try{let a=await ah.default.getActiveDepartments();if(P&&R){let b=Q.map(a=>a.id),c=a.data.filter(a=>b.includes(a.id));C(c);let d=Q.find(a=>a.is_primary);d?E(d.id.toString()):c.length>0&&E(c[0].id.toString())}else C(a.data)}catch(a){console.error("Error fetching departments:",a)}},[P,R,Q]);(0,c.useEffect)(()=>{(async()=>{G(!0),await Promise.all([S(),T(),V(),U()]),G(!1)})()},[S,T,V,U]),(0,c.useEffect)(()=>{let a=setInterval(()=>{S(),T(),U()},15e3);return()=>clearInterval(a)},[S,T,U]);let W=async()=>{I(!0),await Promise.all([S(),T(),U()]),I(!1)},X=async a=>{try{let b=await af.default.startExamination({queue_id:a.id});M(b.data),O(a),ac.toast.success("Pemeriksaan dimulai",{description:`Pasien ${a.patient?.name||a.queue_code}`}),W()}catch(a){console.error("Error starting examination:",a),ac.toast.error("Gagal memulai pemeriksaan",{description:a.response?.data?.message||"Terjadi kesalahan"})}},Y=async a=>{try{let b=await af.default.getMedicalRecordById(a.id);M(b.data),O(a.queue||null)}catch(a){console.error("Error loading examination:",a),ac.toast.error("Gagal memuat data pemeriksaan",{description:a.response?.data?.message||"Terjadi kesalahan"})}},Z=[{title:"Menunggu Diperiksa",value:z?.waiting||0,icon:g.Clock,color:"yellow"},{title:"Sedang Diperiksa",value:z?.in_progress||0,icon:e.Stethoscope,color:"blue"},{title:"Selesai Hari Ini",value:z?.completed||0,icon:h.CheckCircle,color:"green"},{title:"Rata-rata Waktu",value:z?.avg_exam_time?`${z.avg_exam_time} mnt`:"-",icon:j.Timer,color:"purple"}],$={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return L?(0,b.jsx)(ag,{medicalRecord:L,queue:N,onClose:()=>{M(null),O(null),W()},onUpdate:a=>M(a)}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Pemeriksaan Pasien"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:P&&R?`Poli: ${Q.map(a=>a.name).join(", ")}`:"Layanan pemeriksaan pasien hari ini"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(q.Select,{value:D,onValueChange:E,children:[(0,b.jsxs)(q.SelectTrigger,{className:"w-[200px]",children:[(0,b.jsx)(k.Building2,{className:"mr-2 h-4 w-4"}),(0,b.jsx)(q.SelectValue,{placeholder:"Semua Poli"})]}),(0,b.jsxs)(q.SelectContent,{children:[(!P||B.length>1)&&(0,b.jsx)(q.SelectItem,{value:"all",children:"Semua Poli"}),B.map(a=>(0,b.jsx)(q.SelectItem,{value:a.id.toString(),children:a.name},a.id))]})]}),(0,b.jsx)(o.Button,{variant:"outline",size:"icon",onClick:W,disabled:H,children:(0,b.jsx)(f.RefreshCw,{className:`h-4 w-4 ${H?"animate-spin":""}`})})]})]}),(0,b.jsx)(d.motion.div,{variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"show",className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:Z.map(a=>(0,b.jsx)(d.motion.div,{variants:$,children:(0,b.jsx)(p.Card,{children:(0,b.jsx)(p.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:a.title}),(0,b.jsx)("p",{className:"text-3xl font-bold mt-2",children:F?"-":a.value})]}),(0,b.jsx)("div",{className:`p-3 rounded-xl bg-${a.color}-100 dark:bg-${a.color}-950`,children:(0,b.jsx)(a.icon,{className:`h-6 w-6 text-${a.color}-600 dark:text-${a.color}-400`})})]})})})},a.title))}),(0,b.jsxs)(s.Tabs,{value:J,onValueChange:a=>K(a),children:[(0,b.jsxs)(s.TabsList,{children:[(0,b.jsxs)(s.TabsTrigger,{value:"active",children:["Aktif (",t.length+v.length,")"]}),(0,b.jsxs)(s.TabsTrigger,{value:"completed",children:["Selesai Hari Ini (",x.length,")"]})]}),(0,b.jsx)(s.TabsContent,{value:"active",className:"mt-4",children:(0,b.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,b.jsx)(d.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},children:(0,b.jsxs)(p.Card,{children:[(0,b.jsx)(p.CardHeader,{className:"pb-3",children:(0,b.jsxs)(p.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-blue-100 dark:bg-blue-950",children:(0,b.jsx)(e.Stethoscope,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),"Sedang Diperiksa",v.length>0&&(0,b.jsx)(r.Badge,{variant:"secondary",children:v.length})]})}),(0,b.jsx)(p.CardContent,{className:"space-y-3",children:0===v.length?(0,b.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,b.jsx)(l.ClipboardList,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),(0,b.jsx)("p",{children:"Belum ada pemeriksaan aktif"})]}):v.map(a=>(0,b.jsxs)("div",{className:"p-4 rounded-lg border bg-blue-50 dark:bg-blue-950/30 hover:border-blue-300 transition-colors cursor-pointer",onClick:()=>Y(a),children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-full bg-blue-100 dark:bg-blue-900",children:(0,b.jsx)(n.UserCheck,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold",children:a.patient?.name}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[a.queue?.queue_code," -"," ",a.patient?.medical_record_number]})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)(r.Badge,{variant:"info",children:a.department?.name}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[a.patient?.age," tahun,"," ",a.patient?.gender_label]})]})]}),(0,b.jsxs)("div",{className:"mt-3 flex items-center justify-between",children:[(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Mulai:"," ",new Date(a.created_at).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})]}),(0,b.jsxs)(o.Button,{size:"sm",variant:"outline",children:[(0,b.jsx)(m.PlayCircle,{className:"h-4 w-4 mr-1"}),"Lanjutkan"]})]})]},a.id))})]})}),(0,b.jsx)(d.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},children:(0,b.jsxs)(p.Card,{children:[(0,b.jsx)(p.CardHeader,{className:"pb-3",children:(0,b.jsxs)(p.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-yellow-100 dark:bg-yellow-950",children:(0,b.jsx)(g.Clock,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400"})}),"Antrian Menunggu Diperiksa",t.length>0&&(0,b.jsx)(r.Badge,{variant:"secondary",children:t.length})]})}),(0,b.jsx)(p.CardContent,{className:"space-y-3 max-h-[500px] overflow-y-auto",children:0===t.length?(0,b.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,b.jsx)(i.Users,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),(0,b.jsx)("p",{children:"Tidak ada pasien menunggu"})]}):t.map(a=>(0,b.jsxs)("div",{className:"p-4 rounded-lg border hover:border-primary transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-full bg-yellow-100 dark:bg-yellow-900",children:(0,b.jsx)(i.Users,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold",children:a.patient?.name||"Pasien"}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[a.queue_code," -"," ",a.patient?.medical_record_number||"-"]})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)(r.Badge,{children:a.department?.name}),a.patient&&(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[a.patient.age," tahun,"," ",a.patient.gender_label]})]})]}),(0,b.jsxs)("div",{className:"mt-3 flex items-center justify-between",children:[(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Tunggu: ",a.wait_time," menit"]}),(0,b.jsxs)(o.Button,{size:"sm",onClick:()=>X(a),children:[(0,b.jsx)(e.Stethoscope,{className:"h-4 w-4 mr-1"}),"Periksa"]})]})]},a.id))})]})})]})}),(0,b.jsx)(s.TabsContent,{value:"completed",className:"mt-4",children:(0,b.jsxs)(p.Card,{children:[(0,b.jsx)(p.CardHeader,{className:"pb-3",children:(0,b.jsxs)(p.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-green-100 dark:bg-green-950",children:(0,b.jsx)(h.CheckCircle,{className:"h-4 w-4 text-green-600 dark:text-green-400"})}),"Pasien Selesai Diperiksa Hari Ini"]})}),(0,b.jsx)(p.CardContent,{children:0===x.length?(0,b.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,b.jsx)(h.CheckCircle,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),(0,b.jsx)("p",{children:"Belum ada pasien selesai diperiksa hari ini"})]}):(0,b.jsx)("div",{className:"space-y-3",children:x.map(a=>(0,b.jsxs)("div",{className:"p-4 rounded-lg border bg-green-50 dark:bg-green-950/30",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-full bg-green-100 dark:bg-green-900",children:(0,b.jsx)(h.CheckCircle,{className:"h-4 w-4 text-green-600 dark:text-green-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold",children:a.patient?.name}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[a.queue?.queue_code," -"," ",a.patient?.medical_record_number]})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)(r.Badge,{variant:"success",children:a.department?.name}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[a.patient?.age," tahun,"," ",a.patient?.gender_label]})]})]}),(0,b.jsxs)("div",{className:"mt-3 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:[(0,b.jsxs)("span",{children:["Selesai:"," ",a.completed_at?new Date(a.completed_at).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}):"-"]}),(0,b.jsx)("span",{className:"mx-2",children:"|"}),(0,b.jsxs)("span",{children:["Dokter: ",a.doctor?.name||"-"]})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:a.invoice?(0,b.jsx)(r.Badge,{variant:"paid"===a.invoice.payment_status?"success":"warning",children:"paid"===a.invoice.payment_status?"Sudah Bayar":"Belum Bayar"}):(0,b.jsx)(r.Badge,{variant:"outline",children:"Belum Ada Invoice"})})]})]},a.id))})})]})})]})]})}a.s(["default",()=>aj],7084)}];

//# sourceMappingURL=src_app_%28dashboard%29_examination_page_tsx_bf191dc8._.js.map